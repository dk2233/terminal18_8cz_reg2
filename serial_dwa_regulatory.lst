MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000000                00001 ﻿; w tej wersji wartosci temperatur sa wysylane zaraz po pomiarze
                      00002 
                      00003 
                      00004 ;zmieniono histereze na histereza 1 - gorna
                      00005 ;- oraz histereza 2  - dolna
                      00006 
                      00007 
                      00008 ;dodano sterowanie drugim obwodem
                      00009 ;rozszerzono menu o kolejne opcje - związane z operacją pracy regulatora drugiego
                      00010 
                      00011 
                      00012 ;program dopasowany do wspolpracy z ukladem 
                      00013 ;z pracy statutowej2007
                      00014 ;tzn tylko rejestracja danych
                      00015 
                      00016 ;procek = 18f4320
                      00017 
                      00018 ;procek = 18f442
                      00019 
                      00020 
                      00021 ;dodano  prezentacja  
                      00022 ;poprawa 
  00000010            00023 jak_duzo_zliczen_tmr1_na_sekunde    equ   0x10
                      00024 
  018F4320            00025 procek = 18f4320
                      00026 
Warning[205]: Found directive in column 1. (IF)
                      00027 IF (procek == 18f442)
                      00028 LIST P=18f442
                      00029 include  "p18f442.inc"
                      00030 
                      00031          __CONFIG _CONFIG1H, _OSCS_OFF_1H & _XT_OSC_1H 
                      00032          __CONFIG _CONFIG2L, _BOR_OFF_2L & _PWRT_ON_2L
                      00033          __CONFIG _CONFIG2H, _WDT_OFF_2H
                      00034          
                      00035          __CONFIG _CONFIG4L, _DEBUG_ON_4L & _LVP_OFF_4L & _STVR_OFF_4L
                      00036         
                      00037 ENDIF
                      00038 
Warning[205]: Found directive in column 1. (IF)
                      00039 IF (procek==18f4320)
Warning[205]: Found directive in column 1. (LIST)
                      00040 LIST P=18f4320
Warning[205]: Found directive in column 1. (include)
                      00041 include  "p18f4320.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC18F4320 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2010 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01403         LIST
                      00042 
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300000 71FF           00043          __CONFIG _CONFIG1H, _IESO_OFF_1H & _XT_OSC_1H 
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
                      00044          __CONFIG _CONFIG2L, _BOR_ON_2L & _BORV_45_2L & _PWRT_ON_2L
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300002 FEF2           00045          __CONFIG _CONFIG2H, _WDT_OFF_2H
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300004 FDFF           00046          __CONFIG _CONFIG3H, _PBAD_DIG_3H & _MCLRE_ON_3H
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300006 FFFA           00047          __CONFIG _CONFIG4L, _DEBUG_OFF_4L & _LVP_OFF_4L & _STVR_OFF_4L
Warning[205]: Found directive in column 1. (ENDIF)
                      00048 ENDIF
                      00049          
                      00050          ;__CONFIG _XT_OSC & _WDT_OFF & _PWRTE_ON & _BODEN_OFF & _LVP_OFF & _CPD_OFF & _WRT_OFF & _CP_OF
                            F & _DEBUG_OFF
                      00051 
                      00052 ;definicje są w odzielnym pliku
                      00053 
Warning[205]: Found directive in column 1. (include)
                      00054 include "def_var_reg2.h"
                      00001 
                      00002 
                      00003          
                      00004 
                      00005 
                      00006 
                      00007          cblock   80h
  00000080            00008          w_temp
  00000081            00009          status_temp
  00000082            00010          pclath_temp
  00000083            00011          bsr_temp
  00000084            00012          fsrl_temp
  00000085            00013          fsrh_temp
  00000086            00014          linia1
  00000087            00015          linia2
  00000088            00016          linia3
  00000089            00017          linia4
  0000008A            00018          letter
  0000008B            00019          n
  0000008C            00020          bit
  0000008D            00021          odebrano_liter
  0000008E            00022          liczba1
  0000008F            00023          liczba2
  00000090            00024          liczba3
  00000091            00025          tmp                       ; uzywany w odbiorze danych i procedurach poleceń
  00000092            00026          tmp_hex                    ;uzywany w procedurze hex2dec
  00000093            00027          tmp_hex_H                  ;starszy bajt 
  00000094            00028          tmp6                       ; uzywany w poprawce temp
  00000095            00029          tmp7                        ; uzywany do odbioru danych z rs232
  00000096            00030          dec100
  00000097            00031          dec10
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000098            00032          dec1
  00000099            00033          stan_key
  0000009A            00034          stan2_key
  0000009B            00035          wynikh
  0000009C            00036          wynik
  0000009D            00037          wynik01
  0000009E            00038          znaczniki ;0x09a
  0000009F            00039          markers
  000000A0            00040          markers2
  000000A1            00041          markers3
  000000A2            00042          markers_regulacja
  000000A3            00043          dane_lcd
  000000A4            00044          tmp_lcd              ; używany w procedurach lcd
  000000A5            00045          rcsta_temp
  000000A6            00046          ile_kanalow ;0x09f
  000000A7            00047            ktory_kanal_mierze ; 0x0a0
  000000A8            00048          odstep_pomiarowy
  000000A9            00049          aktualny_odstep
  000000AA            00050           ktory_rejestr_zapisuje
  000000AB            00051           pomiarH
  000000AC            00052           pomiarL
  000000AD            00053           pomiar_ulamek
                      00054            
  000000AE            00055           jaka_wartosc_regulujeH1
  000000AF            00056           jaka_wartosc_regulujeL1
                      00057           
  000000B0            00058           jaka_wartosc_regulujeH2
  000000B1            00059           jaka_wartosc_regulujeL2
                      00060           
  000000B2            00061           jak_duzo_probek ; 0x0a9
                      00062           
  000000B3            00063           ktora_probka
  000000B4            00064           ktory_kanal
  000000B5            00065           usrednianie_przez_co_mnoze
  000000B6            00066           znaczniki_ds
  000000B7            00067           polecenie_wysylane
  000000B8            00068          jak_duzo_bajtow_odbieram_z_ds
                      00069          
  000000B9            00070          pomiar0H
  000000BA            00071          pomiar0L
  000000BB            00072          pomiar1H
  000000BC            00073          pomiar1L
  000000BD            00074          pomiar2H
  000000BE            00075          pomiar2L
  000000BF            00076          pomiar3H
  000000C0            00077          pomiar3L
  000000C1            00078          pomiar4H
  000000C2            00079          pomiar4L
  000000C3            00080          pomiar5H
  000000C4            00081          pomiar5L
  000000C5            00082          pomiar6H
  000000C6            00083          pomiar6L
  000000C7            00084          pomiar7H
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  000000C8            00085          pomiar7L
  000000C9            00086          pomiar_prad1H
  000000CA            00087          pomiar_prad1L
  000000CB            00088          pomiar_prad2H
  000000CC            00089          pomiar_prad2L
  000000CD            00090          bajt_ds
  000000CE            00091          poprawka0
  000000CF            00092          poprawka1
  000000D0            00093          poprawka2
  000000D1            00094          poprawka3
  000000D2            00095          poprawka4
  000000D3            00096          poprawka5
  000000D4            00097          poprawka6
  000000D5            00098          poprawka7
  000000D6            00099          poprawka_prad1
  000000D7            00100          poprawka_prad2
  000000D8            00101          jak_duzo_kanalow_pradu
  000000D9            00102          ktory_aktualnie_kanal_pradu
                      00103          
  000000DA            00104          dzien_10
  000000DB            00105          dzien_1
  000000DC            00106          godziny_10
  000000DD            00107          godziny_1
  000000DE            00108          minuty_10
  000000DF            00109          minuty_1
  000000E0            00110          sekundy_10
  000000E1            00111          sekundy_1
                      00112          
  000000E2            00113          do_sekundy
  000000E3            00114          pozycja_menu    
  000000E4            00115          numer_opcji
  000000E5            00116          polozenie_gwiazdki
  000000E6            00117          szybka_zmiana_wartosci
                      00118          
  000000E7            00119          fsrl1_temp
  000000E8            00120          fsrh1_temp
                      00121          
  000000E9            00122          histereza_R1_1
  000000EA            00123          histereza_R1_2
                      00124          
  000000EB            00125          histereza_R2_1
  000000EC            00126          histereza_R2_2
                      00127          
  000000ED            00128          ustawianie_czasu_co_wyswietlam
                      00129          
  000000EE            00130          ktory_czujnik_reguluje1
                      00131          
  000000EF            00132          ktory_czujnik_reguluje2
                      00133          
                      00134          endc
                      00135 ;0xbe                           
                      00136         
                      00137          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00138 ;        cblock 100h
                      00139                   
                      00140 ;        endc
                      00141 
                      00142 ;eeprom                  
                      00143          cblock   0
  00000000            00144          poprawka0_ee
  00000001            00145          poprawka1_ee
  00000002            00146          poprawka2_ee
  00000003            00147          poprawka3_ee
  00000004            00148          poprawka4_ee
  00000005            00149          poprawka5_ee
  00000006            00150          poprawka6_ee
  00000007            00151          poprawka7_ee
  00000008            00152          poprawka_prad1_ee
  00000009            00153          poprawka_prad2_ee
                      00154          
                      00155          endc
                      00156 ;rejestry nieuzywane wykorzystuje jako dane
                      00157 
                      00158 ;        equ      TMR1L
                      00159 
                      00160 ;        equ      TMR1H
                      00161 
                      00162 ;                 equ      CCPR1H
                      00163 ;linia            equ      CCPR1L
                      00164                   
                      00165          
  00000004            00166 lampka            equ      4
  00000004            00167 lampka2           equ      4
                      00168 
  00000005            00169 czujnik_ds1820    equ      5                  
                      00170 
  00000F81            00171 portlampka2       equ      PORTB
  00000F82            00172 port_ds1820       equ      PORTC
  00000F82            00173 port_CTS      equ      PORTC                  
  00000F82            00174 port_RTS      equ          PORTC 
                      00175          
  00000004            00176 znacznik_CTS      equ      4
  00000005            00177 znacznik_RTS      equ      5
                      00178 ;klawisze
                      00179 
                      00180 
                      00181 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;markers
                      00182 ;/*wyswietl */     
  00000000            00183 czy_usrednianie   equ      0
  00000001            00184 czy_wysylanie     equ      1
  00000002            00185 pomiary_zrobione  equ      2  ;znacznik tego czy pomiary zostaly skonczone
  00000003            00186 inicjuj_pomiary   equ         3
  00000004            00187 czy_wysylac_pomiary_serial    equ       4
  00000005            00188 czy_wyswietlam_temp     equ   5  
  00000006            00189 czy_wlaczyc_ponownie_temp    equ    6
  00000007            00190 trzymanie_klawisza            equ   7
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00191              
                      00192 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;markers2
                      00193 
  00000000            00194 przerwanie_t0     equ      0
  00000001            00195 przerwanie_t1     equ      1
  00000002            00196 pomiary           equ      2
  00000003            00197 sprawdz_odebrane  equ      3
  00000004            00198 wyslij_pomiar     equ      4
                      00199 
                      00200 
                      00201 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;markers3
                      00202 
  00000000            00203 pomiary_pradu           equ   0
  00000001            00204 znacznik_pomiaru_pradu  equ   1
  00000002            00205 czy_zegar_wyswietlac    equ   2
  00000003            00206 odswiezanie_zegara      equ   3
  00000004            00207 wcisnieto_klawisz       equ   4
  00000005            00208 dzialanie_po_klawiszu   equ    5
  00000006            00209 napisz_minus            equ   6
  00000007            00210 pokazuje_temperatury_47       equ   7
                      00211 
                      00212 
                      00213 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;markers regulacja
                      00214 
  00000000            00215 zalacz_moc1        equ      0
  00000001            00216 reguluj1           equ      1
  00000002            00217 wylacz_moc1        equ      2
  00000003            00218 reguluj2           equ      3
  00000004            00219 zalacz_moc2        equ      4
  00000005            00220 wylacz_moc2        equ      5
                      00221 
                      00222 
                      00223 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;znaczniki
  00000000            00224 czy_ponownie_wlaczyc_temp     equ   0
  00000001            00225 czy_ponownie_wlaczyc_zegar    equ   1
  00000002            00226 czy_moge_juz_zmieniac         equ   2 ; dotyczy momentu w którym trzymanie klawisza trwa 1 s -> zmiana 
                            wartości
                      00227 
                      00228 
                      00229 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;pozycja_menu
                      00230 ;jezeli jest 0 to ekran główny
                      00231 ;ekran_glowny      equ   0
                      00232 
                      00233 
  00000000            00234 menu_opcje1       equ   0
  00000001            00235 menu_opcje2       equ   1
  00000002            00236 menu_opcje3       equ   2
  00000003            00237 menu_opcje4       equ   3
  00000004            00238 menu_opcje5       equ   4
                      00239 
                      00240 
  00000007            00241 zmiana_opcji      equ   7
  00000005            00242 menu_opcje_end    equ   5
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000014            00243 numer_opcji_koncowej    equ   0x14
                      00244 
                      00245 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;numery opcji
  00000001            00246 opcja_czujniki                   equ   1
  00000002            00247 opcja_odstep                     equ   2
  00000003            00248 opcja_srednia                    equ   3
  00000004            00249 opcja_pomiar_i                   equ   4
  00000005            00250 opcja_ustaw_temp_R1              equ   5
  00000006            00251 opcja_ustaw_temp_R2              equ   6
  00000007            00252 opcja_wlacz_1                 equ   7
  00000008            00253 opcja_wlacz_2                 equ   8
                      00254 
  00000009            00255 opcja_histereza_R1_1               equ   9
  0000000A            00256 opcja_histereza_R1_2              equ  0xa
  0000000B            00257 opcja_histereza_R2_1               equ   0xb
  0000000C            00258 opcja_histereza_R2_2              equ  0xc
                      00259 
  0000000D            00260 opcja_regulacja1                equ        0xd
  0000000E            00261 opcja_regulacja2                equ        0xe
                      00262 
  0000000F            00263 opcja_czujnik_regulacji1            equ   0x0f
  00000010            00264 opcja_czujnik_regulacji2           equ   0x10
                      00265 ;opcja_ustaw_serial                   equ   0xc
  00000011            00266 opcja_wyswietl_zegar          equ   0x11
  00000012            00267 opcja_wyswietl_temp           equ   0x12
  00000013            00268 opcja_podswietlenie           equ   0x13
  00000014            00269 opcja_ustaw_zegar             equ   0x14           
                      00270 ;;
                      00271 ;poprawki_czuj           equ   
                      00272 
  0000000A            00273 polozenie_liczby_menu         equ   0xa
                      00274 
                      00275 ;;;
  00000001            00276 nie      equ      1
  00000010            00277 ile_znakow        equ      10h
                      00278 
                      00279 
                      00280 ;znaczniki
  00000000            00281 kalibracja        equ 0
                      00282 
                      00283 
  00000F81            00284 port_serial       equ      PORTB
  00000007            00285 RXD               equ      7
                      00286 
                      00287 
                      00288 ;
  00000002            00289 ma       equ      2
  00000001            00290 mb       equ      1
  00000000            00291 mc       equ      0
  00000003            00292 dana     equ      3        
  00000004            00293 kb_change         equ      4
  00000005            00294 kb_cofnij         equ      5
  00000006            00295 kb_enter    equ      6
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000007            00296 kb_minus    equ      7
                      00297 
                      00298 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;klawisze
  00000004            00299 dlugosc_oczekiwania_na_zmiane       equ   4
  00000F83            00300 latch_keys        equ      PORTD
  00000F83            00301 port_keys         equ      PORTD
  00000000            00302 latch_back        equ   0
  00000001            00303 latch_down        equ   1
  00000002            00304 latch_up          equ   2
  00000003            00305 latch_enter       equ   3
                      00306 
                      00307 ;stan_key
  00000000            00308 mamy_back    equ   0
  00000001            00309 mamy_down   equ   1
  00000002            00310 mamy_up     equ   2
  00000003            00311 mamy_enter  equ   3
                      00312 
                      00313 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00314 
                      00315 
                      00316 
                      00317 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;LCD
                      00318 
  00000028            00319 set_4bit          equ   b'00101000'
  0000000C            00320 display_on        equ   b'00001100'
  0000002A            00321 init_4bit          equ      b'00101010' ;ustawia 2 linie i 5x8 font
                      00322 
  00000F8C            00323 latch_lcd          equ      LATD
  00000F8B            00324 latch_lcd_e        equ      LATC
  00000F8A            00325 latch_lcd_rw       equ      LATB
  00000F8A            00326 latch_lcd_rs       equ      LATB
                      00327 
                      00328 ;definicja bitow uzywanych w 4 bitowym przesylaniu 0 - uzywany 1 - nieuzywany
                      00329 ;zwiazane z opcja kasowania
  0000000F            00330 ktore_bity_uzywane_na_lcd     equ   0x0f
  000000F0            00331 ktore_bity_lcd_tris           equ   0xf0
  0000000F            00332 normalne_ustawienie_tris_lcd  equ   0x0f
                      00333 
                      00334 
  00000F83            00335 port_lcd          equ      PORTD
                      00336 
  00000F82            00337 port_lcd_e      equ     PORTC
  00000F81            00338 port_lcd_rw     equ     PORTB
  00000F81            00339 port_lcd_rs     equ     PORTB
                      00340 
  00000F95            00341 tris_lcd          equ      TRISD
                      00342 ;0 to pomiar
                      00343 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00344 
  00000001            00345 pin_e_4724        equ      1
                      00346 
                      00347 ;3 to ref+
                      00348 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00349 
  00000003            00350 enable          equ     3
  00000003            00351 rs              equ     3
  00000002            00352 rw              equ     2
                      00353 
                      00354 ;znaki transmisyjne
  0000000D            00355 znak_cr           equ      0dh
  0000000A            00356 znak_lf           equ      0ah
  000000CC            00357 znak_I            equ      0cch
                      00358 
                      00359 ;znaczniki_ds
                      00360                   ;inicjacja         equ      0
                      00361                   ;skip_rom          equ      1             
  00000001            00362 dane_odebraneH    equ      1
  00000000            00363 dane_odebraneL    equ      0   
                      00364 
                      00365  
                      00366 
  00000F81            00367 port_triak        equ      PORTB
  00000F8A            00368 latch_moc         equ       LATB
                      00369 
  00000000            00370 triak1            equ      0
  00000001            00371 triak2            equ      1
                      00372 
  00000002            00373 pomiar_prad1      equ      2
  00000004            00374 pomiar_prad2      equ      4
                      00375 
                      00376 ;histereza         equ   4
  00000F82            00377 port_multiplekser equ   PORTC
  00000F8B            00378 latch_multiplekser equ   LATC
  00000000            00379 pin_A                  equ    0
  00000001            00380 pin_B                   equ   1
  00000002            00381 pin_C                   equ   2
                      00382 
                      00383 
                      00384 
                      00385 ;ustawienia czujników
                      00386 
  00000007            00387 ilosc_czujnikow            equ      7      
                      00055 
  00000001            00056 czy_ekran         equ      1
  00000001            00057 czy_pomiary_na_ekran       equ      1
  00000001            00058 polozenie_danych_lcd equ 1
                      00059 ;2007-06-07
                      00060 ;
                      00061 ;dodano obsluge ds1820
                      00062 ;poprawiono bledy
                      00063 ;ten program odbiera dane korzystajac z modulu obslugi USART
                      00064 ;w procesorze
                      00065 
                      00066 ;jest to "karta" zbioru danych z 2 czujników temp
                      00067 ;LM35 i
                      00068 ;
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00069 ;
                      00070 ;PORTD -0 -Klawisz Back
                      00071 ;PORTD -1 -Klawisz down
                      00072 ;PORTD -2 - klawisz up
                      00073 ;PORTD -3 -Klawisz enter
                      00074 ;PORTD -4 - LCD Data
                      00075 ;PORTD -5 - Lcd Data
                      00076 ;PORTD -6 - Lcd Data
                      00077 ;PORTD -7 - Lcd Data
                      00078 
                      00079 ;PORTB -0 -Triak 1 
                      00080 ;PORTB -1 -Triak 2
                      00081 ;PORTB -2 -R/W
                      00082 ;PORTB -3 - RS
                      00083 ;PORTB -4 -
                      00084 ;PORTB -5 -
                      00085 ;PORTB -6 - 
                      00086 ;PORTB -7 -
                      00087          
                      00088 ;PORTC - 0 -  A 4051
                      00089 ;PORTC - 1 -   B 4051
                      00090 ;PORTC-  2 -  C 4051
                      00091 ;POrtc - 3 -   Enable
                      00092 ;POrtc - 4 -  CTS (czyli ze procek wysyla) (dane z procka)
                      00093 ;POrtc - 5 - RTS (czyli znacznik ze komputer cos wysyla) (dane do procka)
                      00094 ;POrtc - 6 - transmit
                      00095 ;POrtc - 7 - receive
                      00096 
                      00097 ;PORTA - 0 - Anlog - 8 wejsc lm35 przez mulitplesker
                      00098 ;PORTA - 1 - 
                      00099 ;PORTA - 2 - pomiar pradu 1
                      00100 ;PORTA - 3 - REferencyjne+2,560 V
                      00101 ;PORTA - 4 - 
                      00102 ;PORTA - 5 - pomiar pradu 2 
                      00103 ;PORTE - 0 - 
                      00104 ;PORTE - 1 - 
                      00105 ;PORTE - 2 - 
                      00106 
                      00107 ;TMR0L - czekanie miedzy kanalami analoga na pomiar
                      00108 ;tmr1  - odliczanie sekund pomiaru
                      00109 ;tmr2  - ewentualnie ds1820
                      00110 ;tmr3  -zegar systemowy (przyciski systemu)
                      00111 
                      00112 ;bledy przy pomiarach - tzn gdzies sie wiesza gdy wylaczy sie pomiary
                      00113 ;zaczyna wyrzucac na ekran wszystkie pomiary nie usredniajac  
                      00114 ;to wynika z faktu ze przy wysylaniu danych pojawia sie powrotne wysylania
                      00115 
                      00116 ;okazuje sie ze wlaczenie odbioru "cat /dev/ttyS0" powoduje przeskok RTS w stan 0 (tzn informacja o nada
                            waniu)
                      00117 
                      00118 ;trzeba zrobic tak by odczyt przez komputer byl tylko w czasie wysylania danych tzn 
                      00119 ;gdy CTS jest na wysoko poza tym powinien byc brak odczytu
                      00120 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00121 ;INDF0 (FSR0L i FSR0H) - uzywane tylko w odbiorze danych, tzn w komunikacji z portem szeregowym, oraz w 
                            poleceniach 
                      00122 ;INDF1   - uzywane w operacjach Analog oraz w procedurze obróbki danej zmierzonej przez A/D
                      00123 ;INDF2  - używany w procedurach czasu, oraz w 
                      00124 
                      00125 
                      00126 ;2008.03.01
                      00127 ;dodano obsluge zegara i jego wyswietlanie
                      00128 ;brak procedury miganie :zamieniona na procedura_obslugi_zegara
                      00129 
                      00130 ;program działa zupełnie nieźle, jednak wiesza się przy większej liczbie czujników
                      00131 
                      00132 ;2008.03.31
                      00133 
                      00134 
                      00135 
                      00136 ;2008.04.14
                      00137 
                      00138 ;wciąż się wiesza podczas pomiarów temperatury  - próba wyłączania wskazania zegara w trakcie pom
                            iarów nie wpłynęła na poprawę pracy
                      00139 ;wyłączanie wskazywania temperatur również nie wpłynęło na stabilność pracy
                      00140 
                      00141 ;poprawa czyszczenia ekranu kiedy zmieniam wskazania temp na ekranie głównym
                      00142 
                      00143 ;poprawa pracy pokazywania zawartości rejestru
                      00144 ;
                      00145 ;obsługa  wpisywania histerezy, temperatury regulowanej, średniej, ilości próbek,
                      00146                                                                                                         
                                                                                                                            
                      00147 ;2008.04.15
                      00148 ;wieszanie programu w trakcie pomiarów wynikają z błędów w algorytmie uśredniania wyników
                      00149 ;po zmniejszeniu średniej do 32 próbek nie następuje wieszanie
                      00150 ;wyraźnie na błędy wpływa ilość próbek 64 i 128
                      00151 
                      00152 ;próba zmiany algorytmu uśredniania uzyskanego wyniku
                      00153 ;uśrednianie liczb:
                      00154 ;0x80 (128 próbek) to mnożenie przez 0x02 (2/256)
                      00155 ;0x40 (64 próbki) 0x04
                      00156 ;0x20 (32)  0x08
                      00157 ;0x10 (16)   0x10
                      00158 ;0x08 (8)    0x20 
                      00159 ;0x04 (4 próbki) 0x64
                      00160 ;0x02 (2 próbki) 0x80 (128/256 czyli 0.5) 
                      00161 
                      00162 ;usunięcie procedury przesuwania
                      00163 ;2008.04.16
                      00164 ;poprawiony algorytm usredniania pomiarow
                      00165 ;
                      00166 ;dodano możliwość zmiany wartości przez trzymanie przycisku
                      00167 ;ustaw temp, odstep, 
                      00168 
                      00169 ;2008.04.17
                      00170 ;ostatecznie poprawiłem wieszanie układu, poprawiłem błędy podczas wyświetlania danych na ekranie 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            -> błędy były przy powrocie z
                      00171 ;procedur przerwań, tzn W z W_temp wracał najpierw, a potem jeszcze do W zapisywane były inne wartoś
                            ci
                      00172 ;poza tym błędy były przy wywoływaniu procedur klawisza. Otóż każde naciśnięcie klawisza wywoł
                            ywało przeskok do procedury
                      00173 ;w przypadku gdy trzymany był klawisz i procedury wykryły że należy zmieniać wskazanie liczby, nast
                            ępował przekok do procedur wykrycia klawisza up lub down,
                      00174 ;jednak powrót następował za pomocą procedury "goto". Stąd problem, bowiem wywołanie funkcji trzym
                            ania klawisza są za pomocą call. To powodowało brak
                      00175 ;powrotu z funkcji call, i w końcu zapchanie stosu.
                      00176 ;układowi brakuje wciąż:
                      00177 ;           - zmiany ustawień zegara
                      00178 ;           - wybór wartości mocy dostarczanej do układu
                      00179 ;           - błędy - przy wyświetlaniu prądu triaka 2 jego wartosć jest dodawana do wskazania temp
                            eratury 1, 
                      00180 ;           - dodać wybór wskazania który czujnik temperatury jest czujnikiem regulatora
                      00181 ;           - dodać  procedurę regulatora P
                      00182 ;           - regulator PID
                      00183 ;           - dodać przeliczanie wartości zmierzonej prądu na wskazanie amperów
                      00184 ;Poprawić procedurę liczenia średniej wartości pomiarów z pewnego czasu - mieszać ze sobą pomiary
                             w postaci
                      00185 ; pomiar czujnika 1,2,3,4,5 - dłuższa przerwa, 1,2,3,4,5, dłuższa przerwa, etc
                      00186 
                      00187 ;2008.04.26
                      00188 ;błędne działanie procedur pomiaru temperatury - zły pomiar temperatur ujemnych 
                      00189 ;zamiast poprawnej wartości ujemnych po osiągnięciu 0 oC wyświetlana jest wartość -64 oC.
                      00190 ;poza tym zamiast 0 wyświetlane były temperatury na poziomie 1.25 - 1.5 oC. 
                      00191 ;Zważywszy że czujnik był wyskalowany dla temperatur 23 - 20 C, wskazuje to na nierównomierną
                      00192 ;skalę błędu - zmiana być może liniowa - należy to sprawdzić
                      00193 
                      00194 ;2008.04.27
                      00195 ;dodano ustawianie wartości zegara
                      00196 ;
                      00197 ;2009.04.22
                      00198 ;poprawa działania histerezy regulacji dwustawnej
                      00199 
                      00200 
                      00201 ;2011.05.09 
                      00202 ;dalej jest problem z praca regulacji dwustawnej i pomiarami temperatury w punkcie 5
                      00203 
                      00204 
000000                00205          org      0000h
000000                00206 BEGIN
                      00207          ;bsf      PCLATH,3
                      00208          ;bcf      PCLATH,4
                      00209          
000000 EF1A F00E      00210          goto     inicjacja
                      00211                   
                      00212          
000008                00213          org      0008h
                      00214          
000008                00215 przerwanie
                      00216 ;zachowuje rejestr W
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000008 CFD8 F081      00217       movff    STATUS,status_temp
00000C 6F80           00218          movwf    w_temp
                      00219 ;zachowuje rejestr STATUS
                      00220          
00000E CFE0 F083      00221          movff    BSR,bsr_temp
                      00222          
000012 50E9           00223          movf     FSR0L,w
000014 6F84           00224          movwf    fsrl_temp
000016 50EA           00225          movf     FSR0H,w
000018 6F85           00226          movwf    fsrh_temp
                      00227          
00001A 50E1           00228          movf     FSR1L,w
00001C 6FE7           00229          movwf    fsrl1_temp
00001E 50E2           00230          movf     FSR1H,w
000020 6FE8           00231          movwf    fsrh1_temp
                      00232          
                      00233 ;po to by wszystkie ustawienia banki itd byly na 0    
                      00234          ;bsf      STATUS,RP0
000022 AA9D           00235          btfss    PIE1,RCIE
000024 EF17 F000      00236          goto     przerwanie_1
                      00237          
                      00238          ;bcf      STATUS,RP0
000028 BA9E           00239          btfsc    PIR1,RCIF
00002A EF99 F000      00240          goto     wykryto_odbior    
                      00241 
00002E                00242 przerwanie_1
                      00243          ;bsf      STATUS,RP0
                      00244          
00002E A09D           00245          btfss    PIE1,TMR1IE
000030 EF1D F000      00246          goto     przerwanie_2
                      00247          
                      00248          ;bcf      STATUS,RP0
000034 B09E           00249          btfsc    PIR1,TMR1IF
000036 EF46 F000      00250          goto     wykryto_t1
                      00251 
00003A                00252 przerwanie_2      
                      00253         
                      00254          
00003A A89D           00255          btfss    PIE1,TXIE
00003C EF23 F000      00256          goto     przerwanie_3
                      00257          
                      00258          ;bcf      STATUS,RP0
000040 B89E           00259          btfsc    PIR1,TXIF
000042 EFBB F000      00260          goto     przerwanie_wysylania
                      00261          
000046                00262 przerwanie_3      
                      00263          
                      00264          
000046 AC9D           00265          btfss    PIE1,ADIE
000048 EF29 F000      00266          goto     przerwanie_4
                      00267          
                      00268          ;bcf      STATUS,RP0
00004C BC9E           00269          btfsc    PIR1,ADIF
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00004E EFC5 F000      00270          goto     przerwanie_pomiaru
                      00271          
000052                00272 przerwanie_4
                      00273          
                      00274          
000052 A29D           00275          btfss    PIE1,TMR2IE
000054 EF2F F000      00276          goto     przerwanie_5
                      00277          
                      00278          ;bcf      STATUS,RP0
000058 B29E           00279          btfsc    PIR1,TMR2IF
00005A EF96 F000      00280          goto     wykryto_t2
00005E                00281 przerwanie_5
                      00282          
                      00283 ;        goto     wykryto_rb
                      00284         
                      00285         
00005E B4F2           00286         btfsc    INTCON,TMR0IF
000060 EF91 F000      00287         goto     wykryto_t0
                      00288 
000064                00289 przerwanie_6
000064 A2A0           00290         btfss    PIE2,TMR3IE
000066 EF38 F000      00291         goto     przerwanie_7
                      00292          
                      00293         
00006A B2A1           00294         btfsc    PIR2,TMR3IF
00006C EFD3 F000      00295         goto     wykryto_t3   
                      00296         
000070                00297 przerwanie_7        
                      00298 ;        btfsc    PIR1,TMR2IF
                      00299 ;        goto     wykryto_t2
                      00300          
                      00301 ;        btfsc    PIR1,TMR2IF
                      00302 ;        goto     wykryto_t2
                      00303          
000070                00304 wyjscie_przerwanie
                      00305 
000070 C083 FFE0      00306          movff    bsr_temp,BSR
                      00307          
                      00308          
000074 5184           00309          movf     fsrl_temp,w
000076 6EE9           00310          movwf    FSR0L
000078 5185           00311          movf     fsrh_temp,w
00007A 6EEA           00312          movwf    FSR0H
                      00313          
00007C 51E7           00314          movf     fsrl1_temp,w
00007E 6EE1           00315          movwf    FSR1L
000080 51E8           00316          movf     fsrh1_temp,w
000082 6EE2           00317          movwf    FSR1H
                      00318          
000084 5180           00319          movf     w_temp,w
000086 C081 FFD8      00320          movff    status_temp,STATUS
                      00321 
00008A 0010           00322          retfie
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00323          
                      00324          
                      00325          
00008C                00326 wykryto_t1
                      00327 
                      00328                                                       ;Procedury obslugi czasu
00008C 909E           00329       bcf      PIR1,TMR1IF
                      00330       
                      00331       
                      00332          ;czy minelo 16 sekund
00008E 83A0           00333       bsf      markers2,przerwanie_t1   
                      00334          
000090 0E10           00335       movlw jak_duzo_zliczen_tmr1_na_sekunde
000092 19E2           00336       xorwf do_sekundy,w
                      00337 ;jezeli    nie  0 w wyniku to skok do procedury 
000094 E13D           00338       bnz   wykryto_t1_wyjscie      
                      00339 ;jezeli 0 to zwiększ sekunda o 1      
                      00340       
000096 6BE2           00341       clrf  do_sekundy
000098 2BE1           00342       incf  sekundy_1,f
                      00343            
                      00344 ;sprawdz czy cyfra jednosci nie przekroczyla 9 sekund
00009A 0E3A           00345       movlw 0x3a
00009C 19E1           00346       xorwf sekundy_1,w
00009E E134           00347       bnz   ustaw_wyswietlanie_czasu_na_lcd
                      00348 ;czyszcze    liczbe jednosci i zwiekszam o jeden liczbe 
0000A0 0E30           00349       movlw 0x30
0000A2 6FE1           00350       movwf  sekundy_1
0000A4 2BE0           00351       incf  sekundy_10,f
                      00352       
0000A6 0E36           00353       movlw 0x36
0000A8 19E0           00354       xorwf sekundy_10,w
0000AA E12E           00355       bnz   ustaw_wyswietlanie_czasu_na_lcd
0000AC 0E30           00356       movlw 0x30
0000AE 6FE0           00357       movwf  sekundy_10
                      00358       
0000B0 2BDF           00359       incf  minuty_1,f
                      00360 ;sprawdzam czy nie przekroczylem  
                      00361       
0000B2 0E3A           00362       movlw 0x3a
0000B4 19DF           00363       xorwf minuty_1,w
                      00364       
0000B6 E128           00365       bnz   ustaw_wyswietlanie_czasu_na_lcd
0000B8 0E30           00366       movlw 0x30
0000BA 6FDF           00367       movwf minuty_1
0000BC 2BDE           00368       incf  minuty_10,f
                      00369       
0000BE 0E36           00370       movlw 0x36
0000C0 19DE           00371       xorwf minuty_10,w
0000C2 E122           00372       bnz   ustaw_wyswietlanie_czasu_na_lcd
0000C4 0E30           00373       movlw 0x30
0000C6 6FDE           00374       movwf minuty_10
                      00375                                           ;godziny      
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000C8 2BDD           00376       incf  godziny_1,f
                      00377 ;sprawdz czy jezeli jest 4 czy nie ma 2 na godziny_10
0000CA 0E34           00378       movlw       0x34
0000CC 63DD           00379       cpfseq      godziny_1
0000CE EF7E F000      00380       goto        sprawdz_godziny
0000D2 0E32           00381       movlw       0x32
0000D4 63DC           00382       cpfseq      godziny_10
0000D6 EF7E F000      00383       goto        sprawdz_godziny
0000DA 0E30           00384       movlw       0x30
0000DC 6FDC           00385       movwf godziny_10
0000DE 6FDD           00386       movwf godziny_1
0000E0 2BDB           00387       incf  dzien_1,f
                      00388       
                      00389             
0000E2                00390 sprawdz_dzien
0000E2 0E3A           00391       movlw 0x3a
0000E4 19DB           00392       xorwf dzien_1,w
0000E6 E110           00393       bnz   ustaw_wyswietlanie_czasu_na_lcd
0000E8 0E30           00394       movlw 0x30
0000EA 6FDB           00395       movwf  dzien_1
0000EC 2BDA           00396       incf  dzien_10,f
                      00397       
0000EE 0E3A           00398       movlw 0x3a
0000F0 19DC           00399       xorwf godziny_10,w
0000F2 E10A           00400       bnz   ustaw_wyswietlanie_czasu_na_lcd
0000F4 0E30           00401       movlw 0x30
0000F6 6FDA           00402       movwf dzien_10
                      00403       
0000F8 EF84 F000      00404       goto  ustaw_wyswietlanie_czasu_na_lcd
0000FC                00405 sprawdz_godziny      
0000FC 0E3A           00406       movlw 0x3a
0000FE 19DD           00407       xorwf godziny_1,w
000100 E103           00408       bnz   ustaw_wyswietlanie_czasu_na_lcd
000102 0E30           00409       movlw 0x30
000104 6FDD           00410       movwf godziny_1
000106 2BDC           00411       incf  godziny_10,f
                      00412       
                      00413       
                      00414       
                      00415 
                      00416 
000108                00417 ustaw_wyswietlanie_czasu_na_lcd
                      00418       ;czy system obsluguje zegar, bo nie musi i nie powinien przy bardzo częstym pomiarze i wysyłaniu
                             danych
                      00419       ;czyli co 1/16
                      00420       
000108 A5A1           00421       btfss markers3,czy_zegar_wyswietlac
00010A EF88 F000      00422       goto  wykryto_t1_wyjscie 
                      00423       
                      00424       ;a jezeli ma odswiezyc wszystkie znaki:
00010E 87A1           00425       bsf   markers3,odswiezanie_zegara
                      00426       
                      00427       ;jezeli mam odswiezyc zegar to wylaczam na chwilke pomiary i dopiero po wyswietleniu 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00428       ;sprawdz czy byly wlaczone pomiary
                      00429       ;btfss       markers2,pomiary
                      00430       ;goto        wykryto_t1_wyjscie 
                      00431       
                      00432       
                      00433       ;bsf   markers,pomiary_zrobione
                      00434       ;i zaznacz zeby je jeszcze raz wlaczyl po wyswietleniu czasu
                      00435       ;bsf   markers,czy_wlaczyc_ponownie_temp
                      00436       
                      00437       
                      00438       
000110                00439 wykryto_t1_wyjscie  
000110 2BE2           00440       incf     do_sekundy,f
                      00441       
000112 EF38 F000      00442       goto     wyjscie_przerwanie                  
                      00443          
000116                00444 wykryto_rb
                      00445 ;wlaczam przerwanie tmr2 i ustawiam przy pomocy TMR2 na 100us tzn 
                      00446 ;
                      00447 ;
                      00448          
000116 90F2           00449          bcf      INTCON,RBIF
                      00450          
                      00451 ;        btfsc    markers2,odbior
                      00452 ;        goto     wyjscie_przerwanie
                      00453          
000118 BE81           00454          btfsc    port_serial,RXD
00011A EF38 F000      00455          goto     wyjscie_przerwanie         
                      00456 ;        btfsc    bit,7
                      00457 ;        goto     wylaczam_odbior
                      00458 ;        bsf      markers2,poczatkowy_bit
                      00459          
00011E EF38 F000      00460          goto     wyjscie_przerwanie
                      00461 
000122                00462 wykryto_t0
                      00463 ;uzywam do wykrywania czy juz zrobic pomiar
Warning[205]: Found directive in column 1. (IF)
                      00464 IF (procek == 18f442)
                      00465          bcf      INTCON,T0IF
                      00466          bcf      INTCON,T0IE
                      00467          
                      00468 ENDIF
                      00469 
Warning[205]: Found directive in column 1. (IF)
                      00470 IF (procek == 18f4320)
000122 94F2           00471          bcf      INTCON,TMR0IF
000124 9AF2           00472          bcf      INTCON,TMR0IE
                      00473          
Warning[205]: Found directive in column 1. (ENDIF)
                      00474 ENDIF
                      00475          
000126 82C2           00476          bsf      ADCON0,GO 
                      00477          ;clrf     pomiarH
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00478          ;clrf     pomiarL
                      00479          ;clrf     pomiar_ulamek        
000128 EF38 F000      00480          goto     wyjscie_przerwanie
                      00481          
00012C                00482 wykryto_t2
                      00483 ;uzywam do odmierzania czasu dla DS1820
                      00484 ;1 - 
                      00485 ;oczekuje kolejne max 480 us. jezeli po tym czasie nie wystapi jeden to napisz blad
                      00486 
                      00487 ;
                      00488 
                      00489 ;
00012C 929E           00490          bcf      PIR1,TMR2IF
                      00491          
                      00492 ;jezeli tesuje czas     
                      00493 ;          bcf     PORTC,2         
                      00494          ;bsf      STATUS,RP0
00012E 929D           00495          bcf     PIE1,TMR2IE
                      00496          ;bcf      STATUS,RP0
000130 94CA           00497          bcf      T2CON,TMR2ON
                      00498              
                      00499          
                      00500          
                      00501 ;        btfss    markers2,
                      00502 ;        goto     wyjscie_przerwanie
                      00503          
                      00504 ;        bsf      markers2,odbierz_bit
                      00505         
                      00506 
000132                00507 wykryto_odbior
                      00508 ;        btfsc    odebrano_liter,4
                      00509          ;call     miganie
                      00510 ;czytanie rcsta go kasuje
000132                00511 wykryto_odbior_odczyt
                      00512 ;jezeli mam ustawione na ekran to nic nie odbieraj    
000132 B7A0           00513          btfsc    markers2,sprawdz_odebrane
000134 EF38 F000      00514          goto     wyjscie_przerwanie
                      00515 ;wylacz inne przerwania
                      00516 ;        bsf      STATUS,RP0
                      00517 ;        bcf      PIE1,TMR1IE
                      00518 ;        bcf      STATUS,RP0
                      00519          
                      00520 ;          bcf      markers2,blad_transmisji
                      00521 ;czy jest framing error
000138 B4AB           00522          btfsc    RCSTA,FERR
00013A EFC2 F000      00523          goto     wykryto_blad
                      00524 ;        bsf      markers2,blad_transmisji
                      00525          
00013E B2AB           00526          btfsc    RCSTA,OERR
000140 EFBD F000      00527          goto     wykryto_oerr
                      00528          
                      00529          
000144 518D           00530          movf     odebrano_liter,w
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000146 0F00           00531          addlw    dane_odebraneL
000148 6EE9           00532          movwf    FSR0L
00014A 0E01           00533          movlw    dane_odebraneH
00014C 6EEA           00534          movwf    FSR0H
                      00535          
00014E 50AE           00536          movf     RCREG,w
000150 6EEF           00537          movwf    INDF0
                      00538 ;jezeli blad transmisji to nie zapamietuj         
                      00539 ;          btfsc    markers2,blad_transmisji
                      00540 ;          goto     wykryto_odbior_odczyt_dalej  
                      00541 ;                    
                      00542          
                      00543          
                      00544          
000152 0E0A           00545          movlw    0x0a
000154 18EF           00546          xorwf    INDF0,w
000156 B4D8           00547          btfsc    STATUS,Z
000158 EFB1 F000      00548          goto     wykryto_odbior_CR
                      00549          
                      00550 ;        movlw    0x0a
                      00551 ;        xorwf    INDF0,w
                      00552 ;        btfss    STATUS,Z
00015C 2B8D           00553         incf     odebrano_liter,f
                      00554          
00015E EF38 F000      00555          goto     wyjscie_przerwanie
                      00556 ;        goto     wykryto_odbior_wyjscie
                      00557 ;        
                      00558          
                      00559 ;        movlw    0x0A
                      00560 ;        xorwf    INDF0,w
                      00561 ;        btfss    STATUS,Z
                      00562 ;        goto     wykryto_odbior_wyjscie
                      00563          
                      00564                   
000162                00565 wykryto_odbior_CR 
                      00566 ;sprawdz czy pierwszym znakiem jest *
                      00567          
000162 87A0           00568          bsf      markers2,sprawdz_odebrane
                      00569 ;        clrf     odebrano_liter
                      00570 ;        movf     RCREG,w
                      00571 ;        movwf    INDF0
                      00572 ;        
                      00573 ;        czysc dwa bwyswietlajty na zero -> znacznik konca wyswietlania         
                      00574 ;        
                      00575          
000164 0E0D           00576         movlw     0x0d
000166 6EEF           00577          movwf    INDF0
                      00578           
000168 2AE9           00579         incf    FSR0L,f
00016A 6EEF           00580         movwf    INDF0
00016C 2AE9           00581         incf    FSR0L,f
00016E 6AEF           00582         clrf     INDF0
000170 2AE9           00583          incf    FSR0L,f
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000172 6AEF           00584         clrf     INDF0
                      00585 ;wylaczam szeregowy odbior
000174 98AB           00586          bcf      RCSTA,CREN        
                      00587 
000176                00588 przerwanie_wysylania       
000176 EF38 F000      00589          goto     wyjscie_przerwanie
                      00590 
00017A                00591 wykryto_oerr      
00017A 98AB           00592          bcf      RCSTA,CREN        
00017C 0000           00593          nop
00017E 88AB           00594          bsf      RCSTA,CREN
                      00595                                     
000180 EF38 F000      00596          goto     wyjscie_przerwanie
000184                00597 wykryto_blad
000184 50AE           00598          movf     RCREG,w
000186 EF38 F000      00599          goto     wyjscie_przerwanie
                      00600 
00018A                00601 przerwanie_pomiaru
00018A 9C9E           00602          bcf      PIR1,ADIF
                      00603 ;kopiuje pomiar do rejestru
                      00604 ;sprawdz czy ustawiono 1 lub 0 - wtedy nic nie dziele 
                      00605          
00018C 0E9B           00606          movlw    wynikh
00018E A19F           00607          btfss    markers,czy_usrednianie
000190 0EAB           00608          movlw    pomiarH
                      00609 ;        addwf    ktory_rejestr_zapisuje,w
000192 6EE1           00610          movwf    FSR1L
000194 6AE2           00611          clrf     FSR1H
                      00612          
000196 50C4           00613          movf     ADRESH,w
000198 6EE7           00614          movwf    INDF1
00019A 2AE1           00615          incf     FSR1L,f
                      00616 
00019C 50C3           00617          movf     ADRESL,w
                      00618 
00019E 6EE7           00619          movwf    INDF1
0001A0 89A0           00620          bsf      markers2,wyslij_pomiar
                      00621 ;nastepnym razem zapisze do kolejnego rejestru        
                      00622 ;        incf     ktory_rejestr_zapisuje,f
0001A2 EF38 F000      00623          goto     wyjscie_przerwanie
                      00624    
                      00625 
0001A6                00626 wykryto_t3
                      00627 
0001A6 92A1           00628       bcf   PIR2,TMR3IF
                      00629       ;sprawdzam czy klawisz jest dalej wcisniety
                      00630       
                      00631       ;robie and z zawartoscia stan_key
                      00632       ;jezeli jest w wyniku 0 (tzn ze klawisz wciaz jest trzymany
                      00633       ;np dla klawisza back stan latch_keys:  xxxx1110 - jezeli wcisniety 
                      00634       ;                                      stan_keys          xxxx001  
                      00635       ;w wyniku 0 chyba że klawisz puszczono i jest 1
0001A8 5199           00636       movf        stan_key,w
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0001AA 1483           00637       andwf       latch_keys,w
                      00638 ;tzn ze wciaz przycisk jest wcisniety
                      00639       ;i nic nie robie czyli wychodze
0001AC B4D8           00640       btfsc       STATUS,Z
0001AE EFDF F000      00641       goto         wykryto_t3_nie_puszczono
                      00642       
                      00643       ;natomiast jezeli wyszlo 1 to sprawdz ktory przycisk zostal puszczony  
                      00644       ;i wymus sprawdzenie i dalsze podprogramy zwiazane z danym klawiszem
0001B2 99A1           00645       bcf         markers3,wcisnieto_klawisz
0001B4 9F9F           00646       bcf         markers,trzymanie_klawisza
0001B6 959E           00647       bcf         znaczniki,czy_moge_juz_zmieniac
                      00648       
                      00649       ;wylacz przerwanie tmr3
0001B8 8BA1           00650       bsf         markers3,dzialanie_po_klawiszu
0001BA EF38 F000      00651       goto        wyjscie_przerwanie
                      00652       
0001BE                00653 wykryto_t3_nie_puszczono
                      00654 ;jeżeli zaznaczony jest bit trzymanie_klawisza to pozwól na szybką zmianę wartości w trakcie 
                      00655 ;trzymania przycisku
                      00656 
                      00657 ;jeżeli już zaznaczono ze moge zmieniac to nie sprawdzaj miniecia sekundy
0001BE B59E           00658       btfsc       znaczniki,czy_moge_juz_zmieniac
0001C0 EF38 F000      00659       goto        wyjscie_przerwanie
                      00660 
0001C4 AF9F           00661       btfss       markers,trzymanie_klawisza
0001C6 EF38 F000      00662       goto        wyjscie_przerwanie
                      00663 ;szybka zmiana dopiero po sekundzie - czyli dwa zliczenia
0001CA 2FE6           00664       decfsz      szybka_zmiana_wartosci,f
0001CC EF38 F000      00665       goto        wyjscie_przerwanie
                      00666 
0001D0 0E01           00667       movlw       1
0001D2 6FE6           00668       movwf       szybka_zmiana_wartosci
                      00669 ;jeżeli już jest 0 to pozwól na zmianę       
0001D4 859E           00670       bsf         znaczniki,czy_moge_juz_zmieniac
0001D6 EF38 F000      00671       goto        wyjscie_przerwanie
                      00672       
                      00673 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;       
                                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;KOniec Przerwan   
                      00674 ;;;;;;;;;;;;;;;;;;;;;;;;
                      00675 ;;;PROGRAM
                      00676 ;;;;;;;;;;;;;;;;;;;;;;;;;
Warning[205]: Found directive in column 1. (include)
                      00677 include  "../libs/lcd.h"
                      00001  ;;ten dokument zawiera definicje wszystkich funkcji
                      00002 ;;uytych do wywietlania danych na LCD
                      00003 ;;wywietlanie 8 bitowe
                      00004 
                      00005 ;def lcd
                      00006 ;cay port RB0-RB7 uyty jako dane do LCD
                      00007 ;init
                      00008 ;to idzie na port zwizany z danymi
                      00009 
                      00010 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00011 
  00000030            00012 init_8bit       equ     b'00110000'
  0000003C            00013 set_8bit        equ     b'00111100' ; 8bit, 2 linie,font 5x8
  00000008            00014 function_set2   equ     b'00001000' ;ustawia 2 linie i 5x8 font
                      00015 ;init_4bit          equ      b'00100010' ;ustawia 2 linie i 5x8 font
                      00016 
  00000008            00017 display_off     equ     b'00001000' ;ustawia blinking,cursor,
  00000006            00018 entry           equ     b'00000110' ;increment
  00000080            00019 dd_addres_set   equ     b'10000000' ;od rb6 do rb0 wstawi�adres
                      00020 
  00000001            00021 display_clear   equ     b'00000001'
  0000000C            00022 display_on      equ     b'00001100';bez kursora
  0000000F            00023 display_2       equ     b'00001111'
  00000010            00024 write_4bit      equ     b'00010000' ;pisz na ekranie
  00000040            00025 write           equ     b'01000000' ;zacz rd6 - rs
                      00026 
  00000002            00027 disp_home       equ     b'00000010'
                      00028 
                      00029 
                      00030 ;;dla 4bit�
  00000003            00031 function_set1_4b        equ     b'00000011' ;- ustawia 4 bit
  00000008            00032 function_set2_4b        equ     b'00001000' ;ustawia 2 linie i 5x8 font
  00000000            00033 display1_4b     equ     b'00000000'
  0000000F            00034 display2_4b     equ     b'00001111' ;ustawia blinking,cursor,
  00000000            00035 entry1_4b               equ     b'00000000'
  0000000C            00036 entry2_4b               equ     b'00001100' ;increment
  00000000            00037 display_clear1_4b       equ     b'00000000'
  00000001            00038 display_clear2_4b       equ     b'00000001'
                      00039 
                      00040 
  00000030            00041 _0              equ     b'00110000'
  00000031            00042 _1              equ     b'00110001'
  00000032            00043 _2              equ     b'00110010'
  00000033            00044 _3              equ     b'00110011'
  00000034            00045 _4              equ     b'00110100'
  00000035            00046 _5              equ     b'00110101'
  00000036            00047 _6              equ     b'00110110'
  00000037            00048 _7              equ     b'00110111'
  00000038            00049 _8              equ     b'00111000'
  00000039            00050 _9              equ     b'00111001'
  0000003A            00051 _dwukropek      equ     b'00111010'
  00000020            00052 _puste          equ     b'00100000'
  0000002E            00053 _kropka         equ     b'00101110'
  000000DF            00054 _stopni         equ     b'11011111'
  0000002D            00055 _minus          equ     0x2d
  0000002B            00056 _plus           equ     0x2b
  00000041            00057 _A              equ     b'01000001'
  00000042            00058 _B              equ     b'01000010'
  00000043            00059 _C              equ     b'01000011'
  00000044            00060 _D              equ     b'01000100'
  00000045            00061 _E              equ     b'01000101'
  00000046            00062 _F              equ     b'01000110'
  00000047            00063 _G              equ     b'01000111'
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000048            00064 _H              equ     b'01001000'
  00000049            00065 _I              equ     b'01001001'
  0000004A            00066 _J              equ     b'01001010'
  0000004B            00067 _K              equ     b'01001011'
  0000004C            00068 _L              equ     b'01001100'
  0000004D            00069 _M              equ     b'01001101'
  0000004E            00070 _N              equ     b'01001110'
  0000004F            00071 _O              equ     b'01001111'
  00000050            00072 _P              equ     b'01010000'
  00000051            00073 _Q              equ     b'01010001'
  00000052            00074 _R              equ     b'01010010'
  00000053            00075 _S              equ     b'01010011'
  00000054            00076 _T              equ     b'01010100'
  00000055            00077 _U              equ     b'01010101'
  00000056            00078 _V              equ     b'01010110'
  00000057            00079 _W              equ     b'01010111'
  00000058            00080 _X              equ     b'01011000'
  00000059            00081 _Y              equ     b'01011001'
  0000005A            00082 _Z              equ     b'01011010'
                      00083 
  00000061            00084 _a              equ     b'01100001'
  00000062            00085 _b              equ     b'01100010'
  00000063            00086 _c              equ     b'01100011'
  00000064            00087 _d              equ     b'01100100'
  00000065            00088 _e              equ     b'01100101'
  00000066            00089 _f              equ     b'01100110'
  00000067            00090 _g              equ     b'01100111'
  00000068            00091 _h              equ     b'01101000'
  00000069            00092 _i              equ     b'01101001'
  0000006A            00093 _j              equ     b'01101010'
  0000006B            00094 _k              equ     b'01101011'
  0000006C            00095 _l              equ     b'01101100'
  0000006D            00096 _m              equ     b'01101101'
  0000006E            00097 _n              equ     b'01101110'
  0000006F            00098 _o              equ     b'01101111'
  00000070            00099 _p              equ     b'01110000'
  00000071            00100 _q              equ     b'01110001'
  00000072            00101 _r              equ     b'01110010'
  00000073            00102 _s              equ     b'01110011'
  00000074            00103 _t              equ     b'01110100'
  00000075            00104 _u              equ     b'01110101'
  00000076            00105 _v              equ     b'01110110'
  00000077            00106 _w              equ     b'01110111'
  00000078            00107 _x              equ     b'01111000'
  00000079            00108 _y              equ     b'01111001'
  0000007A            00109 _z              equ     b'01111010'
                      00110 
  0000002A            00111 _star           equ     0x2a
  0000005E            00112 _up             equ     b'01011110'
  0000002C            00113 _przecinek      equ     0x2c
  0000003C            00114 _mniejszosci      equ      0x3c
  0000003E            00115 _wiekszosci       equ      0x3e
  0000007C            00116 _linia_pionowa    equ         0x7c
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00117 
                      00118 
  00000080            00119 linia_pierwsza  equ     0x80
  00000080            00120 linia_gorna     equ     0x80
                      00121 
  000000C0            00122 linia_dolna     equ     0xc0
  000000C0            00123 linia_druga     equ     0xc0
                      00124 
  00000090            00125 linia_trzecia   equ     0x90
  000000D0            00126 linia_czwarta   equ     0xd0
                      00127 ;
                      00128 
                      00678 
Warning[205]: Found directive in column 1. (include)
                      00679 include  "../libs/lcd4bit18.asm"
                      00001 ;wersja 2007-12-07
                      00002 ;dla prockow serji 18fxxx
                      00003 ;do odczekania 64ms uzywam komendy cpfsgt
                      00004 ;zmienne
                      00005 ;ktore_bity_uzywane_na_lcd - ktore porty ekranu sa uzywane jako dane
                      00006 ;ktore_bity_lcd_tris   - definiuje ktore bity maja byc zamieniane na wejscie podczas check busy
                      00007 ;tris_lcd   -definiuje ktory tris wplywa na tris lcd
                      00008 ;set_4bit   - ustawienia dla lcd
                      00009 ;tmp_lcd - tymczasowa zmienna uywana tylko w procedurach lcd
                      00010 
0001DA                00011 wait
                      00012          
                      00013         ;bsf      portlampka,lampka              
Warning[205]: Found directive in column 1. (IF)
                      00014 IF (procek == 18f442)
                      00015         bcf     INTCON,T0IF
                      00016 wait_petla                   
                      00017         btfss   INTCON,T0IF      
                      00018         goto    wait_petla
                      00019         bcf     INTCON,T0IF            
                      00020 ENDIF
                      00021 
Warning[205]: Found directive in column 1. (IF)
                      00022 IF (procek == 18f4320)
0001DA 94F2           00023          bcf     INTCON,TMR0IF
0001DC                00024 wait_petla         
0001DC A4F2           00025         btfss   INTCON,TMR0IF      
0001DE EFEE F000      00026         goto    wait_petla
0001E2 94F2           00027         bcf     INTCON,TMR0IF
0001E4 9AF2           00028         bcf      INTCON,TMR0IE
                      00029               
Warning[205]: Found directive in column 1. (ENDIF)
                      00030 ENDIF        
                      00031         ;bcf      portlampka,lampka              
0001E6 0012           00032         return
                      00033         
                      00034          
                      00035 ;funkcja wysy?aj?ca 4 bitowa
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00036 ;LCD
                      00037 ;;;;;;;;;;;;;;;;;;;;;;;;;
                      00038 
0001E8                00039 send
                      00040 ;np PORTA bity 0-3  sa uzywane przez 4 bitowy ekran lcd
                      00041 ;najpierw wysylane sa 4bity gorne
0001E8 6FA3           00042          movwf    dane_lcd
0001EA 0E02           00043          movlw    2
0001EC 6FA4           00044          movwf    tmp_lcd
0001EE                00045 send4bit_petla
                      00046          
                      00047 ;przenosze PORTA tak aby gorne bity nieulegly zmianie
0001EE 0E0F           00048          movlw    ktore_bity_uzywane_na_lcd
0001F0 168C           00049          andwf    latch_lcd,f
                      00050                           
Warning[205]: Found directive in column 1. (IF)
                      00051 IF (polozenie_danych_lcd == 0)        
                      00052 ;jesli na gorze bitow port d
                      00053          
                      00054          swapf    dane_lcd,f
                      00055 ENDIF
                      00056 
                      00057          
0001F2 0EF0           00058          movlw    ktore_bity_lcd_tris
0001F4 15A3           00059          andwf    dane_lcd,w
0001F6 268C           00060          addwf    latch_lcd,f
                      00061          
0001F8 8682           00062          bsf      port_lcd_e,enable
0001FA 0000           00063          nop
0001FC 0000           00064          nop
0001FE 9682           00065          bcf      port_lcd_e,enable
Warning[205]: Found directive in column 1. (IF)
                      00066 IF (polozenie_danych_lcd == 1)        
                      00067 ;jesli na gorze bitow port d
                      00068          
000200 3BA3           00069          swapf    dane_lcd,f
Warning[205]: Found directive in column 1. (ENDIF)
                      00070 ENDIF
                      00071             
000202 2FA4           00072          decfsz   tmp_lcd,f
000204 EFF7 F000      00073          goto     send4bit_petla
000208 0012           00074          return
                      00075          ;movwf    latch_lcd
                      00076          
                      00077          
                      00078 ;funkcja pisz?ca na ekranie
00020A                00079 write_lcd
                      00080 
                      00081          
00020A 868A           00082          bsf      latch_lcd_rs,rs
                      00083          ;bsf      PORTB,rs
                      00084          
00020C ECF4 F000      00085          call     send
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00086          
000210 968A           00087          bcf      latch_lcd_rs,rs    
                      00088          ;bcf      PORTB,rs
000212 0012           00089          return
                      00090 
                      00091 ;funkcja czyszcz?ca ekran
                      00092 
                      00093 ;funkcja czyszcz?ca ekran
                      00094 
000214                00095 cmd_off
                      00096 
                      00097          
000214 968A           00098          bcf      latch_lcd_rs,rs
                      00099          
                      00100          
000216 0012           00101         return
                      00102          
                      00103 
                      00104 
                      00105 ;funkcja czysci cala linie
                      00106 ; przed jej wywolaniem w W umi#1esc adres linii
                      00107 ;po zakonczeniu z powrotem w niej umieszcza adres
                      00108 ;stara wersja - dziala na cala linie
                      00109 
000218                00110 clear_line_old
000218 6F8B           00111          movwf    n
00021A 9681           00112          bcf      port_lcd_rs,rs
                      00113          
00021C 518B           00114          movf     n,w
00021E 6FA3           00115          movwf    dane_lcd
000220 ECF4 F000      00116          call     send
000224 0E10           00117          movlw    ile_znakow
000226 6F95           00118          movwf    tmp7
000228 0FFF           00119          addlw    0xff
00022A 6FA4           00120          movwf    tmp_lcd
00022C                00121 clear_line_old2
00022C EC32 F001      00122          call     check_busy
000230 0E20           00123          movlw    _puste
000232 6FA3           00124          movwf    dane_lcd
000234 EC05 F001      00125          call     write_lcd
                      00126          
000238 2F95           00127          decfsz   tmp7,f
00023A EF16 F001      00128          goto     clear_line_old2
                      00129          
00023E EC0A F001      00130          call     cmd_off
000242 518B           00131          movf     n,w
000244 0012           00132          return
                      00133          
000246                00134 clear_line
                      00135 ;przed wywolaniem do n trzeba wrzucic ilosc kasowanych znakow
                      00136 ;a w W musi byc adres linii         
000246 6FA3           00137          movwf    dane_lcd
000248 ECF4 F000      00138          call     send
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00139          
00024C                00140 clear_line_petla
00024C EC32 F001      00141          call     check_busy
000250 0E20           00142          movlw    _puste
000252 6FA3           00143          movwf    dane_lcd
000254 EC05 F001      00144          call     write_lcd
                      00145          
000258 2F8B           00146          decfsz   n,f
00025A EF26 F001      00147          goto     clear_line_petla
                      00148          
00025E EC0A F001      00149          call     cmd_off
                      00150         
000262 0012           00151          return
                      00152 
                      00153          
                      00154          
000264                00155 check_busy
                      00156 
Warning[205]: Found directive in column 1. (IF)
                      00157 IF (polozenie_danych_lcd == 1)        
                      00158 ;jesli na gorze bitow port d
000264 0E0F           00159          movlw    0x0f
                      00160          
000266 168C           00161          andwf    latch_lcd,f
Warning[205]: Found directive in column 1. (ENDIF)
                      00162 ENDIF
                      00163 
Warning[205]: Found directive in column 1. (IF)
                      00164 IF (polozenie_danych_lcd == 0)        
                      00165 ;jesli w dolnej polowce  bajtu rejestru  portd
                      00166          movlw    0xf0
                      00167          
                      00168          andwf    latch_lcd,f
                      00169 ENDIF
                      00170          
                      00171          ;clrf     port_lcd
                      00172          ;clrf     PORTD
                      00173 ;przesylam dane np tris 00000001
                      00174 ;chce zrobic tak by bylo 
                      00175 ;  11110001
                      00176        
000268 5095           00177          movf     tris_lcd,w
00026A 09F0           00178          iorlw    ktore_bity_lcd_tris
00026C 6E95           00179          movwf    tris_lcd    
                      00180          
                      00181       
                      00182          
                      00183          
                      00184                   
00026E 848A           00185          bsf      latch_lcd_rw,rw
000270 968A           00186          bcf      latch_lcd_rs,rs
                      00187 
000272                00188 check
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00189          
000272 868B           00190          bsf      latch_lcd_e,enable
                      00191          
                      00192  IF (polozenie_danych_lcd == 0) 
                      00193 ;jezli dolne bity portud 
                      00194          swapf    port_lcd,w
                      00195 ENDIF
                      00196             
Warning[205]: Found directive in column 1. (IF)
                      00197 IF (polozenie_danych_lcd == 1)        
                      00198 ;jesli na gorze bitow port d
                      00199             
000274 5083           00200          movf    port_lcd,w
Warning[205]: Found directive in column 1. (ENDIF)
                      00201 ENDIF
000276 0BF0           00202          andlw    0xf0
                      00203          
000278 6FA4           00204          movwf    tmp_lcd
                      00205          
00027A 968B           00206          bcf      latch_lcd_e,enable
                      00207             
00027C 0000           00208          nop 
                      00209          
00027E 868B           00210          bsf      latch_lcd_e,enable
                      00211          
Warning[205]: Found directive in column 1. (IF)
                      00212 IF (polozenie_danych_lcd == 1) 
                      00213 ;jesli na gorze bitow port d
000280 3883           00214          swapf    port_lcd,w
Warning[205]: Found directive in column 1. (ENDIF)
                      00215 ENDIF
                      00216             
Warning[205]: Found directive in column 1. (IF)
                      00217 IF (polozenie_danych_lcd == 0)        
                      00218 
                      00219             
                      00220          movf    port_lcd,w
                      00221 ENDIF         
                      00222      
000282 0B0F           00223          andlw    0x0f
                      00224          
000284 27A4           00225          addwf    tmp_lcd,f
                      00226          
000286 968B           00227          bcf      latch_lcd_e,enable    
                      00228             
000288 BFA4           00229          btfsc    tmp_lcd,7
00028A EF39 F001      00230          goto     check
                      00231          
00028E 0E0F           00232          movlw   normalne_ustawienie_tris_lcd
000290 6E95           00233          movwf    tris_lcd
                      00234          
                      00235          
000292 948A           00236          bcf      latch_lcd_rw,rw
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000294 968A           00237          bcf      latch_lcd_rs,rs
000296 0012           00238          return
                      00239 
                      00240 
                      00241 
                      00242 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                           
                      00243 ;poczatek dzialania 4 bitowego ekranu
                      00244 
000298                00245 lcd_init
000298 EC0A F001      00246          call     cmd_off
                      00247          
Warning[205]: Found directive in column 1. (IF)
                      00248 IF (polozenie_danych_lcd == 1)        
                      00249 ;jesli na gorze bitow port d
00029C 0E0F           00250          movlw    0x0f         
00029E 168C           00251          andwf    latch_lcd,f
Warning[205]: Found directive in column 1. (ENDIF)
                      00252 ENDIF
                      00253 
Warning[205]: Found directive in column 1. (IF)
                      00254 IF (polozenie_danych_lcd == 0)        
                      00255 ;jesli w dolnej polowce  bajtu rejestru  portd
                      00256          movlw    0xf0         
                      00257          andwf    latch_lcd,f
                      00258 ENDIF
                      00259 
                      00260 
0002A0 948A           00261          bcf      latch_lcd_rw,rw
0002A2 968B           00262          bcf      latch_lcd_e,enable
                      00263 ;wylaczam przerwanie         
                      00264         
0002A4 6AD6           00265          clrf     TMR0L
Warning[205]: Found directive in column 1. (IF)
                      00266 IF (procek == 18f442)
                      00267          bcf      INTCON,T0IE
                      00268          
                      00269 ENDIF
Warning[205]: Found directive in column 1. (IF)
                      00270 IF (procek == 18f4320)
0002A6 9AF2           00271          bcf      INTCON,TMR0IE
                      00272          
                      00273          
Warning[205]: Found directive in column 1. (ENDIF)
                      00274 ENDIF         
                      00275          
                      00276 ;wylaczam przerwania tmr0         
                      00277         
0002A8 ECED F000      00278          call     wait     ;64ms
                      00279 
0002AC 0E2A           00280          movlw    init_4bit
0002AE 0BF0           00281          andlw    ktore_bity_lcd_tris
                      00282 ;teraz w W mam postac 0011 w tym nibbles ktory jest port lcd , jezeli gorne to 00110000
0002B0 128C           00283          iorwf    latch_lcd,f
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00284          
0002B2 868B           00285          bsf     latch_lcd_e,enable
0002B4 0000           00286          nop
0002B6 968B           00287          bcf     latch_lcd_e,enable
                      00288          ;call     send    ;zalaczam
0002B8 6AD6           00289          clrf     TMR0L ;64 ms
0002BA ECED F000      00290          call     wait
                      00291          
0002BE 0E2A           00292          movlw    init_4bit
0002C0 0BF0           00293          andlw    ktore_bity_lcd_tris
                      00294 ;teraz w W mam postac 0011 w tym nibbles ktory jest port lcd , jezeli gorne to 00110000
0002C2 128C           00295          iorwf    latch_lcd,f
                      00296          
0002C4 868B           00297          bsf     latch_lcd_e,enable
0002C6 0000           00298          nop
0002C8 968B           00299          bcf     latch_lcd_e,enable
                      00300          ;call     send    ;zalaczam
0002CA 6AD6           00301          clrf     TMR0L ;64 ms
0002CC ECED F000      00302          call     wait
                      00303          
0002D0 0E2A           00304          movlw    init_4bit
0002D2 0BF0           00305          andlw    ktore_bity_lcd_tris
                      00306 ;teraz w W mam postac 0011 w tym nibbles ktory jest port lcd , jezeli gorne to 00110000
0002D4 128C           00307          iorwf    latch_lcd,f
                      00308          
0002D6 868B           00309          bsf     latch_lcd_e,enable
0002D8 0000           00310          nop
0002DA 968B           00311          bcf     latch_lcd_e,enable
                      00312          ;call     send    ;zalaczam
0002DC 6AD6           00313          clrf     TMR0L ;64 ms
0002DE ECED F000      00314          call     wait
                      00315          
0002E2 0E28           00316          movlw    set_4bit
0002E4 ECF4 F000      00317          call     send
                      00318          
0002E8 EC32 F001      00319          call     check_busy
                      00320          
0002EC 0E01           00321          movlw    display_clear
                      00322          ;movwf    port_lcd,ACCESS
0002EE ECF4 F000      00323          call     send
0002F2 EC32 F001      00324          call     check_busy
                      00325          
0002F6 0E0C           00326          movlw   display_on
                      00327          ;movwf    port_lcd,ACCESS
0002F8 ECF4 F000      00328          call     send
                      00329          
                      00330          ;clrf   TMR0L;64 ms
                      00331          ;call     wait
0002FC EC32 F001      00332          call     check_busy
                      00333          
                      00334         
                      00335         ;clrf   TMR0L;64 ms
                      00336          ;call     wait
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00337 
                      00338          ;call    check_busy
000300 0E06           00339          movlw   entry
                      00340         ;movwf   port_lcd,ACCESS
000302 ECF4 F000      00341         call    send
000306 EC32 F001      00342         call     check_busy
00030A 0012           00343         return
                      00680 
                      00681 ;include  "../../libs/dziel_przez2_18.asm"
                      00682 
Warning[205]: Found directive in column 1. (include)
                      00683 include  "../libs/eeprom18.asm"
00030C                00001 czytaj_eeprom
                      00002 
                      00003        
                      00004 ;IF procek==1         
00030C 6EA9           00005          movwf    EEADR
                      00006 ;ENDIF         
                      00007 ;IF procek==2
                      00008  ;        movwf    EEADRL
                      00009 ;ENDIF         
                      00010            
00030E 9EA6           00011          bcf      EECON1,EEPGD
000310 80A6           00012          bsf      EECON1,RD
                      00013          
                      00014        
                      00015 
000312 50A8           00016          movf     EEDATA,w
                      00017 
000314 0012           00018          return
                      00019          
000316                00020 zapis_eeprom
                      00021 ;do w adres pod ktory zapisuje
                      00022 ;do FSR (INDF) co zapisuje         
                      00023 ;poprawka ze zapisuje dana spod INDF1         
                      00024          
000316                00025 check_if_write
000316 B2A6           00026          btfsc    EECON1,WR
000318 EF8B F001      00027          goto     check_if_write
                      00028     
                      00029  
                      00030          
                      00031 ;IF procek==1         
00031C 6EA9           00032          movwf    EEADR
                      00033 ;ENDIF         
                      00034 
                      00035        
00031E 50E7           00036          movf     INDF1,w
                      00037         
000320 6EA8           00038          movwf     EEDATA
                      00039       
000322 9EA6           00040          bcf      EECON1,EEPGD
000324 84A6           00041          bsf      EECON1,WREN
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00042   ;bez przerwan       
000326 9EF2           00043          bcf      INTCON,GIE
                      00044          
000328 0E55           00045          movlw    55h
00032A 6EA7           00046          movwf    EECON2
00032C 0EAA           00047          movlw    0aah
00032E 6EA7           00048          movwf    EECON2
                      00049          
000330 82A6           00050          bsf      EECON1,WR                  
                      00051          
000332 8EF2           00052          bsf      INTCON,GIE
000334 94A6           00053          bcf      EECON1,WREN
                      00054          
                      00055          
                      00056                   
000336 0012           00057          return         
                      00684 
000338                00685 Start
                      00686 ;odczytuje wartosci poprawek czujnikow temperatury
000338 0E00           00687       movlw     poprawka0_ee
00033A 6EE9           00688       movwf      FSR0L
00033C 6AEA           00689       clrf       FSR0H
00033E 0ECE           00690       movlw      poprawka0
000340 6EE1           00691       movwf      FSR1L
000342 6AE2           00692       clrf       FSR1H
                      00693       
000344                00694 petla_odczytu_poprawek_z_eeprom
000344 50E9           00695       movf       FSR0L,w
000346 EC86 F001      00696       call        czytaj_eeprom
00034A 6EE7           00697       movwf      INDF1
                      00698       
00034C 2AE9           00699       incf       FSR0L,f
00034E 2AE1           00700       incf       FSR1L,f
000350 0E0A           00701       movlw      0x0a
000352 18E9           00702       xorwf      FSR0L,w
000354 A4D8           00703       btfss      STATUS,Z
000356 EFA2 F001      00704       goto        petla_odczytu_poprawek_z_eeprom
                      00705       
                      00706       
                      00707 
Warning[205]: Found directive in column 1. (IF)
                      00708 IF  (czy_ekran==1)
00035A EC4C F001      00709          call     lcd_init
00035E EC32 F001      00710          call     check_busy
000362 EC0A F001      00711          call    cmd_off
                      00712          
                      00713          
                      00714 ;        call     check_busy
000366 0E80           00715          movlw   linia_gorna
000368 ECF4 F000      00716          call    send
00036C EC32 F001      00717          call     check_busy
000370 0E45           00718          movlw    _E
000372 EC05 F001      00719          call     write_lcd
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[205]: Found directive in column 1. (ENDIF)
                      00720 ENDIF
                      00721          
                      00722 ;konfiguruje port szeregowy
                      00723 ;ustawiam baud rate
                      00724          ;bsf      STATUS,RP0
                      00725          ;bcf      STATUS,RP1
                      00726 ;        movlw    0x1a
                      00727 ;         movlw    0x1a
                      00728 ;         movlw    0x1a
000376 0E0C           00729          movlw    0x0c
000378 6EAF           00730          movwf    SPBRG
00037A 6AAC           00731          clrf     TXSTA
00037C 84AC           00732          bsf      TXSTA,BRGH
00037E 8AAC           00733          bsf      TXSTA,TXEN
                      00734          
                      00735 
                      00736          
                      00737 ;wlaczam przerwanie szeregu
000380 8A9D           00738          bsf      PIE1,RCIE
                      00739 ;        bsf      PIE1,TXIE
                      00740          ;bcf      STATUS,RP0
000382 0E90           00741          movlw    b'10010000'
000384 6EAB           00742          movwf    RCSTA
                      00743          
                      00744          
                      00745 
000386 0E00           00746          movlw    0
000388 6FAA           00747          movwf    ktory_rejestr_zapisuje
                      00748                   
                      00749          
                      00750          
00038A 6FB3           00751          movwf   ktora_probka
                      00752          
                      00753 
00038C 0E08           00754          movlw    8
00038E 6FB8           00755          movwf    jak_duzo_bajtow_odbieram_z_ds
                      00756          
000390 8882           00757          bsf      port_CTS,znacznik_CTS
                      00758          
                      00759          
                      00760          ;tu ustawiam napiecia referencyjne jako AN3 i Vss 
                      00761 ;wszystkie 
Warning[205]: Found directive in column 1. (IF)
                      00762 IF  (procek==18f442)
                      00763          movlw    b'10000001'
                      00764          movwf    ADCON1
                      00765 ENDIF         
Warning[205]: Found directive in column 1. (IF)
                      00766 IF  (procek==18f4320)         
000392 0E1A           00767          movlw    b'00011010'
000394 6EC1           00768          movwf    ADCON1
                      00769          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000396 0EA6           00770          movlw    b'10100110'
000398 6EC0           00771          movwf    ADCON2
Warning[205]: Found directive in column 1. (ENDIF)
                      00772 ENDIF
                      00773 
00039A 85A1           00774       bsf   markers3,czy_zegar_wyswietlac
                      00775 
00039C 0E30           00776          movlw    0x30
00039E 6FDA           00777          movwf    dzien_10
0003A0 6FDB           00778          movwf    dzien_1
0003A2 6FDC           00779          movwf    godziny_10
0003A4 6FDD           00780          movwf    godziny_1
0003A6 6FDE           00781          movwf    minuty_10
0003A8 6FDF           00782          movwf    minuty_1
0003AA 6FE0           00783          movwf    sekundy_10
0003AC 6FE1           00784          movwf    sekundy_1
                      00785          
                      00786          
                      00787          ;ustawienie opcji pomiarowych dla menu
0003AE 0E00           00788          movlw          0
0003B0 6FA6           00789          movwf          ile_kanalow
0003B2 0E20           00790          movlw          0x20
0003B4 6FA8           00791          movwf          odstep_pomiarowy
0003B6 0E80           00792          movlw          0x80
0003B8 6FB2           00793          movwf          jak_duzo_probek
                      00794          
0003BA EC70 F003      00795          call           ustaw_wartosc_dzielenia_usredniania
                      00796          
0003BE 819F           00797          bsf            markers,czy_usrednianie
                      00798          
0003C0 0E00           00799          movlw    0
0003C2 6FAE           00800          movwf    jaka_wartosc_regulujeH1
0003C4 0E80           00801          movlw    0x80
0003C6 6FAF           00802          movwf    jaka_wartosc_regulujeL1
                      00803          
0003C8 0E00           00804          movlw    0
0003CA 6FB0           00805          movwf    jaka_wartosc_regulujeH2
0003CC 0E80           00806          movlw    0x80
0003CE 6FB1           00807          movwf    jaka_wartosc_regulujeL2
                      00808          
0003D0 0E02           00809          movlw    2
0003D2 6FE9           00810          movwf    histereza_R1_1
                      00811          
0003D4 0E02           00812          movlw    2
0003D6 6FEA           00813          movwf    histereza_R1_2
                      00814          
0003D8 0E01           00815          movlw    1
0003DA 6FEB           00816          movwf    histereza_R2_1
                      00817          
0003DC 0E01           00818          movlw    1
0003DE 6FEC           00819          movwf    histereza_R2_2
                      00820          
                      00821          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00822          ;włączam znaczniki sprawiające że przy opuszczeniu menu następuje ponowne włączenie
                      00823 ;zegara oraz pokazywania temperatury
                      00824 ;z poziomu menu można zmienić te znaczniki tak by nie nastąpiło ponowne wyświetlanie zegara i tempe
                            ratur
0003E0 0E00           00825          movlw    0
0003E2 6FEE           00826          movwf    ktory_czujnik_reguluje1
                      00827          
                      00828          
0003E4 0E01           00829          movlw    1
0003E6 6FEF           00830          movwf    ktory_czujnik_reguluje2
                      00831          
0003E8 839E           00832          bsf            znaczniki,czy_ponownie_wlaczyc_zegar
0003EA 819E           00833          bsf            znaczniki,czy_ponownie_wlaczyc_temp
                      00834          
0003EC EFE5 F00D      00835          goto     LOOP
                      00836   
                      00837          
0003F0                00838 hex2dec18
                      00839       ;zamiana wartosci szesnastkowej na dziesietne
                      00840       ;dziele przez 10 tzn mnoze przez 0x1a/256 (0x26) lub przez 0x19/256 (25)
                      00841 ;      i wynik jednosci w PRODH, a ulamek w ProdL
                      00842       ;w młodszym bajcie wyniku jest ułamek
                      00843       ;należy przed uruchomieniem procedury 
                      00844       ; umieścić liczbę dzieloną w rejestrze  
                      00845       ;tmp_hex
                      00846       ;bajt starszy w tmp_hex_H
                      00847       
                      00848       
                      00849       ;clrf        dec1
                      00850       ;clrf        dec10
0003F0 6B96           00851       clrf        dec100
                      00852       
                      00853       ;dziele przez 5
                      00854       ;mullw       0x33
                      00855       ;wynik jest w starszym bajcie
                      00856       ;movf        PRODH,w
                      00857       ;dzielę przez 2 - 0x80
                      00858       ;dzielę przez 0.0976 - mnoże przez 0x19
0003F2 5192           00859       movf        tmp_hex,w
0003F4 0D19           00860       mullw       0x19
0003F6 50F4           00861       movf        PRODH,w
                      00862       
0003F8 6F97           00863       movwf       dec10
0003FA 0D0A           00864       mullw       0xa
0003FC 50F3           00865       movf        PRODL,w
                      00866       ;tmp_hex - dec10*10 = liczba jednosci
0003FE 5D92           00867       subwf       tmp_hex,w
000400 6F98           00868       movwf       dec1
                      00869 ;sprawdzam czy liczba jedności nie przekracza 10, czyli czy nie jest większa > 9
000402 0E09           00870       movlw       0x9
000404 6598           00871       cpfsgt      dec1  
000406 EF0A F002      00872       goto        hex2dec18_nie_przekroczono_1
                      00873       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00040A 0E0A           00874       movlw       0xa
00040C 5F98           00875       subwf       dec1,f
00040E 2B97           00876       incf        dec10,f
                      00877       
000410 B0D8           00878       btfsc       STATUS,C
000412 2B96           00879       incf        dec100,f
                      00880       
                      00881       
000414                00882 hex2dec18_nie_przekroczono_1
                      00883 ;sprawdz czy liczba dziesiatek  nie przekracza liczby 10 tzn podziel liczbę przez 10 (mnożę przez 0x1
                            a)
                      00884       ;przez 5
000414 5197           00885       movf       dec10,w
                      00886       ;mullw       0x33
                      00887       
                      00888       ;movf        PRODH,w
                      00889       ;dzielę przez 26
000416 0D1A           00890       mullw       0x1a
                      00891       
000418 50F4           00892       movf        PRODH,w
                      00893 ;jezeli jest 0 to skocz dalej
00041A E005           00894       bz          hex2dec18_brak_setek
                      00895 ;jezeli brak 0 tzn ze w wyniku mamy jakies liczby setek
00041C 6F96           00896       movwf       dec100
                      00897       ;a ile zostalo liczb 10 - 
00041E 0E0A           00898       movlw       0xa
000420 0396           00899       mulwf       dec100
                      00900       ;mnoze dec100*100 i wynik odejmuje od liczby 10
000422 50F3           00901       movf        PRODL,w
000424 5F97           00902       subwf       dec10,f
                      00903 ; i juz mam ilosc dziesiatek i setek i jednosci z wyniku zamiany jednego bajta na postać dziesiętną
                      00904       
000426                00905 hex2dec18_brak_setek
                      00906 ;teraz sprawdzam czy w starszym bajcie liczby dzielonej stoi jakas wartość jezeli tak to zwiekszam ilo
                            sc setek i dziesiatek
                      00907 ;jezeli w starszym bajcie stoi cos:
                      00908       
000426 5193           00909       movf       tmp_hex_H,w
                      00910             
                      00911       
                      00912       ;jezeli 0 to koncz prace procedury
000428 E015           00913       bz          hex2_dec_koniec
                      00914       ;jezeli nie to popraw wyniki o poprawke
00042A 0A01           00915       xorlw       0x01
00042C E005           00916       bz          hex2dec_temperatur_popraw_o_64
                      00917       
00042E 5193           00918       movf       tmp_hex_H,w
000430 0A02           00919       xorlw       0x02
000432 E008           00920       bz          hex2dec_temperatur_popraw_o_128
                      00921 
000434 EF2A F002      00922       goto        hex2_dec_koniec
                      00923       
000438                00924 hex2dec_temperatur_popraw_o_64
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000438 0E06           00925       movlw       0x06
00043A 2797           00926       addwf       dec10,f
00043C 0E04           00927       movlw       0x04
00043E 2798           00928       addwf       dec1,f
000440 EF2A F002      00929       goto        hex2_dec_koniec
                      00930       
000444                00931 hex2dec_temperatur_popraw_o_128
000444 0E01           00932       movlw       0x01
000446 2796           00933       addwf       dec100,f
000448 0E02           00934       movlw       0x02
00044A 2797           00935       addwf       dec10,f
00044C 0E08           00936       movlw       0x08
00044E 2798           00937       addwf       dec1,f
000450 EF2A F002      00938       goto        hex2_dec_koniec
                      00939       
000454                00940 hex2_dec_koniec
000454 0012           00941       return
                      00942 
                      00943 
                      00944                                                                                                 ;ZEGAR  
                              Systemowy  
                      00945  
                      00946 
000456                00947 napisz_czas
000456 97A1           00948       bcf   markers3,odswiezanie_zegara
                      00949       ;wyswietlam wszyskie wielkosci czasowe na 1 linii ekranu
000458 EC32 F001      00950       call     check_busy
00045C 0E80           00951       movlw   linia_gorna
00045E ECF4 F000      00952       call    send
000462 EC32 F001      00953       call     check_busy
                      00954       
000466 0E20           00955      movlw  _puste 
                      00956      ;jeżeli praca w trybie regulacji to pisz r
000468 B3A2           00957      btfsc  markers_regulacja,reguluj1
00046A 0E72           00958      movlw  _r
00046C EC05 F001      00959      call   write_lcd
                      00960      
000470 EC32 F001      00961      call     check_busy
                      00962      
                      00963      ;jeżeli praca w trybie transferu szeregowego
000474 0E20           00964      movlw  _puste 
000476 B99F           00965      btfsc  markers,czy_wysylac_pomiary_serial
000478 0E73           00966      movlw  _s
00047A EC05 F001      00967      call   write_lcd
00047E EC32 F001      00968      call     check_busy 
                      00969       
                      00970       
                      00971       
                      00972       ;addlw 2
                      00973       
                      00974       
                      00975             
000482 0EDA           00976       movlw       dzien_10
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000484 6ED9           00977       movwf       FSR2L      
000486 6ADA           00978       clrf        FSR2H
000488 EF4B F002      00979       goto        petla_napisz_czas
                      00980       
00048C                00981 petla_napisz_czas_dwukropek      
                      00982 ;po kazdych dwóch cyfrach pisz dwukropek
00048C 0E3A           00983       movlw       _dwukropek
00048E EC05 F001      00984       call        write_lcd
000492 EC32 F001      00985       call        check_busy
                      00986             
                      00987 ;w FSR2l umieszczam adres komorki dzien_10, zwiekszajac ten adres o 1 mam dostep po kolei do wszystkich 
                            wartosci 
                      00988 ;czasowych
000496                00989 petla_napisz_czas
                      00990 ;sprawdz czy cyfra 10 jest 0 - jezeli tak to wyswietl puste
000496 0E30           00991       movlw 0x30
000498 18D9           00992       xorwf FSR2L,w
00049A B4D8           00993       btfsc STATUS,Z
00049C EF53 F002      00994       goto  wyswietl_puste
                      00995 ;jezeli wyswietlam zawartosc rejestru      
0004A0 50DF           00996       movf  INDF2,w
0004A2 EF54 F002      00997       goto  wyswietl_1
                      00998       
0004A6                00999 wyswietl_puste
0004A6 0E20           01000       movlw _puste
                      01001       
0004A8                01002 wyswietl_1      
                      01003       
                      01004       
0004A8 EC05 F001      01005       call  write_lcd
0004AC EC32 F001      01006       call  check_busy
                      01007       
0004B0 2AD9           01008       incf  FSR2L,f
0004B2 50DF           01009       movf  INDF2,w
0004B4 EC05 F001      01010       call  write_lcd
0004B8 EC32 F001      01011       call  check_busy
                      01012       
0004BC 2AD9           01013       incf  FSR2L,f
                      01014       
0004BE 0EE2           01015       movlw       sekundy_1+1
0004C0 18D9           01016       xorwf       FSR2L,w
0004C2 E1E4           01017       bnz         petla_napisz_czas_dwukropek
                      01018       
                      01019       ;po wyswietleniu zegara znow kaz mierzyc
                      01020       
0004C4 AD9F           01021       btfss       markers,czy_wlaczyc_ponownie_temp
0004C6 EFE5 F00D      01022       goto        LOOP 
                      01023       
                      01024       
                      01025       ;bcf   markers,pomiary_zrobione
                      01026       ;i zaznacz zeby je jeszcze raz wlaczyl po wyswietleniu czasu
0004CA 9D9F           01027       bcf   markers,czy_wlaczyc_ponownie_temp
                      01028       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0004CC EFE5 F00D      01029       goto  LOOP
                      01030       ;sprawdz czy INDF2 ==    sekundy_1 + 1
                      01031       
                      01032       
                      01033  
                      01034 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                                                 SPRAWDZANIE CZY nast
                            apilo 0  
0004D0                01035 odznacz_by_znow_mierzyc
                      01036                                     ;sprawdz czy odstep miedzy pomiarami juz minal
                      01037       
                      01038       ;incf  aktualny_odstep,w
                      01039       
                      01040       ;movf  aktualny_odstep,w
                      01041       ;bnz   bez_wlaczania_pomiarow
                      01042       
0004D0 2FA9           01043          decfsz   aktualny_odstep,f
0004D2 0012           01044          return                
                      01045          
0004D4 51A8           01046          movf     odstep_pomiarowy,w
0004D6 6FA9           01047          movwf    aktualny_odstep
                      01048          
0004D8 A59F           01049          btfss    markers,pomiary_zrobione
0004DA 0012           01050          return
                      01051          
0004DC 959F           01052          bcf      markers,pomiary_zrobione
0004DE 879F           01053          bsf      markers,inicjuj_pomiary
0004E0 0012           01054          return
                      01055 
                      01056 
                      01057 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
                                                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;  KAZDE ROZPOCZEcie POMIAROW         
0004E2                01058 rozpocznij_pomiary         
                      01059 ;dokonuj pomiaru  na pierwszym kanale
                      01060 ;wlaczam tez przerwanie analogowego pomiaru
                      01061          
                      01062 ;wlacz przerwanie jak skonczy mierzyc zeby wyslac
                      01063 ;wystarczy ze 000 do bitow kanalu
0004E2 6B87           01064       clrf  linia2
0004E4 6B89           01065       clrf  linia4
0004E6 99A0           01066          bcf      markers2,wyslij_pomiar 
                      01067          ;
0004E8 51A6           01068          movf     ile_kanalow,w
0004EA 6FA7           01069          movwf    ktory_kanal_mierze 
                      01070          
0004EC 51B2           01071          movf    jak_duzo_probek,w
0004EE 6FB3           01072          movwf   ktora_probka
0004F0 6BB4           01073          clrf     ktory_kanal
                      01074          
                      01075          ;movwf   ktore_dzielenie_przez2
                      01076          
0004F2 5082           01077          movf     port_multiplekser,w
                      01078 ;czyszcze aktualne ustawienia multipleksera
                      01079 ;jezeli byl tu b'01010001'     
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0004F4 0BF8           01080          andlw    b'11111000'
                      01081 ;w wyniku mamy b'01010000'      
0004F6 6E8B           01082          movwf    latch_multiplekser   
                      01083          
0004F8 50C2           01084          movf     ADCON0,w
                      01085          
                      01086          ;bsf      STATUS,RP0
                      01087          ;bcf      STATUS,RP1
                      01088 ;        movlw    0x1a
                      01089          
                      01090          ;bcf      STATUS,RP0    
                      01091          ;clrf     TMR0L
Warning[205]: Found directive in column 1. (IF)
                      01092 IF (procek == 18f442)
                      01093          ;bcf      INTCON,T0IF
                      01094          ;bsf      INTCON,T0IE
                      01095          andlw    b'11000111'
                      01096          movwf    ADCON0
                      01097          
                      01098 ENDIF
Warning[205]: Found directive in column 1. (IF)
                      01099 IF (procek == 18f4320)
                      01100          ;bcf      INTCON,TMR0IF
                      01101          ;bsf      INTCON,TMR0IE
0004FA 0BC3           01102          andlw    b'11000011'
0004FC 6EC2           01103          movwf    ADCON0
                      01104          
Warning[205]: Found directive in column 1. (ENDIF)
                      01105 ENDIF
                      01106          
                      01107          ;jezeli mam wykonywac pomiary to zapisz z rejestru ile mam robic pomiarow
0004FE B1A1           01108          btfsc    markers3,pomiary_pradu
000500 6BD9           01109          clrf     ktory_aktualnie_kanal_pradu
                      01110          
000502 979F           01111          bcf      markers,inicjuj_pomiary
                      01112          
000504 82C2           01113          bsf      ADCON0,GO
000506 8C9D           01114          bsf      PIE1,ADIE
                      01115          
000508 0012           01116         return             
                      01117 
                      01118          
00050A                01119 bez_wlaczania_pomiarow
                      01120 
                      01121          
                      01122       
00050A                01123 procedura_obslugi_zegara
                      01124 ;najpierw sprawdz czy minelo 16 zliczen?
                      01125       
                      01126 
                      01127 
                      01128       ;jezeli pomiary to cy je robic?
00050A B5A0           01129          btfsc    markers2,pomiary
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00050C EC68 F002      01130          call     odznacz_by_znow_mierzyc
                      01131       ;odznacz    
000510 93A0           01132          bcf      markers2,przerwanie_t1
                      01133       
                      01134       
                      01135          ;btfss    portlampka,lampka
                      01136          ;goto     zapal    
                      01137          ;bcf      portlampka,lampka
                      01138                   
000512 0012           01139          return
                      01140 ;zapal    
                      01141  ;        bsf      portlampka,lampka
                      01142   ;       return
                      01143 
                      01144 
                      01145   
                      01146   
                      01147   
                      01148   
                      01149   
                      01150   
                      01151 
000514                01152 sprawdz_czy_mozna_wysylac
                      01153          ;bsf      STATUS,RP0
000514                01154 TMR_nie_pusty     
000514 A2AC           01155          btfss    TXSTA,TRMT
000516 EF8A F002      01156          goto     TMR_nie_pusty     
                      01157          ;bcf      STATUS,RP0
00051A                01158 TXREG_nie_pusty   
00051A A89E           01159          btfss    PIR1,TXIF
00051C EF8D F002      01160          goto     TXREG_nie_pusty
000520 0012           01161          return   
                      01162          
000522                01163 wyslij_znak
                      01164 ;sprawdz czy USART transmit buffer jest pusty
000522 0E00           01165          movlw    dane_odebraneL
                      01166          
000524 6EE9           01167          movwf    FSR0L
000526 0E01           01168          movlw    dane_odebraneH
000528 6EEA           01169          movwf    FSR0H
                      01170          
00052A                01171 wyslij_znak_petla 
00052A EC8A F002      01172          call     sprawdz_czy_mozna_wysylac
                      01173 ;laduje dane do wyslania   
00052E 2AE9           01174          incf     FSR0L,f
                      01175          
                      01176 ;        movf     INDF0,w
                      01177 ;        call     write_lcd
                      01178 ;        call     check_busy
                      01179          
000530 0E0D           01180          movlw    0x0d
000532 18EF           01181         xorwf    INDF0,w
000534 B4D8           01182          btfsc    STATUS,Z
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000536 EFA1 F002      01183          goto     wyslij_znak_koniec
                      01184          
00053A 50EF           01185          movf    INDF0,w
00053C 6EAD           01186          movwf    TXREG
00053E EF95 F002      01187          goto     wyslij_znak_petla
000542                01188 wyslij_znak_koniec
000542 EC8A F002      01189          call     sprawdz_czy_mozna_wysylac
000546 0E20           01190          movlw    _puste
000548 6EAD           01191          movwf    TXREG
00054A EC8A F002      01192          call     sprawdz_czy_mozna_wysylac
00054E 0E3A           01193          movlw    _dwukropek
000550 6EAD           01194          movwf    TXREG
000552 EC8A F002      01195          call     sprawdz_czy_mozna_wysylac
000556 0E2D           01196          movlw    _minus
000558 6EAD           01197          movwf    TXREG
00055A EC8A F002      01198          call     sprawdz_czy_mozna_wysylac
00055E 0E0A           01199          movlw    znak_lf
000560 6EAD           01200          movwf    TXREG
                      01201          
000562 06E9           01202          decf     FSR0L,f
                      01203 ;        call     sprawdz_czy_mozna_wysylac
                      01204 ;        movlw    znak_lf
                      01205 ;        movwf    TXREG
                      01206          
000564 EF01 F004      01207          goto     powrot_z_polecen
                      01208          
000568                01209 sprawdz_czy_odebrano_litere
000568 0E30           01210          movlw    0x30
00056A 5CEF           01211          subwf    INDF0,w
00056C 6F95           01212          movwf    tmp7
                      01213 ;sprawdzam czy zostaly jakies bity w gornej polowce bajtu
                      01214          
00056E 0BF0           01215          andlw    0xf0 
000570 B4D8           01216          btfsc    STATUS,Z
000572 0012           01217          return
                      01218 ;jezeli odebrano litere duza (A,B,C,D,E,F) to po odjeciu 0x41 nic nie powinno zostac w                  
                              
000574 0E41           01219          movlw    0x41
000576 5CEF           01220          subwf    INDF0,w
000578 6F95           01221          movwf    tmp7
                      01222 
00057A 0BF0           01223          andlw    0xf0 
00057C A4D8           01224          btfss    STATUS,Z
00057E EFC4 F002      01225          goto     sprawdz_czy_odebrano_mala_litere
                      01226 ;zasada taka to co zostalo po odjeciu 0x41 to 0 dla A 1 dla B etc
                      01227 ;aby miec prawdziwy znak dodaje do tego 0x0a         
000582 0E0A           01228          movlw    0x0A
000584 2795           01229          addwf    tmp7,f
000586 0012           01230          return
000588                01231 sprawdz_czy_odebrano_mala_litere
000588 0E61           01232          movlw    0x61
00058A 5CEF           01233          subwf    INDF0,w
00058C 6F95           01234          movwf    tmp7
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00058E 0BF0           01235          andlw    0xf0 
000590 A4D8           01236          btfss    STATUS,Z
000592 EFCE F002      01237          goto     zla_dana_wez_0
000596 0E0A           01238          movlw    0x0A
000598 2795           01239          addwf    tmp7,f
00059A 0012           01240          return
00059C                01241 zla_dana_wez_0
00059C 6B95           01242          clrf     tmp7
00059E 0012           01243          return
                      01244          
0005A0                01245 kopiuj_liczbe_przeslana
                      01246 ;procedura dziala na tej zasadzie
                      01247 ;ze znaki 0123456789;:<=>?
                      01248 ;wysłane na ekran 
                      01249 ;po odjeciu 0x30 sa 4bitami liczby
                      01250 ;pierwszy znak jest wyzszym bajtem
                      01251 ;drugi znak nizszym
                      01252 
                      01253 ;dodano obsluge literek a,b,c,d,e,f
                      01254 ;zamiast znakow ;:<=>?
0005A0 2AE9           01255          incf     FSR0L,f
                      01256          
0005A2 ECB4 F002      01257          call   sprawdz_czy_odebrano_litere  
                      01258          
                      01259          
0005A6 3995           01260          swapf    tmp7,w
0005A8 6F91           01261          movwf    tmp
                      01262          
0005AA 2AE9           01263          incf     FSR0L,f
0005AC ECB4 F002      01264          call     sprawdz_czy_odebrano_litere
0005B0 5195           01265          movf     tmp7,w
0005B2 2791           01266          addwf    tmp,f
                      01267          
0005B4 0012           01268          return
                      01269                   
0005B6                01270 zamien_na_hex
                      01271 ;jezeli po odjeciu 0a jest niezanaczony bit C
                      01272 ;to znaczy ze dodaj 
0005B6 6F95           01273          movwf    tmp7
0005B8 0E0A           01274          movlw    0x0a
0005BA 5D95           01275          subwf    tmp7,w
0005BC A0D8           01276          btfss    STATUS,C
0005BE EFE4 F002      01277          goto     cyfry_0_9
0005C2 5195           01278          movf     tmp7,w
0005C4 0F37           01279          addlw    0x37
0005C6 0012           01280          return
0005C8                01281 cyfry_0_9         
0005C8 5195           01282          movf     tmp7,w
0005CA 0F30           01283          addlw    0x30
0005CC 0012           01284          return
                      01285          
0005CE                01286 ustaw_spbrg
                      01287          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01288          
0005CE ECD0 F002      01289          call     kopiuj_liczbe_przeslana
0005D2 5191           01290          movf     tmp,w
                      01291 ;zmieniam SPBRG
                      01292          ;bsf      STATUS,RP0
                      01293          ;bcf      STATUS,RP1
                      01294 ;        movlw    0x1a
0005D4 6EAF           01295          movwf    SPBRG    
                      01296          ;bcf      STATUS,RP0
0005D6 EF01 F004      01297          goto     powrot_z_polecen
                      01298 
0005DA                01299 pokaz_rejestr     
                      01300          
0005DA ECD0 F002      01301          call     kopiuj_liczbe_przeslana
                      01302          
                      01303 ;przechowuje FSR0L gdzies    
                      01304          
                      01305          
0005DE 5191           01306          movf     tmp,w
0005E0 6EDA           01307          movwf    FSR2H
0005E2 ECD0 F002      01308          call     kopiuj_liczbe_przeslana
0005E6 5191           01309          movf     tmp,w
0005E8 6ED9           01310          movwf    FSR2L
                      01311 ;        movf     INDF0,w
                      01312 ;teraz rodzielam bajt na 4 bity starsze i 4 bity mlodsze
0005EA 38DF           01313          swapf    INDF2,w
0005EC 0B0F           01314          andlw    0x0f
0005EE ECDB F002      01315          call     zamien_na_hex
0005F2 6EAD           01316          movwf    TXREG
                      01317          
0005F4 EC8A F002      01318          call     sprawdz_czy_mozna_wysylac
                      01319          
0005F8 50DF           01320          movf     INDF2,w
                      01321 ;robiac taka operacje kasuje starszy bajt na 3 a mlodszy bez zmian      
0005FA 0B0F           01322          andlw    0x0f
0005FC ECDB F002      01323          call     zamien_na_hex
000600 6EAD           01324          movwf    TXREG
000602 EC8A F002      01325          call     sprawdz_czy_mozna_wysylac
000606 0E0A           01326          movlw    znak_lf
000608 6EAD           01327          movwf    TXREG
00060A EC8A F002      01328          call     sprawdz_czy_mozna_wysylac
                      01329          
00060E EF01 F004      01330          goto     powrot_z_polecen
                      01331 
                      01332 
                      01333 ;inicjuje pomiar co ile sekund na ktoryms z kanalow     
000612                01334 zle_polecenie
000612 6B91           01335          clrf     tmp
000614                01336 zle_polecenie_petla
                      01337 ;jestem w pamieci gdzie skok musi byc wykonany w  
                      01338 ;250 komorce stad do 
                      01339 ;PCLATH musze zaladowac 0x2
000614 0E02           01340          movlw    0x02
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000616 6EFA           01341          movwf    PCLATH
000618 5191           01342          movf     tmp,w
00061A EC1A F003      01343         call    Tab_zle_polecenie
00061E 6AFA           01344         clrf      PCLATH
                      01345 ;je?eli przeczytał 0 to kończ wyświetlanie
000620 0A00           01346          xorlw    0
000622 B4D8           01347          btfsc    STATUS,Z
000624 EF01 F004      01348          goto     powrot_z_polecen
000628 EC8A F002      01349          call     sprawdz_czy_mozna_wysylac
00062C 6EAD           01350          movwf    TXREG
00062E 2B91           01351          incf     tmp,f
000630 EF0A F003      01352          goto    zle_polecenie_petla
                      01353          
000634                01354 Tab_zle_polecenie         
000634 26F9           01355          addwf    PCL,f
000636 0C7A           01356          retlw    _z
000638 0C6C           01357          retlw    _l
00063A 0C65           01358          retlw    _e
00063C 0C20           01359          retlw    _puste
00063E 0C70           01360          retlw    _p
000640 0C6F           01361          retlw    _o
000642 0C6C           01362          retlw    _l
000644 0C65           01363          retlw    _e
000646 0C63           01364          retlw    _c
000648 0C65           01365          retlw    _e
00064A 0C6E           01366          retlw    _n
00064C 0C69           01367          retlw    _i
00064E 0C65           01368          retlw    _e
000650 0C0D           01369          retlw    znak_cr
000652 0C00           01370          retlw    0
                      01371          
000654                01372 inicjuj_pomiar
                      01373 ;odbierz cyfre ile mam wlaczyc portow analogowych
                      01374          
                      01375 ;do pomiarow potrzebuje rejestr TMR2         
000654 2AE9           01376          incf     FSR0L,f
000656 50EF           01377          movf     INDF0,w
000658 B4D8           01378          btfsc    STATUS,Z
00065A EF52 F003      01379          goto     wylacz_pomiary
                      01380          
00065E 0E30           01381          movlw    0x30
000660 5CEF           01382          subwf    INDF0,w
000662 B4D8           01383          btfsc    STATUS,Z
000664 EF52 F003      01384          goto     wylacz_pomiary
000668 6FA6           01385          movwf    ile_kanalow
                      01386          
00066A 6FA7           01387          movwf    ktory_kanal_mierze
                      01388          
                      01389             
                      01390 ;sprawdz czy liczba kanalow nie jest wieksza od 8
                      01391 ;jezeli od ile_kanalow odejme 8 i nie wyjdzie bit C
                      01392 ;tzn pozyczki to przyjmij 0x07
00066C 0808           01393          sublw    0x08
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00066E A0D8           01394          btfss    STATUS,C
000670 EF09 F003      01395          goto     zle_polecenie
                      01396 ;jezeli nie ma kropki to koncz
000674 2AE9           01397          incf     FSR0L,f
000676 0E2E           01398          movlw    _kropka
000678 18EF           01399          xorwf    INDF0,w
00067A A4D8           01400          btfss    STATUS,Z
00067C EF01 F004      01401          goto     powrot_z_polecen
                      01402 ;odbierz kolejne cyfry
                      01403         
000680 ECD0 F002      01404          call     kopiuj_liczbe_przeslana
000684 5191           01405          movf     tmp,w
000686 6FA8           01406          movwf    odstep_pomiarowy
000688 6FA9           01407          movwf    aktualny_odstep
                      01408 ;wlacz analog/cyfre
00068A 0E01           01409          movlw    b'00000001'
00068C 6EC2           01410          movwf    ADCON0
00068E 85A0           01411          bsf      markers2,pomiary
                      01412          ;bcf      portlampka2,lampka2
                      01413          ;clrf     TMR2
                      01414          ;movlw    b'00000000'
                      01415          ;movwf    T2CON
000690 51B2           01416          movf    jak_duzo_probek,w
                      01417          
000692 6FB3           01418          movwf   ktora_probka
000694 5082           01419          movf     port_multiplekser,w
                      01420          
                      01421 ;czyszcze aktualne ustawienia 
                      01422 ;jezeli byl tu b'01010001'     
000696 0BF8           01423          andlw    b'11111000'
                      01424 ;w wyniku mamy b'01010000'      
000698 6E8B           01425          movwf    latch_multiplekser
                      01426          
                      01427 ;IF  (czy_ekran==1)
                      01428 ;         
                      01429 ;         movlw   linia_gorna+4
                      01430 ;         call    send
                      01431  ;        call     check_busy
                      01432 ;         movlw    _B
                      01433 ;         call     write_lcd
                      01434 ;ENDIF
00069A 8B9F           01435          bsf      markers,czy_wyswietlam_temp
00069C 859F           01436          bsf      markers,pomiary_zrobione
00069E 899F           01437          bsf   markers,czy_wysylac_pomiary_serial
                      01438          
0006A0 EF01 F004      01439          goto     powrot_z_polecen    
                      01440 
0006A4                01441 wylacz_pomiary
0006A4 999F           01442       bcf   markers,czy_wysylac_pomiary_serial
0006A6 0E00           01443          movlw    b'00000000'
0006A8 6EC2           01444          movwf    ADCON0
0006AA 95A0           01445          bcf      markers2,pomiary
0006AC 99A0           01446          bcf     markers2,wyslij_pomiar
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0006AE 9881           01447          bcf     portlampka2,lampka2
                      01448          
0006B0 97A2           01449          bcf      markers_regulacja,reguluj2
0006B2 93A2           01450          bcf      markers_regulacja,reguluj1
                      01451          ;bcf      markers2,
0006B4 9B9F           01452          bcf      markers,czy_wyswietlam_temp
0006B6 EF01 F004      01453          goto     powrot_z_polecen                      
                      01454 ;polecenie ustawia regulator -> pokazuje wzgledem ktorego pomiaru ma regulowac wyjscie regulatora wybran
                            e arbitralnie np PORTC0
                      01455 ;i do tego portu podlaczam wyjscie na przekaznik lub triac     
                      01456 ;
                      01457 ;*Rx.yyyy
0006BA                01458 wylacz_regulator
0006BA 93A2           01459          bcf      markers_regulacja,reguluj1
0006BC 9881           01460          bcf      portlampka2,lampka2
0006BE EF01 F004      01461          goto     powrot_z_polecen              
0006C2                01462 ustaw_regulator
                      01463 ;jezeli nie wlaczylem wczesniej analoga to nie wlaczam regulatora
                      01464 
0006C2 A5A0           01465          btfss    markers2,pomiary
0006C4 EF5D F003      01466          goto     wylacz_regulator
                      01467          
0006C8 2AE9           01468          incf     FSR0L,f
0006CA ECB4 F002      01469          call     sprawdz_czy_odebrano_litere
0006CE 5195           01470          movf     tmp7,w
                      01471 ;         btfsc    STATUS,Z
                      01472 ;         goto     wylacz_regulator
                      01473          
0006D0 6FAE           01474         movwf    jaka_wartosc_regulujeH1
0006D2 ECD0 F002      01475          call     kopiuj_liczbe_przeslana
0006D6 5191           01476          movf     tmp,w 
0006D8 6FAF           01477          movwf    jaka_wartosc_regulujeL1
                      01478          
0006DA 83A2           01479          bsf      markers_regulacja,reguluj1
0006DC EF01 F004      01480          goto     powrot_z_polecen    
                      01481 
                      01482          
Warning[208]: Label truncated at 32 characters. (ustaw_wartosc_dzielenia_usredniania)
0006E0                01483 ustaw_wartosc_dzielenia_usredniania         
                      01484 ;sprawdzam    który bit jest ustawiony
                      01485 ;jeżeli jak_duzo_probek == 0x80 to ustawiony jest bit 7
0006E0 BFB2           01486       btfsc       jak_duzo_probek,7
0006E2 0E02           01487       movlw       0x02
                      01488 ;bit 6 = 0x40   
0006E4 BDB2           01489       btfsc       jak_duzo_probek,6
0006E6 0E04           01490       movlw       0x04
                      01491       
0006E8 BBB2           01492       btfsc       jak_duzo_probek,5
0006EA 0E08           01493       movlw       0x08
                      01494 ;0x10      
0006EC B9B2           01495       btfsc       jak_duzo_probek,4
0006EE 0E10           01496       movlw       0x10
                      01497 ;0x20      
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0006F0 B7B2           01498       btfsc       jak_duzo_probek,3
0006F2 0E20           01499       movlw       0x20
                      01500 ;0x40      
0006F4 B5B2           01501       btfsc       jak_duzo_probek,2
0006F6 0E40           01502       movlw       0x40
                      01503       
                      01504 ;2 próbki      
0006F8 B3B2           01505       btfsc       jak_duzo_probek,1
0006FA 0E80           01506       movlw       0x80
                      01507       
0006FC 6FB5           01508       movwf       usrednianie_przez_co_mnoze
                      01509       
0006FE 0012           01510       return
                      01511       
000700                01512 ustaw_probki                              ;                 PROBKI
000700 6BAB           01513          clrf     pomiarH
000702 6BAC           01514          clrf     pomiarL
000704 6BAD           01515          clrf     pomiar_ulamek
000706 6B9B           01516          clrf     wynikh
000708 6B9C           01517          clrf     wynik
                      01518 ;zawsze wyłącz na początku usrednianie
00070A 919F           01519          bcf      markers,czy_usrednianie
                      01520          
00070C ECD0 F002      01521          call     kopiuj_liczbe_przeslana
000710 5191           01522          movf     tmp,w
000712 6FB2           01523          movwf    jak_duzo_probek
                      01524          
                      01525          ;movwf   ktora_probka
                      01526          
                      01527 ;sprawdz czy usredniamy czy nie tzn czy wartosc jak_duzo_probek < 2
000714 0801           01528          sublw    1
000716 B0D8           01529          btfsc    STATUS,C
000718 EF01 F004      01530          goto     powrot_z_polecen
00071C 819F           01531          bsf      markers,czy_usrednianie
                      01532 ;ustaw wartość liczby przez którą mnoże każdy z pomiarów -> tzn przez ile dzielę
                      01533          
00071E EC70 F003      01534          call     ustaw_wartosc_dzielenia_usredniania
                      01535          
000722 EF01 F004      01536          goto     powrot_z_polecen
                      01537 
                      01538 
                      01539 
                      01540 ;*                                  *************************POLecenie DS1820
000726                01541 wlaczenie_rejestracji_pradu
000726 ECD0 F002      01542       call     kopiuj_liczbe_przeslana
                      01543       
00072A 5191           01544       movf     tmp,w
                      01545       
                      01546 ;sprawdzenie czy nie podano liczby większej od 2 (mniejszą od 3)
00072C 0E03           01547       movlw       3
00072E 6191           01548       cpfslt    tmp
                      01549 ;jezeli wyszlo C tzn ze przekroczono
000730 EF01 F004      01550       goto        powrot_z_polecen
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01551       
000734 5191           01552       movf     tmp,w
000736 E005           01553       bz       wylaczenie_rejestarcji_pradu
000738 6FD8           01554       movwf       jak_duzo_kanalow_pradu
                      01555       
00073A 81A1           01556       bsf   markers3,pomiary_pradu
00073C 6BD9           01557       clrf        ktory_aktualnie_kanal_pradu
                      01558       
00073E EF01 F004      01559       goto        powrot_z_polecen
                      01560       
000742                01561 wylaczenie_rejestarcji_pradu
000742 91A1           01562       bcf   markers3,pomiary_pradu
000744 EF01 F004      01563       goto        powrot_z_polecen
                      01564       
Warning[208]: Label truncated at 32 characters. (rozkaz_rejestracji_poprawki_pomiaru_temperatury)
000748                01565 rozkaz_rejestracji_poprawki_pomiaru_temperatury
                      01566       ;incf     FSR0L,f   
000748 ECD0 F002      01567       call     kopiuj_liczbe_przeslana
                      01568 
                      01569         
00074C 5191           01570       movf     tmp,w
                      01571 ;tmp6 przechowuje pod ktory adres zapisac poprawke      
00074E 6F94           01572       movwf    tmp6
000750 0809           01573       sublw    9
                      01574 ;jezeli wyszlo C tzn ze przekroczono a kanalow mamy tylko 8 + 2 pradowe
000752 A0D8           01575       btfss       STATUS,C
000754 EF01 F004      01576       goto        powrot_z_polecen
                      01577       
                      01578       
                      01579 ;sprawdz czy przeslana dana nie jest wieksza od 7 jezeli jest to przerwij
                      01580 ;odbierz kolejna liczbe
                      01581       ;incf     FSR0L,f
000758 ECD0 F002      01582       call     kopiuj_liczbe_przeslana
                      01583 
                      01584       ;jest w tmp  poprawka
00075C 0ECE           01585       movlw    poprawka0
                      01586       ;dec100 przechowuje ktorego czujnika to dotyczy
00075E 2594           01587       addwf    tmp6,w
000760 6EE1           01588       movwf    FSR1L
000762 6AE2           01589       clrf     FSR1H
                      01590       ;zapisuje do rejestru poprawek
000764 5191           01591       movf     tmp,w
000766 6EE7           01592       movwf    INDF1
                      01593       ;movwf    poprawka
000768 0E91           01594       movlw       tmp
00076A 6EE1           01595       movwf    FSR1L
                      01596       
00076C 0E00           01597       movlw poprawka0_ee
00076E 2594           01598       addwf tmp6,w
000770 EC8B F001      01599       call  zapis_eeprom
000774 EF01 F004      01600       goto        powrot_z_polecen
                      01601 
000778                01602 wybor_czujnika_regulatora
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 50


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000778 ECD0 F002      01603       call     kopiuj_liczbe_przeslana
                      01604       
                      01605       
                      01606       ;sprawdzam czy nie jest większe od 7
00077C 0E08           01607       movlw    8
00077E 6191           01608       cpfslt   tmp
000780 EFC6 F003      01609       goto     wybrano_czujnik_regulatora_wiekszy_od_7
                      01610       
000784 5191           01611       movf     tmp,w
                      01612       
000786 6FEE           01613       movwf    ktory_czujnik_reguluje1
                      01614       
000788 EF01 F004      01615       goto        powrot_z_polecen
                      01616 
Warning[208]: Label truncated at 32 characters. (wybrano_czujnik_regulatora_wiekszy_od_7)
00078C                01617 wybrano_czujnik_regulatora_wiekszy_od_7
00078C 0E00           01618       movlw       0
00078E 6FEE           01619       movwf       ktory_czujnik_reguluje1
000790 EF01 F004      01620       goto        powrot_z_polecen
                      01621       
000794                01622 sprawdz_czy_polecenie                  
                      01623 ;sprawdz czy odebrano 'znak_cr'
000794 0E00           01624          movlw    0x00
000796 6EE9           01625          movwf    FSR0L
000798 0E01           01626          movlw    1
00079A 6EEA           01627          movwf    FSR0H
                      01628          
00079C 0E2A           01629          movlw    _star
00079E 18EF           01630          xorwf    INDF0,w
0007A0 A4D8           01631          btfss    STATUS,Z
Warning[205]: Found directive in column 1. (IF)
                      01632 IF (czy_ekran==1)         
0007A2 EF06 F004      01633          goto     wyslij_na_ekran_to_co_odebralem
Warning[205]: Found directive in column 1. (ENDIF)
                      01634 ENDIF         
Warning[205]: Found directive in column 1. (IF)
                      01635 IF       (czy_ekran==0)
                      01636         goto     powrot_z_polecen
                      01637 ENDIF         
                      01638    
                      01639 
                      01640 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;         
0007A6                01641 sprawdz_ktore_polecenie
                      01642 ;polecenia:
                      01643 ;
                      01644 ;        *L-zapal lub zgas lampke lampke
                      01645 ;        *Px.y - pomiar kanal x wyrzucany na port szeregowy co y czasu (y to 1/2 sekundy)
                      01646 ;                 konfiguruje kanal 0 i referencyjne zasilajace
                      01647 ;        *P - puste przerywa pomiary
                      01648 ;        *Cx - czysci x linie ekranu i zeruje kursor
                      01649 ;        *Ryyy    - reguluj odczyt x(ktory kanal) na poziom y ustawienia w ilosc odczytanej cyfry
                      01650 ;        *+x.y - dodaje x + y i wynik na 4 linii ekranu
                      01651 ;        *>x      przeslij znak x
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 51


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01652 ;        **xx   ustaw zegar szeregowego xxx->do SPBRG 
                      01653 ;        xx -> zapis szesnastkowy tzn **:: ustawia SPBRG na 0xaa
                      01654 ;        *#xxxx - pokaz zawartosc rejestru xxxx (podobnie jak powyzej) - podaje dwa bajty np 0fff
                      01655 ;        *S00 - ustawienie ilosci probek na jeden pomiar
                      01656 ;        
                      01657 ;        *Di  -  inicjuje ds1820
                      01658 ;        *Dr  -read rom (only one ds)
                      01659 ;        *Ds      -skip rom (whitout rom identification)
                      01660 
                      01661 ;        *exxyy  - na ekran w miejscu xx wyrzuc znak yy
                      01662 ;        *p0xyy  - poprawka kanalu x o yy
                      01663 ;           *i0x - pomiar pradu z kanalow 2     
                      01664 ;           *A    - który czujnik użyty jest w regulacji
                      01665 ;zacznij robic
                      01666 ;sprawdzam czy
0007A6 2AE9           01667          incf     FSR0L,f
                      01668          
                      01669          
                      01670 ;*> - znak wysylania
0007A8 0E3E           01671          movlw    0x3e
0007AA 18EF           01672          xorwf    INDF0,w
0007AC B4D8           01673          btfsc    STATUS,Z
0007AE EF91 F002      01674          goto     wyslij_znak
                      01675 ;**         
0007B2 0E2A           01676          movlw    _star
0007B4 18EF           01677          xorwf    INDF0,w
0007B6 B4D8           01678          btfsc    STATUS,Z
0007B8 EFE7 F002      01679          goto     ustaw_spbrg
                      01680 ;*# - pokaz komorke pamieci         
0007BC 0E23           01681          movlw    0x23
0007BE 18EF           01682          xorwf    INDF0,w
0007C0 B4D8           01683          btfsc    STATUS,Z
0007C2 EFED F002      01684          goto     pokaz_rejestr
                      01685 ;*P -> pomiar     
0007C6 0E50           01686          movlw    _P
0007C8 18EF           01687          xorwf    INDF0,w
0007CA B4D8           01688          btfsc    STATUS,Z
0007CC EF2A F003      01689          goto     inicjuj_pomiar
                      01690 
                      01691 
                      01692 ;*r ->Reguluj
0007D0 0E52           01693          movlw    _R
0007D2 18EF           01694          xorwf    INDF0,w
0007D4 B4D8           01695          btfsc    STATUS,Z
0007D6 EF61 F003      01696          goto     ustaw_regulator
                      01697          
                      01698 ;*S ->probki
0007DA 0E53           01699          movlw    _S
0007DC 18EF           01700          xorwf    INDF0,w
0007DE B4D8           01701          btfsc    STATUS,Z
0007E0 EF80 F003      01702          goto     ustaw_probki
                      01703 
                      01704          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 52


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01705 ;*p - poprawka  czujnika temperatury i o ile np: *p0009 czyli 0 o 9 (ujemne to uzupelnienia czyli *p00fe
                             to poprawka o -1
0007E4 0E70           01706          movlw    _p
0007E6 18EF           01707          xorwf    INDF0,w
0007E8 B4D8           01708          btfsc    STATUS,Z
0007EA EFA4 F003      01709          goto     rozkaz_rejestracji_poprawki_pomiaru_temperatury
                      01710          
                      01711 ;*i - pomiar pradu np *i0x
                      01712          
0007EE 0E69           01713          movlw    _i
0007F0 18EF           01714          xorwf    INDF0,w
0007F2 B4D8           01715          btfsc    STATUS,Z
0007F4 EF93 F003      01716          goto     wlaczenie_rejestracji_pradu
                      01717          
0007F8 0E41           01718          movlw    _A
0007FA 18EF           01719          xorwf    INDF0,w
0007FC B4D8           01720          btfsc    STATUS,Z
0007FE EFBC F003      01721          goto     wybor_czujnika_regulatora
                      01722          
                      01723 ;ustaw szybkosc portu szeregowego
                      01724 ;ustawienie jest zapisane do EEPROM i w momencie startu urzadzenia stamtad czytane
                      01725 ;mozliwe ustawienia:
                      01726 ;0x1a - 11200 baudow
                      01727 ;0x0c - 19200 baudow
                      01728 ;
                      01729          
                      01730                            
000802                01731 powrot_z_polecen
                      01732 ;        movlw    _up
000802 2AE9           01733          incf     FSR0L,f
000804 97A0           01734          bcf      markers2,sprawdz_odebrane
000806 6B8D           01735          clrf     odebrano_liter
000808 88AB           01736          bsf      RCSTA,CREN
                      01737 ;        clrf     FSR0L
                      01738 ;        movwf    INDF
00080A 0012           01739          return
                      01740          
                      01741          
00080C                01742 wyslij_na_ekran_to_co_odebralem
00080C EC32 F001      01743       call     check_busy
000810 0EC0           01744          movlw    linia_dolna
000812 ECF4 F000      01745          call     send
000816 EC32 F001      01746          call     check_busy
00081A 0E00           01747          movlw    dane_odebraneL
00081C 6EE9           01748          movwf    FSR0L      
00081E 0E01           01749          movlw    dane_odebraneH
000820 6EEA           01750          movwf    FSR0H      
                      01751          
000822                01752 wyswietl_litere_petla
                      01753          
000822 0E0D           01754          movlw    0x0d
000824 18EF           01755          xorwf    INDF0,w
000826 B4D8           01756          btfsc    STATUS,Z
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 53


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000828 EF30 F004      01757          goto     koniec_wyswietlania
                      01758          
                      01759 ;sprawdz czy odebrano pusty znak...
                      01760 ;        movlw    0x0a
                      01761 ;        xorwf    INDF,w
                      01762 ;        btfsc    STATUS,Z
                      01763 ;        goto     koniec_wyswietlania        
                      01764          
00082C 50EF           01765          movf     INDF0,w
00082E B4D8           01766          btfsc    STATUS,Z
000830 EF30 F004      01767          goto     koniec_wyswietlania
                      01768 
                      01769 
000834 518D           01770          movf     odebrano_liter,w
000836 A4D8           01771          btfss    STATUS,Z
000838 EF1E F004      01772          goto     wyswietl_litere_petla2
                      01773          
                      01774          
                      01775 ;        goto     koniec_wyswietlania
                      01776 
00083C                01777 wyswietl_litere_petla2
                      01778          ;movlw    linia_dolna
                      01779          ;addwf    linia2,w
                      01780          ;call     send
                      01781          ;call     check_busy
                      01782          
00083C 50EF           01783          movf     INDF0,w
00083E EC05 F001      01784          call     write_lcd
000842 EC32 F001      01785          call     check_busy
                      01786 ;        clrf     odebrana_litera
000846 2B87           01787          incf     linia2,f
                      01788          
                      01789 ;        movlw    0A
                      01790 ;        xorwf    linia2
000848 A987           01791          btfss    linia2,4
00084A EF2D F004      01792          goto     wyswietl_litere_petla3
                      01793          
00084E 6B87           01794          clrf     linia2
000850 0E0F           01795          movlw    0x0f
000852 6F8B           01796          movwf    n
000854 0EC0           01797          movlw    linia_dolna
000856 EC23 F001      01798          call     clear_line
                      01799          
00085A                01800 wyswietl_litere_petla3
00085A 2AE9           01801          incf     FSR0L,f
                      01802 ;        decfsz   odebrano_liter,f
00085C EF11 F004      01803          goto     wyswietl_litere_petla
                      01804          
000860                01805 koniec_wyswietlania        
                      01806          ;clrf     odebrano_liter
                      01807          ;bcf      markers2,wyswietl
000860 88AB           01808          bsf      RCSTA,CREN
000862 EF01 F004      01809          goto     powrot_z_polecen
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 54


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01810 
                      01811          
                      01812          
                      01813          
                      01814          
                      01815          
                      01816 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                                                     ;;
                            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  
                      01817 
                      01818 
                      01819 ; tu sa procedury pomiaru
                      01820 
                      01821 
                      01822 
                      01823 
                      01824                                                    ;POMIARY!!!!!!!!!!!!!!!!!!!!!!!         
                      01825 
                      01826                                                    
                      01827                                                    
                      01828                                                    
                      01829                                                    
                      01830                                                    
                      01831                                                    
                      01832                                                    
                      01833                                                    
                      01834 ;;;;;;;;;;;;;;;
                      01835 
                      01836 
                      01837             
000866                01838 wyswietl_cyfry_temperatury
                      01839    
                      01840   
                      01841   
000866 EC32 F001      01842          call     check_busy
00086A 51B4           01843         movf        ktory_kanal,w
                      01844          
00086C 0F30           01845       addlw       0x30
                      01846       ;movlw       _plus
00086E EC05 F001      01847       call        write_lcd
                      01848       
                      01849       
                      01850       
                      01851       
                      01852       
                      01853       
                      01854    
000872 EC32 F001      01855       call     check_busy
000876 0E20           01856       movlw       _puste
000878 BDA1           01857       btfsc       markers3,napisz_minus
00087A 0E2D           01858       movlw       _minus
00087C EC05 F001      01859       call        write_lcd
                      01860       
                      01861       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 55


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01862       
000880                01863 wyswietl_cyfry_temperatury_opcje  
                      01864    ;sprawdz czy rzadna z cyfr nie przekracza 10
000880 0E0A           01865       movlw       0x0a
000882 5D98           01866       subwf       dec1,w
000884 E302           01867       bnc         sprawdz_10
000886 6F98           01868       movwf       dec1
000888 2B97           01869       incf        dec10,f
                      01870       
00088A                01871 sprawdz_10
00088A 0E0A           01872      movlw       0x0a
00088C 5D97           01873       subwf       dec10,w
00088E E302           01874       bnc         wyswietl_cyfry_temperatury2
000890 6F97           01875       movwf       dec10
000892 2B96           01876       incf        dec100,f
                      01877 
000894                01878 wyswietl_cyfry_temperatury2        
000894 EC32 F001      01879       call     check_busy
000898 5196           01880       movf     dec100,w
00089A E10E           01881       bnz       pisz_cyfre_100
                      01882       
00089C 0E20           01883       movlw    _puste
00089E EC05 F001      01884       call     write_lcd
0008A2 EC32 F001      01885       call     check_busy
0008A6 5197           01886       movf     dec10,w
0008A8 E10D           01887       bnz      pisz_cyfre_10
                      01888       
0008AA 0E20           01889       movlw    _puste
0008AC EC05 F001      01890       call     write_lcd
0008B0 EC32 F001      01891       call     check_busy
0008B4 EF68 F004      01892       goto     pisz_cyfre_1
                      01893       
0008B8                01894 pisz_cyfre_100
0008B8 5196           01895       movf        dec100,w
0008BA 0F30           01896       addlw       0x30
0008BC EC05 F001      01897       call     write_lcd
0008C0 EC32 F001      01898       call     check_busy
                      01899 
0008C4                01900 pisz_cyfre_10
0008C4 5197           01901       movf        dec10,w
0008C6 0F30           01902       addlw       0x30
0008C8 EC05 F001      01903       call     write_lcd
0008CC EC32 F001      01904       call     check_busy
                      01905       
0008D0                01906 pisz_cyfre_1
0008D0 5198           01907       movf        dec1,w
0008D2 0F30           01908       addlw       0x30
0008D4 EC05 F001      01909       call     write_lcd
0008D8 EC32 F001      01910       call     check_busy
                      01911       
0008DC 0E2E           01912       movlw    _kropka
0008DE EC05 F001      01913       call     write_lcd
                      01914       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 56


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01915       
                      01916 ;sprawdz ktory ulamek
0008E2 519D           01917       movf     wynik01,w
0008E4 E008           01918       bz       pisz_ulamek_00
                      01919       
0008E6 0A40           01920       xorlw    0x40
0008E8 E011           01921       bz       pisz_ulamek_25
                      01922       
0008EA 519D           01923       movf     wynik01,w
0008EC 0A80           01924       xorlw    0x80
0008EE E019           01925       bz       pisz_ulamek_50
                      01926       
0008F0 519D           01927       movf     wynik01,w
0008F2 0AC0           01928       xorlw    0xc0
0008F4 E021           01929       bz       pisz_ulamek_75
                      01930       
                      01931       
0008F6                01932 pisz_ulamek_00
0008F6 EC32 F001      01933       call     check_busy
0008FA 0E30           01934       movlw    0x30
0008FC EC05 F001      01935       call     write_lcd
000900 EC32 F001      01936       call     check_busy
000904 0E20           01937       movlw    _puste
000906 EC05 F001      01938       call     write_lcd
                      01939       
                      01940       
00090A 0012           01941       return
                      01942 
00090C                01943 pisz_ulamek_25
00090C EC32 F001      01944       call     check_busy
000910 0E32           01945       movlw    0x32
000912 EC05 F001      01946       call     write_lcd
                      01947       
000916 EC32 F001      01948       call     check_busy
00091A 0E35           01949       movlw    0x35
00091C EC05 F001      01950       call     write_lcd
000920 0012           01951       return
                      01952       
000922                01953 pisz_ulamek_50
000922 EC32 F001      01954       call     check_busy
000926 0E35           01955       movlw    0x35
000928 EC05 F001      01956       call     write_lcd
00092C EC32 F001      01957       call     check_busy
000930 0E30           01958       movlw    0x30
000932 EC05 F001      01959       call     write_lcd
000936 0012           01960       return
                      01961       
000938                01962 pisz_ulamek_75
000938 EC32 F001      01963       call     check_busy
00093C 0E37           01964       movlw    0x37
00093E EC05 F001      01965       call     write_lcd
000942 EC32 F001      01966       call     check_busy
000946 0E35           01967       movlw    0x35
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 57


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000948 EC05 F001      01968       call     write_lcd
00094C 0012           01969       return
                      01970       
                      01971       
00094E                01972 odejmij_512_od_wyniku_sredniej
                      01973 
00094E 0E02           01974          movlw    0x02
000950 5FAB           01975          subwf    pomiarH,f
                      01976          ;jezeli jest 0 to nic wiecej nie trzeba robic
                      01977          
000952 B4D8           01978          btfsc    STATUS,Z
000954 EFB1 F004      01979          goto     wynik_to_po_prostu_L
                      01980          
                      01981        ;jezeli w wyniku nie ma bitu 7 to oznacza brak liczby ujemnej
000958 AFAB           01982        btfss      pomiarH,7
00095A EFB1 F004      01983        goto       wynik_to_po_prostu_L
                      01984        
                      01985        
                      01986        
                      01987       ;w wyniku mamy np ff90 - brak 0
                      01988       ;tego nie trzeba bo polecenie negf - działa z -1 przed zastosowaniem
                      01989       ;decf  pomiarL,f
                      01990       
                      01991       ;przy odejmowaniu C jest normalnie ustawione
                      01992       ;btfss STATUS,C
                      01993       
                      01994       ;ale to trzeba bo tak samo zadziała dla starszego bajtu, a on nie ma być -1
00095E 2BAB           01995       incf  pomiarH,f
                      01996       
                      01997       ;zaznacz ze pisz minus
000960 8DA1           01998       bsf   markers3,napisz_minus
                      01999       ;negf  pomiarL,f
                      02000       ;negf  pomiarH,f
                      02001 
000962                02002 wynik_to_po_prostu_L
000962 0012           02003       return
                      02004 
                      02005 
000964                02006 usrednianie_wartosci
                      02007 ;oblicz srednia dzielac za pomoca ilosc probek pobieranych
                      02008          
000964 51B2           02009         movf    jak_duzo_probek,w
                      02010         
                      02011         ;movwf   ktore_dzielenie_przez2
                      02012         
                      02013         
                      02014         
                      02015 
000966 6B9D           02016         clrf      wynik01
                      02017         
000968                02018 petla_dzielenia
                      02019                                                                     ; bcf     STATUS,C
                      02020                                                                     ; call     dzielenie_przez_przesuwan
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 58


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ie
                      02021                                                                   ;mam na poczatku w ktore dzieleni_prze
                            z2 b'10000000'
                      02022                                                                   ;po jednym dzieleniu mam b'01000000'
                      02023                                                                     ; bcf       STATUS,C
                      02024                                                                     ; rrcf     ktore_dzielenie_przez2,f
                      02025                                                                     ; btfss   ktore_dzielenie_przez2,0
                      02026                                                                     ; goto     petla_dzielenia
                      02027                                                                      
                      02028 
                      02029 
000968 51B5           02030       movf    usrednianie_przez_co_mnoze,w
00096A 039C           02031       mulwf     wynik
                      02032       
                      02033       ;w PRODH jest wartość do wynik, a w ProdL do wynik01
00096C 50F4           02034       movf        PRODH,w
00096E 6F9C           02035       movwf       wynik
000970 50F3           02036       movf        PRODL,w
000972 6F9D           02037       movwf       wynik01
                      02038       
000974 519B           02039       movf        wynikh,w
000976 E008           02040       bz          procedura_sumowania_wyniku
                      02041       
000978 51B5           02042       movf      usrednianie_przez_co_mnoze,w
00097A 039B           02043       mulwf     wynikh
                      02044       
00097C 50F4           02045       movf        PRODH,w
00097E 6F9B           02046       movwf       wynikh
000980 50F3           02047       movf        PRODL,w
000982 279C           02048       addwf       wynik,f
                      02049       ;jeżeli przekroczyłem bajt to zwiększ o 1
                      02050       
000984 B0D8           02051       btfsc       STATUS,C
000986 2B9B           02052       incf        wynikh,f
                      02053          
000988                02054 procedura_sumowania_wyniku
000988 519D           02055          movf     wynik01,w
00098A 27AD           02056          addwf    pomiar_ulamek,f
                      02057 ;jezeli przekroczono pomiarL
00098C A0D8           02058          btfss    STATUS,C
00098E EFCD F004      02059          goto     nie_przekroczono_bajtu_ulamka
000992 0E01           02060          movlw    1
000994 27AC           02061          addwf    pomiarL,f
                      02062 
                      02063          
000996 B0D8           02064          btfsc    STATUS,C
000998 2BAB           02065          incf     pomiarH,f
                      02066          
00099A                02067 nie_przekroczono_bajtu_ulamka         
00099A 519C           02068          movf     wynik,w
00099C 27AC           02069          addwf    pomiarL,f
00099E B0D8           02070          btfsc    STATUS,C
0009A0 2BAB           02071          incf     pomiarH,f
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 59


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02072         
0009A2 519B           02073          movf     wynikh,w
0009A4 27AB           02074          addwf    pomiarH,f
0009A6 0012           02075          return
                      02076          
0009A8                02077 znow_kaz_mierzyc
                      02078 
                      02079 ;         bsf      STATUS,RP0
                      02080  ;        bcf      STATUS,RP1
                      02081 ;        movlw    0x1a
                      02082   ;       bsf      PIE1,ADIE
                      02083    ;      bcf      STATUS,RP0
                      02084     ;     bsf      ADCON0,2 
                      02085          ;clrf     TMR0L
                      02086          ;bcf      INTCON,T0IF
                      02087          ;bsf      INTCON,T0IE
Warning[205]: Found directive in column 1. (IF)
                      02088 IF (procek== 18f442)         
                      02089          
                      02090 ENDIF
Warning[205]: Found directive in column 1. (IF)
                      02091 IF (procek== 18f4320)         
                      02092          
Warning[205]: Found directive in column 1. (ENDIF)
                      02093 ENDIF
0009A8 82C2           02094          bsf      ADCON0,GO
0009AA 99A0           02095          bcf      markers2,wyslij_pomiar
                      02096          
0009AC 0012           02097          return
                      02098           
                      02099 ;na koniec dodaj do pomiarH i pomiarL i pomiar_ulamek
                      02100 
0009AE                02101 wysylanie_pomiaru
                      02102 
                      02103 ;jezeli na każdy pomiar wykonuje szereg pomiarów to nie wysyłaj jeszcze
0009AE 99A0           02104          bcf      markers2,wyslij_pomiar
0009B0 A19F           02105          btfss    markers,czy_usrednianie
0009B2 EFE0 F004      02106          goto     zapisz_do_pamieci
                      02107        
                      02108 
0009B6 ECB2 F004      02109          call     usrednianie_wartosci
                      02110 
0009BA 2FB3           02111          decfsz   ktora_probka,f
0009BC EFD4 F004      02112          goto     znow_kaz_mierzyc
                      02113          ;return        
0009C0                02114 zapisz_do_pamieci
                      02115 ;przed zapisem pomiaru w pamieci ulamki > 0x80 (tzn od 0.5 ) zamieniam na +1 do pomiarL 
                      02116 ;w przeciwnym wypadku pomijam
                      02117          ;movlw    0x81
                      02118          ;subwf    pomiar_ulamek,w
                      02119          ;btfss    STATUS,C
                      02120          ;goto     zapisz_starszy
                      02121          ;bcf      STATUS,C
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 60


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02122          ;movlw    1
                      02123          ;addwf    pomiarL,f
                      02124          ;btfsc    STATUS,C
                      02125          ;incf     pomiarH,f
                      02126 ;                                                              
                      02127          
                      02128          
                      02129          
                      02130          
0009C0 B3A1           02131          btfsc    markers3,znacznik_pomiaru_pradu
0009C2 EF5B F005      02132          goto     zapis_do_pamieci_prad
                      02133          
0009C6                02134 zapis_do_pamieci_temperatury  
                      02135 
                      02136                         ;                                         POPRAWKA temperatury
0009C6 6AE2           02137          clrf     FSR1H
0009C8 0ECE           02138          movlw    poprawka0
                      02139          
                      02140          
                      02141          ;ktora poprawka
0009CA 6EE1           02142          movwf    FSR1L
0009CC 51B4           02143          movf     ktory_kanal,w
0009CE 26E1           02144          addwf    FSR1L,f
0009D0 50E7           02145          movf     INDF1,w
                      02146          
                      02147 
0009D2 27AC           02148          addwf    pomiarL,f
                      02149          
                      02150          ;sprawdz czy poprawka jest ujemna
                      02151       ;tzn czy jest zaznaczony bit 7
                      02152       ;jezeli tak to nie sprawdzaj przekroczenia
0009D4 BEE7           02153         btfsc     INDF1,7
0009D6 EFEF F004      02154         goto      zapisz_do_pamieci_nie_sprawdzaj_przekroczenia
                      02155          ;jezeli przekroczylem to
                      02156          
0009DA B0D8           02157          btfsc    STATUS,C
0009DC 2BAB           02158          incf     pomiarH,f
                      02159          
Warning[208]: Label truncated at 32 characters. (zapisz_do_pamieci_nie_sprawdzaj_przekroczenia)
0009DE                02160 zapisz_do_pamieci_nie_sprawdzaj_przekroczenia
                      02161                         ;koniec poprawiania wyniku o blad kanalu pomiarowego i skalowanie czujnika
                      02162                         
                      02163 ;dopiero teraz zamieniam na wartość -512                        
                      02164 
                      02165 
                      02166 
                      02167 ;jednak przed odjęciem 512 sprawdzam czy nie ustawiono przesylu do komputera
                      02168 
0009DE                02169 zapisz_do_pamieci_czy_mam_send
0009DE A99F           02170          btfss       markers,czy_wysylac_pomiary_serial
0009E0 EF0B F005      02171          goto        zapisz_do_pamieci_juz_po_SERIAL
                      02172       
0009E4 9882           02173          bcf      port_CTS,znacznik_CTS
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 61


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02174 
                      02175                   
                      02176          
                      02177         
0009E6 98AB           02178          bcf      RCSTA,CREN
                      02179  
                      02180          
0009E8 EC8A F002      02181          call    sprawdz_czy_mozna_wysylac
                      02182          
0009EC 51AB           02183          movf    pomiarH,w
0009EE 0F30           02184          addlw    0x30
0009F0 6EAD           02185          movwf   TXREG
                      02186            
0009F2 EC8A F002      02187          call    sprawdz_czy_mozna_wysylac
                      02188          
                      02189         
0009F6 39AC           02190          swapf    pomiarL,w
0009F8 0B0F           02191          andlw    0x0f
0009FA ECDB F002      02192          call     zamien_na_hex
0009FE 6EAD           02193          movwf   TXREG
                      02194          
                      02195          
000A00 EC8A F002      02196          call    sprawdz_czy_mozna_wysylac
                      02197          
000A04 51AC           02198          movf     pomiarL,w
000A06 0B0F           02199          andlw    0x0f
000A08 ECDB F002      02200          call     zamien_na_hex
000A0C 6EAD           02201          movwf   TXREG     
                      02202          
                      02203 
000A0E EC8A F002      02204          call    sprawdz_czy_mozna_wysylac
                      02205          
000A12 0E2C           02206          movlw    _przecinek
                      02207         
000A14 6EAD           02208          movwf   TXREG     
                      02209          
                      02210 
000A16                02211 zapisz_do_pamieci_juz_po_SERIAL        
                      02212           ;                                         teraz odejmuje od starszego bajtu 0x02 
000A16 ECA7 F004      02213          call     odejmij_512_od_wyniku_sredniej
                      02214         
                      02215         
000A1A 0EB9           02216          movlw    pomiar0H
000A1C 6EE1           02217          movwf    FSR1L
                      02218                   
000A1E 51B4           02219          movf     ktory_kanal,w
000A20 26E1           02220          addwf    FSR1L,f
000A22 26E1           02221          addwf    FSR1L,f
                      02222                   
000A24 51AB           02223          movf     pomiarH,w         
000A26 6EE7           02224          movwf    INDF1
                      02225                               ;IF (czy_pomiary_na_ekran==1)  
                      02226                               ;sprawdz czy mam wyswietlac 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 62


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02227                               ;jezeli wszedlem do menu ekranu to nie wyswietlam temperatur
                      02228                                     
                      02229                                     ; btfss      markers,czy_wyswietlam_temp
                      02230                                     ; goto        bez_wyswietlania_temp1
                      02231 
                      02232                                     
                      02233                               ;         movf     INDF1,w
                      02234                                        ;tu wlaczam procedurę zamiany szesnastkowej wartości na dziesi
                            tną liczbę
                      02235                                        
                      02236                                        
                      02237                                ;        addlw    0x30
                      02238                                 ;       call     write_lcd
                      02239                                  ;      incf     linia2,f
                      02240                               ;ENDIF         
                      02241 
000A28                02242 bez_wyswietlania_temp1
000A28 2AE1           02243          incf     FSR1L,f
000A2A 51AC           02244          movf     pomiarL,w
                      02245                   
000A2C 6EE7           02246          movwf    INDF1
Warning[205]: Found directive in column 1. (IF)
                      02247 IF (czy_pomiary_na_ekran==1)   
                      02248 
000A2E AB9F           02249       btfss      markers,czy_wyswietlam_temp
000A30 EF59 F005      02250       goto        bez_wyswietlania_temp2
                      02251       
                      02252             
                      02253       ;sprawdz czy rejestr linia2 > 13
000A34 0E0C           02254       movlw       0x0c
                      02255       ; sprawdzam                  rejestr > W
000A36 6187           02256       cpfslt      linia2      
000A38 6B87           02257       clrf        linia2
                      02258       
                      02259       
000A3A                02260 nie_czysc_rejestru_polozenia  
                      02261   ;temperatury 0-3 na ekranie sa wyswietlane jezeli niezaznaczono bitu markers3,pokazuje_temperatury_47
                      02262       ;aby to sprawdzic dokonuje operacji odjecia od 3 - ktory_kanal
                      02263       
000A3A 0E04           02264       movlw       0x04
                      02265       ; sprawdzam                  rejestr > W
000A3C 61B4           02266       cpfslt        ktory_kanal
000A3E EF2A F005      02267       goto          sprawdz_czy_mam_wyswietlac_47       
                      02268  
                      02269       ;jezeli wynik wskazuje na pomiary na kanale 0 - 3 to sprawdz czy nie wlaczony jest bit 
                      02270       
000A42 BFA1           02271       btfsc       markers3,pokazuje_temperatury_47
000A44 EF59 F005      02272       goto        bez_wyswietlania_temp2
                      02273       
000A48 0E01           02274       movlw 1
                      02275       ;bit      0-1 ida na linie 2  -> 00000011
                      02276       ; ktory_kanal   > 1 to na linii3
000A4A 65B4           02277       cpfsgt  ktory_kanal
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 63


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000A4C EF3B F005      02278       goto         ustaw_linie_druga
                      02279       ;jezeli kanal 2-3
000A50 EF33 F005      02280       goto        ustaw_linie_trzecia
                      02281             
                      02282       
000A54                02283 sprawdz_czy_mam_wyswietlac_47
                      02284  ;jezeli wyswietlam kanal 4 -7
                      02285  ; i zaznaczono ten bit tzn ze mam teraz kanal 4, ktory mam wyswietlac na ekranie (pomiary czujnikow 4-7
                            )
                      02286  
000A54 AFA1           02287       btfss       markers3,pokazuje_temperatury_47
000A56 EF59 F005      02288       goto        bez_wyswietlania_temp2
                      02289       
000A5A 0E05           02290       movlw 5
                      02291       ;bit      0-1 ida na linie 2  -> 00000011
                      02292       ; ktory_kanal   > 5 to na linii3
000A5C 65B4           02293       cpfsgt  ktory_kanal
000A5E EF3B F005      02294       goto         ustaw_linie_druga
                      02295       ;jezeli kanal ma wartosc 6-7
000A62 EF33 F005      02296       goto        ustaw_linie_trzecia
                      02297       
                      02298       
000A66                02299 ustaw_linie_trzecia
000A66 EC32 F001      02300       call     check_busy
000A6A 0E90           02301          movlw    linia_trzecia
000A6C 2587           02302          addwf    linia2,w
000A6E ECF4 F000      02303          call      send      
000A72 EF43 F005      02304          goto     napisz_wartosc_temperatury
                      02305       
000A76                02306 ustaw_linie_druga      
000A76 EC32 F001      02307       call     check_busy
000A7A 0EC0           02308          movlw    linia_dolna
000A7C 2587           02309          addwf    linia2,w
000A7E ECF4 F000      02310          call      send
000A82 EF43 F005      02311          goto     napisz_wartosc_temperatury
                      02312          
                      02313  
                      02314          ;call     check_busy      
                      02315          ;call     check_busy
                      02316          ;swapf    INDF1,w
                      02317          ;andlw    0x0f
                      02318          ;call     zamien_na_hex
                      02319                          
                      02320          ;call     write_lcd
                      02321          
                      02322          ;call     check_busy
                      02323          ;movf     INDF1,w
                      02324          ;andlw    0x0f
                      02325          ;call     zamien_na_hex
                      02326          ;call     write_lcd
                      02327          ;call     check_busy
                      02328          ;movlw    _puste
                      02329          ;call     write_lcd
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 64


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02330          
                      02331          
                      02332          
000A86                02333 napisz_wartosc_temperatury         
000A86 50E7           02334       movf        INDF1,w
000A88 6F92           02335       movwf       tmp_hex
                      02336       
000A8A 06E1           02337       decf        FSR1L,f ; - FSR1L pokazuje teraz wartosc starszego bajtu liczby zamienianej
000A8C 50E7           02338       movf        INDF1,w
                      02339       
000A8E 6F93           02340       movwf       tmp_hex_H
                      02341       
000A90 BDA1           02342       btfsc       markers3,napisz_minus
000A92 6D92           02343       negf        tmp_hex
                      02344       
000A94 BDA1           02345       btfsc       markers3,napisz_minus
000A96 6D93           02346       negf        tmp_hex_H
                      02347       
000A98 5192           02348       movf        tmp_hex,w
                      02349       ;dziele przez 4
000A9A 0D40           02350       mullw       0x40
                      02351       
000A9C 50F3           02352       movf        PRODL,w
000A9E 6F9D           02353       movwf       wynik01
                      02354       
                      02355       ;temperatura jest w bajcie starszym
000AA0 50F4           02356       movf        PRODH,w
000AA2 6F92           02357       movwf       tmp_hex
                      02358       
000AA4 ECF8 F001      02359          call     hex2dec18
                      02360          
000AA8 EC33 F004      02361          call     wyswietl_cyfry_temperatury
                      02362          
                      02363          ;call     check_busy
                      02364          ;movlw    _linia_pionowa
                      02365          
                      02366          ;call     write_lcd
000AAC 9DA1           02367          bcf      markers3,napisz_minus
000AAE 0E08           02368          movlw    8
                      02369          
000AB0 2787           02370          addwf     linia2,f
                      02371          ;bcf      markers3,pokazuje_temperatury_47
Warning[205]: Found directive in column 1. (ENDIF)
                      02372 ENDIF         
                      02373 
000AB2                02374 bez_wyswietlania_temp2
                      02375 
000AB2 EFA2 F005      02376       goto  procedura_regulacji_dwustawnej
                      02377       
000AB6                02378 zapis_do_pamieci_prad
000AB6 6AE2           02379       clrf     FSR1H
000AB8 0ED6           02380       movlw    poprawka_prad1
                      02381          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 65


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02382          ;ktora poprawka
000ABA 6EE1           02383          movwf    FSR1L
000ABC 05D9           02384          decf     ktory_aktualnie_kanal_pradu,w
000ABE 26E1           02385          addwf    FSR1L,f
000AC0 50E7           02386          movf     INDF1,w
000AC2 27AC           02387          addwf    pomiarL,f
                      02388          ;jezeli przekroczylem to
000AC4 B0D8           02389          btfsc    STATUS,C
000AC6 2BAB           02390          incf     pomiarH,f
                      02391         ;movwf     
                      02392 
                      02393                   
000AC8 0EC9           02394          movlw    pomiar_prad1H        
000ACA 6EE1           02395          movwf    FSR1L
                      02396                   
000ACC 05D9           02397          decf     ktory_aktualnie_kanal_pradu,w
000ACE 26E1           02398          addwf    FSR1L,f
000AD0 26E1           02399          addwf    FSR1L,f
                      02400                   
000AD2 51AB           02401          movf     pomiarH,w         
000AD4 6EE7           02402          movwf    INDF1 
Warning[205]: Found directive in column 1. (IF)
                      02403 IF (czy_pomiary_na_ekran==1)  
                      02404 ;sprawdz czy mam wyswietlac 
                      02405 ;jezeli wszedlem do menu ekranu to nie wyswietlam temperatur
                      02406       
000AD6 AB9F           02407       btfss      markers,czy_wyswietlam_temp
000AD8 EF7A F005      02408       goto        bez_wyswietlania_pradu
                      02409 
000ADC EC32 F001      02410       call     check_busy
000AE0 0ED0           02411          movlw    linia_czwarta
000AE2 2589           02412          addwf    linia4,w
000AE4 ECF4 F000      02413          call      send
                      02414          
                      02415          
                      02416  
000AE8 EC32 F001      02417          call     check_busy
                      02418          ;movf     INDF1,w
                      02419          ;tu wlaczam procedurę zamiany szesnastkowej wartości na dziesiętną liczbę
                      02420          
                      02421          
                      02422          ;addlw    0x30
000AEC 0E20           02423          movlw    _puste
000AEE EC05 F001      02424          call     write_lcd
000AF2 2B89           02425          incf     linia4,f
Warning[205]: Found directive in column 1. (ENDIF)
                      02426 ENDIF         
                      02427 
000AF4                02428 bez_wyswietlania_pradu
                      02429 
                      02430          
000AF4 2AE1           02431       incf     FSR1L,f
000AF6 51AC           02432       movf     pomiarL,w
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 66


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02433                   
000AF8 6EE7           02434       movwf    INDF1    
                      02435       
Warning[205]: Found directive in column 1. (IF)
                      02436 IF (czy_pomiary_na_ekran==1)
                      02437 
000AFA AB9F           02438       btfss      markers,czy_wyswietlam_temp
000AFC EFA0 F005      02439       goto        bez_wyswietlania_pradu2
                      02440        
                      02441          ; call     check_busy
                      02442          ; swapf    INDF1,w
                      02443          ; andlw    0x0f
                      02444          ; call     zamien_na_hex
                      02445                          
                      02446          ; call     write_lcd
                      02447          
                      02448          ; call     check_busy
                      02449          ; movf     INDF1,w
                      02450          ; andlw    0x0f
                      02451          ; call     zamien_na_hex
                      02452          ; call     write_lcd
                      02453          ; call     check_busy
                      02454          ; movlw    _puste
                      02455          ; call     write_lcd
                      02456          ; incf     linia4,f
                      02457          ; incf     linia4,f
                      02458          ; incf     linia4,f
                      02459          
000B00 50E7           02460          movf     INDF1,w
000B02 6F92           02461          movwf       tmp_hex
000B04 6B93           02462       clrf        tmp_hex_H
000B06 6B98           02463       clrf        dec1
000B08 6B97           02464       clrf        dec10
000B0A ECF8 F001      02465       call        hex2dec18
                      02466        
                      02467 
000B0E EC32 F001      02468          call        check_busy
                      02469  
                      02470  ;i wyswietlic wszystkie cyfry
000B12 5196           02471       movf        dec100,w
000B14 0F30           02472       addlw       0x30
000B16 EC05 F001      02473       call        write_lcd      
000B1A EC32 F001      02474       call        check_busy
                      02475       
000B1E 5197           02476       movf        dec10,w      
000B20 0F30           02477       addlw       0x30
000B22 EC05 F001      02478       call        write_lcd      
                      02479       
000B26 EC32 F001      02480       call        check_busy
000B2A 5198           02481       movf        dec1,w
000B2C 0F30           02482       addlw       0x30
000B2E EC05 F001      02483       call        write_lcd      
                      02484       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 67


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000B32 EC32 F001      02485       call     check_busy
000B36 0E20           02486       movlw    _puste
000B38 EC05 F001      02487       call     write_lcd
                      02488          
000B3C 0E04           02489       movlw       4
000B3E 2789           02490          addwf    linia4,f
Warning[205]: Found directive in column 1. (ENDIF)
                      02491 ENDIF       
                      02492 
000B40                02493 bez_wyswietlania_pradu2
                      02494       
000B40 EF11 F006      02495       goto     sprawdz_czy_mam_dalej_mierzyc_prad
                      02496       
                      02497       
                      02498       
                      02499       
                      02500       
                      02501       
                      02502       
                      02503       
                      02504       ; tu jest   procedura regulacji kanalu 1
                      02505       
000B44                02506 procedura_regulacji_dwustawnej         
                      02507       
                      02508 ;jezeli ostatni kanal to wyslij wszystkie, jezeli nie ostatni to zmierz kolejny
000B44 A3A2           02509          btfss    markers_regulacja,reguluj1
000B46 EFD5 F005      02510          goto     procedura_regulacji_dwu_2
                      02511          
                      02512          
                      02513 ;jezeli mierze prad to nic nie sprawdzaj
                      02514 
                      02515      
                      02516 ;porownaj wartosc pomierzona z zadana
                      02517                   
                      02518 
                      02519 ;regulacja z 0 kanalu
                      02520          
                      02521          ;movf        ktory_kanal,w
                      02522          ;xorlw         0         
                      02523          ;btfsc          STATUS,Z
000B4A 51EE           02524          movf    ktory_czujnik_reguluje1,w
000B4C 63B4           02525          cpfseq   ktory_kanal
000B4E EFD5 F005      02526          goto           procedura_regulacji_dwu_2
                      02527          
                      02528                   ;tu musze poprawic prace regulatora
                      02529          
                      02530          ;chodzi o to zeby wlaczal moc kiedy temperatura spadnie ponizej temperatury zadanej - histereza
                      02531          
                      02532          
                      02533          ;tzn jezeli moc jest wylaczona
                      02534          
                      02535          ;to wlacz dopiero kiedy temperatura osiagnie wartosc t min
                      02536          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 68


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02537          
                      02538          ; czy moc jest teraz wlaczona?
                      02539          
                      02540          ;btfsc    
                      02541 
                      02542          
                      02543          
000B52 51AE           02544          movf     jaka_wartosc_regulujeH1,w
                      02545          ;pomiarh - jaka_wartosc_regulujeH
000B54 5DAB           02546          subwf    pomiarH,w
                      02547 ;sprawdz czy to samo czy wieksze
000B56 B4D8           02548          btfsc    STATUS,Z
000B58 EFB8 F005      02549          goto     sa_rowne_sprawdz_Lbajt
000B5C A0D8           02550          btfss    STATUS,C 
000B5E EFB4 F005      02551          goto     zalacz_grzanie
                      02552 ;tzn reguluj<pomiaru w starszym bajcie wiec wylacz grzanie
000B62 85A2           02553          bsf      markers_regulacja,wylacz_moc1
000B64 EFD5 F005      02554          goto     procedura_regulacji_dwu_2
                      02555          
000B68                02556 zalacz_grzanie    
                      02557 ;jezeli jakikolwiek pomiar wykazal ze trzeba wylaczyc to nie wlaczaj grzania
                      02558 ;        
000B68 A5A2           02559          btfss    markers_regulacja,wylacz_moc1
000B6A 81A2           02560          bsf      markers_regulacja,zalacz_moc1
                      02561          
000B6C EFD5 F005      02562          goto     procedura_regulacji_dwu_2
                      02563 
                      02564                            
000B70                02565 sa_rowne_sprawdz_Lbajt
                      02566 ;tak samo
                      02567          ;movf     histereza,w
                      02568          ;sprawdz czy moc wylaczona - jezeli tak to wlacz 1  stopien nizej czyli 4 nizej
                      02569 ;jezeli jest wlaczona energia to dodaj wartosc histerezy tj wylacza pozniej
                      02570          ;btfsc    latch_moc,lampka2
000B70 B081           02571          btfsc    port_triak,triak1
000B72 EFC7 F005      02572          goto     regulacja_dwu_moc_ON
                      02573          
                      02574          
000B76                02575 regulacja_dwu_moc_OFF         
                      02576          ;jeżeli moc jest wyłączona w tej chwili to włącz ją dopiero gdy 
                      02577          ;pomiar będzie mniejszy niż temperatura zadana 
                      02578          
                      02579          ;histereza dolna
000B76 51EA           02580          movf     histereza_R1_2,w
000B78 5DAF           02581          subwf     jaka_wartosc_regulujeL1,w
                      02582              
                      02583          
000B7A 5DAC           02584          subwf    pomiarL,w
                      02585 ;sprawdz czy to samo czy wieksze
000B7C B4D8           02586          btfsc    STATUS,Z
000B7E EFB4 F005      02587          goto     zalacz_grzanie
                      02588          
                      02589          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 69


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02590 ; jeżeli po odjęciu nie ma C w Statusie, tzn że pomiarL < pomiaru-histerezy
                      02591          
000B82 A0D8           02592          btfss    STATUS,C 
000B84 EFB4 F005      02593          goto     zalacz_grzanie
                      02594 ;tzn reguluj>pomiaru w mlodszym bajcie wiec wlacz grzanie
000B88 85A2           02595          bsf      markers_regulacja,wylacz_moc1
000B8A EFD5 F005      02596          goto     procedura_regulacji_dwu_2
                      02597          
                      02598          
000B8E                02599 regulacja_dwu_moc_ON
                      02600          ;jeżeli moc jest włączona w tej chwili to wyłącz ją dopiero gdy 
                      02601          ;pomiar będzie większy niż temperatura zadana + histereza zadana
                      02602          
                      02603          ;histereza górna
000B8E 51E9           02604          movf     histereza_R1_1,w
000B90 25AF           02605          addwf    jaka_wartosc_regulujeL1,w
                      02606          
                      02607          ; w WREG jest wartosc  histereza + ustawienie wartosci regulacji
                      02608          
                      02609        
000B92 5DAC           02610          subwf    pomiarL,w  
                      02611          ;w WREG  jest wartosc   pomiarL  -  (histereza + ustawienie wartosci )
                      02612 ;sprawdz czy to samo czy wieksze
000B94 B4D8           02613          btfsc    STATUS,Z
000B96 EFD0 F005      02614          goto     regulacja_dwu_moc_ON_wylacz
                      02615 
                      02616          
                      02617          
                      02618          ;C pojawia sie tylko gdy 
                      02619          
000B9A A0D8           02620          btfss    STATUS,C 
000B9C EFB4 F005      02621          goto     zalacz_grzanie
                      02622 ;tzn reguluj<pomiaru w mlodszym bajcie wiec wylacz grzanie
                      02623 
000BA0                02624 regulacja_dwu_moc_ON_wylacz
000BA0 85A2           02625          bsf      markers_regulacja,wylacz_moc1
000BA2 EFD5 F005      02626          goto     procedura_regulacji_dwu_2                         
000BA6                02627 sa_rowne_nic_nie_rob
000BA6 EFB4 F005      02628          goto     zalacz_grzanie    
                      02629          ;goto     procedura_regulacji_dwu_2       
                      02630 
                      02631          
                      02632          
                      02633          
                      02634          
                      02635          
                      02636          
                      02637          
000BAA                02638 procedura_regulacji_dwu_2         
                      02639       
                      02640 ;jezeli ostatni kanal to wyslij wszystkie, jezeli nie ostatni to zmierz kolejny
000BAA A7A2           02641          btfss    markers_regulacja,reguluj2
000BAC EF08 F006      02642          goto     sprawdz_czy_mam_dalej_mierzyc
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 70


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02643          
                      02644          
000BB0 51EF           02645          movf    ktory_czujnik_reguluje2,w
000BB2 63B4           02646          cpfseq   ktory_kanal
000BB4 EF08 F006      02647          goto           sprawdz_czy_mam_dalej_mierzyc
                      02648          
                      02649          
                      02650          
000BB8 51B0           02651          movf     jaka_wartosc_regulujeH2,w
                      02652          ;pomiarh - jaka_wartosc_regulujeH
000BBA 5DAB           02653          subwf    pomiarH,w
                      02654 ;sprawdz czy to samo czy wieksze
000BBC B4D8           02655          btfsc    STATUS,Z
000BBE EFEB F005      02656          goto     sa_rowne_sprawdz_Lbajt2
000BC2 A0D8           02657          btfss    STATUS,C 
000BC4 EFE7 F005      02658          goto     zalacz_grzanie2
                      02659 ;tzn reguluj<pomiaru w starszym bajcie wiec wylacz grzanie
000BC8 8BA2           02660          bsf      markers_regulacja,wylacz_moc2
000BCA EF08 F006      02661          goto     sprawdz_czy_mam_dalej_mierzyc
                      02662          
000BCE                02663 zalacz_grzanie2    
                      02664 ;jezeli jakikolwiek pomiar wykazal ze trzeba wylaczyc to nie wlaczaj grzania
                      02665 ;        
000BCE ABA2           02666          btfss    markers_regulacja,wylacz_moc2
000BD0 89A2           02667          bsf      markers_regulacja,zalacz_moc2
                      02668          
000BD2 EF08 F006      02669          goto     sprawdz_czy_mam_dalej_mierzyc
                      02670 
                      02671                            
000BD6                02672 sa_rowne_sprawdz_Lbajt2
                      02673 
000BD6 B281           02674          btfsc    port_triak,triak2
000BD8 EFFA F005      02675          goto     regulacja_dwu_moc_ON2
                      02676          
                      02677          
000BDC                02678 regulacja_dwu_moc_OFF2         
                      02679          ;jeżeli moc jest wyłączona w tej chwili to włącz ją dopiero gdy 
                      02680          ;pomiar będzie mniejszy niż temperatura zadana 
                      02681          
                      02682          ;histereza dolna
000BDC 51EC           02683          movf     histereza_R2_2,w
000BDE 5DB1           02684          subwf     jaka_wartosc_regulujeL2,w
                      02685              
                      02686          
000BE0 5DAC           02687          subwf    pomiarL,w
                      02688 ;sprawdz czy to samo czy wieksze
000BE2 B4D8           02689          btfsc    STATUS,Z
000BE4 EFE7 F005      02690          goto     zalacz_grzanie2
                      02691          
                      02692          
                      02693 ; jeżeli po odjęciu nie ma C w Statusie, tzn że pomiarL < pomiaru-histerezy
                      02694          
000BE8 A0D8           02695          btfss    STATUS,C 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 71


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000BEA EFE7 F005      02696          goto     zalacz_grzanie2
                      02697 ;tzn reguluj>pomiaru w mlodszym bajcie wiec wlacz grzanie
000BEE 8BA2           02698          bsf      markers_regulacja,wylacz_moc2
000BF0 EF08 F006      02699          goto     sprawdz_czy_mam_dalej_mierzyc
                      02700          
                      02701          
000BF4                02702 regulacja_dwu_moc_ON2
                      02703          ;jeżeli moc jest włączona w tej chwili to wyłącz ją dopiero gdy 
                      02704          ;pomiar będzie większy niż temperatura zadana + histereza zadana
                      02705          
                      02706          ;histereza górna
000BF4 51EB           02707          movf     histereza_R2_1,w
000BF6 25B1           02708          addwf    jaka_wartosc_regulujeL2,w
                      02709          
                      02710          ; w WREG jest wartosc  histereza + ustawienie wartosci regulacji
                      02711          
                      02712        
000BF8 5DAC           02713          subwf    pomiarL,w  
                      02714          ;w WREG  jest wartosc   pomiarL  -  (histereza + ustawienie wartosci )
                      02715 ;sprawdz czy to samo czy wieksze
000BFA B4D8           02716          btfsc    STATUS,Z
000BFC EF03 F006      02717          goto     regulacja_dwu_moc_ON_wylacz2
                      02718 
                      02719          
                      02720          
                      02721          ;C pojawia sie tylko gdy 
                      02722          
000C00 A0D8           02723          btfss    STATUS,C 
000C02 EFE7 F005      02724          goto     zalacz_grzanie2
                      02725 ;tzn reguluj<pomiaru w mlodszym bajcie wiec wylacz grzanie
                      02726 
000C06                02727 regulacja_dwu_moc_ON_wylacz2
000C06 8BA2           02728          bsf      markers_regulacja,wylacz_moc2
000C08 EF08 F006      02729          goto     sprawdz_czy_mam_dalej_mierzyc                         
000C0C                02730 sa_rowne_nic_nie_rob2
000C0C EFE7 F005      02731          goto     zalacz_grzanie2    
                      02732          
                      02733          
                      02734          ;goto     sprawdz_czy_mam_dalej_mierzyc       
                      02735 
                      02736          
                      02737          
                      02738          
                      02739          
                      02740          
                      02741          
000C10                02742 sprawdz_czy_mam_dalej_mierzyc
                      02743 ;sprawdzam tu czy mam wykonac pomiary dla kolejnego 
                      02744 ;kanalu
                      02745 ;tu czyszcze zawartosc rejestrow pomiaru
000C10 6BAB           02746          clrf     pomiarH
000C12 6BAC           02747          clrf     pomiarL
000C14 6BAD           02748          clrf     pomiar_ulamek
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 72


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02749          
                      02750          
000C16 2FA7           02751          decfsz   ktory_kanal_mierze,f
000C18 EF8B F006      02752          goto     zmierz_nastepny_czujnik_temperatury
                      02753 
                      02754 ;zmierz jeszcze prady          
                      02755          
000C1C A1A1           02756          btfss    markers3,pomiary_pradu
000C1E EF1B F006      02757          goto     wykonano_pomiary_wszystkich_kanalow
                      02758         
                      02759         ;jeszcze mierze prady jezeli ustawiono bit pomiary_pradu
                      02760          
Warning[208]: Label truncated at 32 characters. (sprawdz_czy_mam_dalej_mierzyc_prad)
000C22                02761 sprawdz_czy_mam_dalej_mierzyc_prad
                      02762 
                      02763          ;sprawdz czy rejestr przechowujący aktualne wskazanie mierzonej temperatury nie wskazuje 0
000C22 51D9           02764          movf     ktory_aktualnie_kanal_pradu,w;zwiększam o jeden żeby skala obydwu rejestrów była i
                            dentyczna
                      02765          
000C24 19D8           02766          xorwf    jak_duzo_kanalow_pradu,w
                      02767          ;jezeli 0 tzn ze juz zmierzylem co trzeba
000C26 B4D8           02768          btfsc    STATUS,Z
000C28 EF1B F006      02769          goto     wykonano_pomiary_wszystkich_kanalow
                      02770          
                      02771       ;wlaczam pomiar pradu na 1 kanale
                      02772       
                      02773       ;do kanalu aktualnego trzeba dodać 8*2 by uzyskac kanal pradowy
                      02774       ;bo aby zmierzyc 1 kanal pradu to z AN0 przeskok do AN2
                      02775       ;z kanalu AN2 do AN4
                      02776       
000C2C 0E08           02777       movlw    8
                      02778             
000C2E 26C2           02779       addwf   ADCON0,f
000C30 2BD9           02780       incf     ktory_aktualnie_kanal_pradu,f
                      02781       ;movlw    b'00111100'
                      02782       ;andwf    ADCON0,w
000C32 EF86 F006      02783       goto  zmierz_prad
                      02784       
                      02785       ;goto     zmierz_nastepny_czujnik_temperatury   
                      02786          
Warning[208]: Label truncated at 32 characters. (wykonano_pomiary_wszystkich_kanalow)
000C36                02787 wykonano_pomiary_wszystkich_kanalow
                      02788 ;jezeli juz skonczylem wszystkie mierzyc to sprawdz czy mam wlaczyc grzanie
                      02789 ;jezeli ustawiono bit o nie wlaczaniu to olej
                      02790          
                      02791          
000C36 A3A2           02792          btfss    markers_regulacja,reguluj1
000C38 EF2B F006      02793          goto     powlaczaj_moc_reg2
                      02794          
000C3C B5A2           02795          btfsc    markers_regulacja,wylacz_moc1
000C3E EF28 F006      02796          goto    wylaczam_moc
                      02797          
000C42 A1A2           02798          btfss    markers_regulacja,zalacz_moc1
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 73


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000C44 EF28 F006      02799          goto    wylaczam_moc
                      02800          
000C48 A081           02801          btfss    port_triak,triak1
000C4A 8081           02802          bsf      port_triak,triak1
                      02803          
000C4C EF29 F006      02804          goto    koncz_z_moca
000C50                02805 wylaczam_moc
000C50 9081           02806          bcf      port_triak,triak1
                      02807          
                      02808          
                      02809          
                      02810          
000C52                02811 koncz_z_moca
000C52 91A2           02812          bcf      markers_regulacja,zalacz_moc1
000C54 95A2           02813          bcf      markers_regulacja,wylacz_moc1
                      02814          
                      02815          
                      02816          
                      02817          
                      02818          
                      02819          
                      02820          
                      02821          
000C56                02822 powlaczaj_moc_reg2         
000C56 A7A2           02823          btfss    markers_regulacja,reguluj2
000C58 EF3B F006      02824          goto     koniec_mierzenia
                      02825          
000C5C BBA2           02826          btfsc    markers_regulacja,wylacz_moc2
000C5E EF38 F006      02827          goto    wylaczam_moc2
                      02828          
000C62 A9A2           02829          btfss    markers_regulacja,zalacz_moc2
000C64 EF38 F006      02830          goto    wylaczam_moc2
                      02831          
000C68 A281           02832          btfss    port_triak,triak2
000C6A 8281           02833          bsf      port_triak,triak2
                      02834          
000C6C EF39 F006      02835          goto    koncz_z_moca2
                      02836          
000C70                02837 wylaczam_moc2
000C70 9281           02838          bcf      port_triak,triak2
                      02839          
000C72                02840 koncz_z_moca2
000C72 99A2           02841          bcf      markers_regulacja,zalacz_moc2
000C74 9BA2           02842          bcf      markers_regulacja,wylacz_moc2
                      02843 
                      02844 
                      02845 
                      02846          
                      02847                           ;juz wszystkie kanaly i wysylaj pomiary
000C76                02848 koniec_mierzenia
                      02849 
                      02850  
                      02851 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 74


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;koniec wysylania pomiarow 
                      02852 
                      02853 
                      02854 
                      02855 
                      02856          ;jezeli mierzylem prady to sprawdz to, maxymalnie dwa prady podaje
000C76 A1A1           02857          btfss    markers3,pomiary_pradu
000C78 EF76 F006      02858          goto     juz_wysylac_znak_LF
                      02859          
000C7C                02860 sprawdz_RTS_prad
                      02861          ;btfss    port_RTS,znacznik_RTS
                      02862          ;goto     sprawdz_RTS_prad
                      02863       
                      02864       ;jak duzo mialem mierzyc pradow
000C7C EC8A F002      02865          call    sprawdz_czy_mozna_wysylac
000C80 0E69           02866          movlw    _i
                      02867         
000C82 6EAD           02868          movwf   TXREG    
000C84 EC8A F002      02869          call    sprawdz_czy_mozna_wysylac
                      02870          
                      02871          
                      02872          
000C88 51C9           02873          movf     pomiar_prad1H,w
000C8A 0F30           02874          addlw    0x30
000C8C 6EAD           02875          movwf   TXREG        
                      02876          
000C8E EC8A F002      02877          call    sprawdz_czy_mozna_wysylac
                      02878          
000C92 39CA           02879          swapf     pomiar_prad1L,w
000C94 0B0F           02880          andlw    0x0f
000C96 ECDB F002      02881          call     zamien_na_hex
000C9A 6EAD           02882          movwf   TXREG
                      02883                   
000C9C EC8A F002      02884          call    sprawdz_czy_mozna_wysylac
                      02885          
000CA0 51CA           02886          movf    pomiar_prad1L,w
000CA2 0B0F           02887          andlw    0x0f
000CA4 ECDB F002      02888          call     zamien_na_hex
000CA8 6EAD           02889          movwf   TXREG   
                      02890          
000CAA EC8A F002      02891          call    sprawdz_czy_mozna_wysylac
                      02892          
                      02893          ;czy mialem mierzyc dwa prady czy tylko 1
                      02894          ;movf     jak_duzo_kanalow_pradu,w
                      02895          ;xorlw    2
                      02896          ;btfss    STATUS,Z   
                      02897          ;goto     juz_wysylac_znak_LF 
                      02898 
                      02899          
                      02900          
000CAE 0E2C           02901          movlw    _przecinek
                      02902         
000CB0 6EAD           02903          movwf   TXREG    
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 75


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000CB2 EC8A F002      02904          call    sprawdz_czy_mozna_wysylac
                      02905          
000CB6 0E69           02906          movlw    _i
                      02907         
000CB8 6EAD           02908          movwf   TXREG    
000CBA EC8A F002      02909          call    sprawdz_czy_mozna_wysylac
                      02910          
000CBE 51CB           02911          movf     pomiar_prad2H,w
000CC0 0F30           02912          addlw    0x30
000CC2 6EAD           02913          movwf   TXREG        
                      02914          
000CC4 EC8A F002      02915          call    sprawdz_czy_mozna_wysylac
                      02916          
000CC8 39CC           02917          swapf     pomiar_prad2L,w
000CCA 0B0F           02918          andlw    0x0f
000CCC ECDB F002      02919          call     zamien_na_hex
000CD0 6EAD           02920          movwf   TXREG
                      02921                   
000CD2 EC8A F002      02922          call    sprawdz_czy_mozna_wysylac
                      02923          
000CD6 51CC           02924          movf    pomiar_prad2L,w
000CD8 0B0F           02925          andlw    0x0f
000CDA ECDB F002      02926          call     zamien_na_hex
000CDE 6EAD           02927          movwf   TXREG     
000CE0 EC8A F002      02928          call    sprawdz_czy_mozna_wysylac
                      02929          
000CE4 0E2C           02930           movlw    _przecinek
                      02931         
000CE6 6EAD           02932          movwf   TXREG    
000CE8 EC8A F002      02933          call    sprawdz_czy_mozna_wysylac
                      02934          
                      02935 ;jezeli moc zalaczona wyslij 1,
                      02936 ;jezeli wylaczona wyslik 0,
                      02937          
                      02938          ;call    sprawdz_czy_mozna_wysylac
                      02939          
                      02940          ;btfsc    portlampka2,lampka2
                      02941          ;movlw    0x31
                      02942          
                      02943          ;btfss    portlampka2,lampka2
                      02944          ;movlw    0x30
                      02945          
000CEC                02946 juz_wysylac_znak_LF         
                      02947          ;movwf   TXREG
                      02948          ;wysylam znak konca linii
000CEC EC8A F002      02949          call    sprawdz_czy_mozna_wysylac
000CF0 0E0A           02950          movlw    znak_lf
000CF2 6EAD           02951          movwf   TXREG
                      02952          
000CF4 88AB           02953          bsf      RCSTA,CREN 
000CF6 0000           02954          nop
000CF8 0000           02955          nop
                      02956          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 76


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000CFA 8882           02957          bsf      port_CTS,znacznik_CTS
                      02958          
                      02959          
000CFC                02960 koniec_pomiarow
                      02961 
000CFC 6BAB           02962          clrf     pomiarH
000CFE 6BAC           02963          clrf     pomiarL
000D00 6BAD           02964          clrf     pomiar_ulamek
                      02965 
000D02 859F           02966          bsf      markers,pomiary_zrobione
000D04 99A0           02967          bcf      markers2,wyslij_pomiar
000D06 93A1           02968          bcf   markers3,znacznik_pomiaru_pradu
000D08 6B89           02969          clrf     linia4
000D0A 0012           02970          return         
                      02971  
                      02972 
000D0C                02973 zmierz_prad
000D0C 51B2           02974       movf     jak_duzo_probek,w
000D0E 6FB3           02975       movwf    ktora_probka
000D10 83A1           02976       bsf   markers3,znacznik_pomiaru_pradu
000D12 EF9D F006      02977       goto     zmierz_nastepny_nie_3
                      02978       
Warning[208]: Label truncated at 32 characters. (zmierz_nastepny_czujnik_temperatury)
000D16                02979 zmierz_nastepny_czujnik_temperatury
                      02980 ;tzn kanal analogowy ten sam, ale zmienia sie ustawienie multipleksera
000D16 2BB4           02981       incf     ktory_kanal,f
000D18 51B2           02982       movf     jak_duzo_probek,w
000D1A 6FB3           02983       movwf    ktora_probka
                      02984       ;movf     port_multiplekser,w
                      02985 ;czyszcze aktualne ustawienia 
                      02986 ;jezeli byl tu b'01010001'     
                      02987       ;andlw    b'11111000'
                      02988 ;w wyniku mamy b'01010000'      
                      02989       ;addwf    ktory_kanal,w
000D1C 2A8B           02990       incf  latch_multiplekser,f
                      02991       ;movwf    latch_multiplekser   
000D1E EF9D F006      02992       goto     zmierz_nastepny_nie_3
                      02993       
000D22                02994 zmierz_nastepny_kanal
                      02995 ;zwiekaszam na kolejne wejscie  multipleksera
                      02996             
000D22 2BB4           02997          incf     ktory_kanal,f
000D24 51B2           02998          movf     jak_duzo_probek,w
000D26 6FB3           02999          movwf    ktora_probka
000D28 50C2           03000          movf     ADCON0,w
                      03001 ;musze zwiekszyc o jeden ten wycinek bitowy
                      03002 ;b'xx000xxx' - czyli nawet nie starszy 4 bit
                      03003 ;tylko cos w srodku
                      03004 ;aby to zrobic stosuje prosty wybieg + 8 do ADCON0
                      03005 
                      03006 ;dla 18f4x20 mamy troszke zmian
                      03007 ;ADCON0  wyglada ;b'xx0000xx'
Warning[205]: Found directive in column 1. (IF)
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 77


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03008 IF (procek == 18f442)
                      03009          addlw    8
                      03010          movwf    ADCON0
                      03011          movlw    b'00111000'
                      03012          andwf    ADCON0,w
                      03013          xorlw    b'00011000'
                      03014          bnz      zmierz_nastepny_nie_3
                      03015 ;drugi raz zwiekszam ADCON0 dla pominiecia 3 kanalu         
                      03016          movlw    8
                      03017          addwf    ADCON0,f
                      03018 ENDIF
                      03019 
Warning[205]: Found directive in column 1. (IF)
                      03020 IF (procek == 18f4320)
000D2A 0F04           03021          addlw    4
000D2C 6EC2           03022          movwf    ADCON0
000D2E 0E3C           03023          movlw    b'00111100'
000D30 14C2           03024          andwf    ADCON0,w
000D32 0A0C           03025          xorlw    b'00001100'
000D34 E102           03026          bnz      zmierz_nastepny_nie_3
                      03027 ;drugi raz zwiekszam ADCON0 dla pominiecia 3 kanalu         
000D36 0E04           03028          movlw    4
000D38 26C2           03029          addwf    ADCON0,f
Warning[205]: Found directive in column 1. (ENDIF)
                      03030 ENDIF
                      03031          
000D3A                03032 zmierz_nastepny_nie_3
                      03033 ;wlaczam pomiar i przerwanie
                      03034          
000D3A 8C9D           03035          bsf      PIE1,ADIE
                      03036          
                      03037 ;rozpocznij pomiar      
                      03038 ;wedlug opisu procka tu trzeba czekac okolo 20-30us  
                      03039 ;dla pewnosci bede czekal 120us wykozystujac TMR2
                      03040 ;czyszcze obecny TMR2
000D3C 6BAB           03041          clrf     pomiarH
000D3E 6BAC           03042          clrf     pomiarL
000D40 6BAD           03043          clrf     pomiar_ulamek
000D42 6AD6           03044          clrf     TMR0L
Warning[205]: Found directive in column 1. (IF)
                      03045 IF (procek == 18f442)
                      03046          bcf      INTCON,T0IF
                      03047          bsf      INTCON,T0IE
                      03048 ENDIF
Warning[205]: Found directive in column 1. (IF)
                      03049 IF (procek == 18f4320)
000D44 94F2           03050          bcf      INTCON,TMR0IF
000D46 8AF2           03051          bsf      INTCON,TMR0IE
Warning[205]: Found directive in column 1. (ENDIF)
                      03052 ENDIF
                      03053          
                      03054          ;clrf     TMR2
                      03055          ;bsf    T2CON,TMR2ON
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 78


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03056         
                      03057 ;tzn wlaczam przerwanie TMR2
                      03058          ;bsf      STATUS,RP0
                      03059          ;bsf     PIE1,TMR2IE
                      03060          ;bcf      STATUS,RP0
                      03061 ;przetestowanie czy dobry czas  
                      03062 ;          bsf     PORTC,2         
000D48 99A0           03063          bcf      markers2,wyslij_pomiar
000D4A 0012           03064          return   
                      03065     
                      03066     
                      03067     
                      03068     
                      03069     
                      03070     
                      03071     
                      03072     
                      03073 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;procedury 
                            klawiszy
000D4C                03074 wlacz_przerwanie_tmr3
                      03075 
000D4C 92A0           03076       bcf   PIE2,TMR3IE
000D4E 6AB3           03077       clrf  TMR3H
000D50 6AB2           03078       clrf  TMR3L
000D52 92A1           03079       bcf   PIR2,TMR3IF
                      03080       
000D54 82A0           03081       bsf   PIE2,TMR3IE
                      03082 
000D56 0012           03083       return
                      03084       
000D58                03085 wcisnieto_back
000D58 B9A1           03086       btfsc   markers3,wcisnieto_klawisz
000D5A 0012           03087       return
                      03088       
000D5C 89A1           03089       bsf   markers3,wcisnieto_klawisz
000D5E 6B99           03090       clrf  stan_key
000D60 8199           03091       bsf   stan_key,mamy_back
                      03092       
000D62 EFA6 F006      03093       goto  wlacz_przerwanie_tmr3
                      03094       
                      03095       
                      03096 
                      03097       
                      03098       
000D66                03099 wcisnieto_down
                      03100 ;jeżeli zaznaczono że upłynął czas oczekiwania to wybierz procedurę zmiany      
000D66 B59E           03101       btfsc   znaczniki,czy_moge_juz_zmieniac
000D68 EFFE F006      03102       goto  wykryto_down
                      03103       
                      03104       ;goto    wykryto_down_zmiana_opcji
                      03105       
000D6C B9A1           03106       btfsc   markers3,wcisnieto_klawisz
000D6E 0012           03107       return
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 79


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03108       
000D70 89A1           03109       bsf   markers3,wcisnieto_klawisz
000D72 6B99           03110       clrf  stan_key
000D74 8399           03111       bsf   stan_key,mamy_down
                      03112       
                      03113       ;btfsc       pozycja_menu,zmiana_opcji
                      03114       ;goto        sprawdz_czy_wlaczyc_szybka_zmiane
                      03115       
000D76 EFDF F006      03116       goto        ustaw_sprawdzanie_szybkiej_zmiany
                      03117       
000D7A EFA6 F006      03118       goto  wlacz_przerwanie_tmr3
                      03119 
                      03120       
000D7E                03121 wcisnieto_up
000D7E B59E           03122       btfsc   znaczniki,czy_moge_juz_zmieniac
000D80 EFD4 F008      03123       goto        wykryto_up
                      03124       ;goto    wykryto_up_zmiana_opcji
                      03125       
000D84 B9A1           03126       btfsc   markers3,wcisnieto_klawisz
000D86 0012           03127       return
                      03128       
000D88 89A1           03129       bsf   markers3,wcisnieto_klawisz
000D8A 6B99           03130       clrf  stan_key
000D8C 8599           03131       bsf   stan_key,mamy_up
                      03132       
                      03133 ;jeżeli klawisz up wcisnieto w momencie gdy uzytkownik wybral juz zmiane wartosci
                      03134       ;btfsc       pozycja_menu,zmiana_opcji
                      03135       ;goto        sprawdz_czy_wlaczyc_szybka_zmiane
                      03136       
000D8E EFDF F006      03137       goto        ustaw_sprawdzanie_szybkiej_zmiany
                      03138       
000D92 EFA6 F006      03139       goto        wlacz_przerwanie_tmr3
                      03140       
Warning[208]: Label truncated at 32 characters. (sprawdz_czy_wlaczyc_szybka_zmiane)
000D96                03141 sprawdz_czy_wlaczyc_szybka_zmiane
                      03142 ;jest w menu na pozycji     
                      03143 ;opcja_odstep
                      03144 ;opcja_ustaw_temp
                      03145 
000D96 0E02           03146       movlw       opcja_odstep
000D98 63E4           03147       cpfseq      numer_opcji
000D9A EFCB F006      03148       goto        sprawdz_czy_wlaczyc_szybka_zmiane2
                      03149 
000D9E EFDF F006      03150       goto        ustaw_sprawdzanie_szybkiej_zmiany
                      03151       
Warning[208]: Label truncated at 32 characters. (sprawdz_czy_wlaczyc_szybka_zmiane2)
Error[116]  : Address label duplicated or different in second pass (sprawdz_czy_wlaczyc_szybka_zmian)
000DA2                03152 sprawdz_czy_wlaczyc_szybka_zmiane2      
000DA2 0E05           03153       movlw       opcja_ustaw_temp_R1
000DA4 63E4           03154       cpfseq      numer_opcji
000DA6 EFCB F006      03155       goto        sprawdz_czy_wlaczyc_szybka_zmiane3
                      03156 
000DAA EFDF F006      03157       goto        ustaw_sprawdzanie_szybkiej_zmiany
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 80


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03158       
Warning[208]: Label truncated at 32 characters. (sprawdz_czy_wlaczyc_szybka_zmiane3)
Error[116]  : Address label duplicated or different in second pass (sprawdz_czy_wlaczyc_szybka_zmian)
000DAE                03159 sprawdz_czy_wlaczyc_szybka_zmiane3
000DAE 0E06           03160       movlw       opcja_ustaw_temp_R2
000DB0 63E4           03161       cpfseq      numer_opcji
000DB2 EFCB F006      03162       goto        sprawdz_czy_wlaczyc_szybka_zmiane4
                      03163 
000DB6 EFDF F006      03164       goto        ustaw_sprawdzanie_szybkiej_zmiany
                      03165       
Warning[208]: Label truncated at 32 characters. (sprawdz_czy_wlaczyc_szybka_zmiane4)
Error[116]  : Address label duplicated or different in second pass (sprawdz_czy_wlaczyc_szybka_zmian)
000DBA                03166 sprawdz_czy_wlaczyc_szybka_zmiane4
000DBA EFA6 F006      03167       goto  wlacz_przerwanie_tmr3
                      03168  
Warning[208]: Label truncated at 32 characters. (ustaw_sprawdzanie_szybkiej_zmiany)
000DBE                03169 ustaw_sprawdzanie_szybkiej_zmiany
                      03170 ;jak długo trzymam przycisk zanim zaczne zmieniac wartości
000DBE 0E04           03171       movlw       dlugosc_oczekiwania_na_zmiane
000DC0 6FE6           03172       movwf       szybka_zmiana_wartosci
                      03173 ;zaznaczam że procedury sprawdzają zmianę opcji w czasie trzymania przycisku      
000DC2 8F9F           03174       bsf         markers,trzymanie_klawisza
000DC4 EFA6 F006      03175       goto  wlacz_przerwanie_tmr3
                      03176  
000DC8                03177 wcisnieto_enter
000DC8 B9A1           03178       btfsc   markers3,wcisnieto_klawisz
000DCA 0012           03179       return
                      03180       
000DCC 89A1           03181       bsf   markers3,wcisnieto_klawisz
000DCE 6B99           03182       clrf  stan_key
000DD0 8799           03183       bsf   stan_key,mamy_enter
                      03184       
000DD2 EFA6 F006      03185       goto  wlacz_przerwanie_tmr3
                      03186 
                      03187 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;                       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            ;;;;;;;;                                BACK
000DD6                03188 wykryto_back
                      03189       ;co sie dzieje jezeli wykryje ze wcisnieto i puszczono klawisz cofnij
                      03190       
                      03191       ;jezeli jestem w menu to wyswietl ponownie czas i temperatury
                      03192       ;movf        pozycja_menu,w
                      03193       ;bz         wykryto_back_nic_nie_rob
                      03194       
                      03195 ;jezeli pozycja menu jest różna od 0 to po nacisnieciu klawisza back
                      03196 ;następuje powrót do ekranu z pomiarami temperatury oraz z zegarem systemowym
                      03197 ;oraz z prądami
                      03198       ;czyszczę wszystkie linie ekranu - polecenie clear display
000DD6 EC32 F001      03199       call        check_busy
000DDA 0E01           03200       movlw       display_clear
000DDC ECF4 F000      03201       call        send
000DE0 EC32 F001      03202       call        check_busy
                      03203       
                      03204       ;następnie włączam wyświetlanie czasu i temperatur
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 81


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03205 ;jeżeli znaczniki są ustawione to przy wyjściu
                      03206       
000DE4 B19E           03207       btfsc       znaczniki,czy_ponownie_wlaczyc_temp
000DE6 8B9F           03208       bsf         markers,czy_wyswietlam_temp
                      03209       
000DE8 B39E           03210       btfsc       znaczniki,czy_ponownie_wlaczyc_zegar
000DEA 85A1           03211       bsf         markers3,czy_zegar_wyswietlac
                      03212       
000DEC 6BE3           03213       clrf       pozycja_menu
000DEE 6BE4           03214       clrf        numer_opcji
                      03215       
000DF0 EFFA F006      03216       goto  wykryto_back_exit
                      03217       
                      03218 
                      03219      
                      03220       ;jezeli w ekranie zegara to nic nie rob
                      03221       
                      03222       ;dla testow wyswietl na dole ekranu litere b
                      03223       
                      03224       
                      03225 ; wykryto_back_pisz
                      03226       ; call     write_lcd
000DF4                03227 wykryto_back_nic_nie_rob
000DF4                03228 wykryto_back_exit
000DF4 9BA1           03229       bcf   markers3,dzialanie_po_klawiszu
000DF6 6B99           03230       clrf  stan_key
000DF8 EF00 F00E      03231       goto  LOOP11
                      03232       
                      03233 
                      03234 
                      03235 
                      03236 
                      03237 
                      03238 
                      03239 
                      03240 
                      03241 
                      03242 
                      03243 
                      03244 
                      03245 
                      03246 
                      03247 
                      03248 
                      03249 
                      03250 
                      03251 
                      03252       
                      03253 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;                       ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            ;;;;;;;;                                DOWN
                      03254 
000DFC                03255 wykryto_down
                      03256       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 82


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03257       ;co sie dzieje jezeli wykryje ze wcisnieto i puszczono klawisz cofnij
                      03258       
000DFC BFE3           03259       btfsc       pozycja_menu,zmiana_opcji
000DFE EF80 F007      03260       goto        wykryto_down_zmiana_opcji
                      03261       
                      03262       ;jezeli jestem w menu to przeskocz na kolejną opcję gwiazdką
                      03263       
                      03264       
                      03265       ;jezeli w ekranie zegara to pokaż kolejny zestaw czujników
000E02 51E3           03266       movf        pozycja_menu,w
000E04 E10A           03267       bnz         wykryto_down_sprawdz_czy_wyswietlam_kolejne_opcje
                      03268 ;jezeli pozycja menu ==0 to po nacisnieciu klawisza zmien wskazania temperatury
                      03269       ;najpierw czyść ekran
000E06 EC32 F001      03270       call        check_busy
000E0A 0E01           03271       movlw       display_clear
000E0C ECF4 F000      03272       call        send
000E10 EC32 F001      03273       call        check_busy
000E14 7FA1           03274       btg         markers3,pokazuje_temperatury_47
                      03275       ;dla testow wyswietl na dole ekranu litere b
                      03276       
000E16 EFCB F008      03277        goto        wykryto_down_exit
                      03278 
                      03279 
                      03280 
                      03281 
                      03282 
                      03283        
Warning[208]: Label truncated at 32 characters. (wykryto_down_sprawdz_czy_wyswietlam_kolejne_opcje)
000E1A                03284 wykryto_down_sprawdz_czy_wyswietlam_kolejne_opcje
                      03285       
                      03286       ; polozenie gwiazdki przechowuje liczbe wskazującą aktualny adres polozenia
                      03287       ;gwiazdki w 
                      03288       ;tablicy_gwiazdki
                      03289       ;
                      03290       
000E1A 0E1B           03291       movlw       HIGH tablica_gwiazdki
000E1C 6EF7           03292       movwf       TBLPTRH
                      03293       
000E1E 0EC4           03294       movlw       LOW tablica_gwiazdki
000E20 6EF6           03295       movwf       TBLPTRL
                      03296       
                      03297       ;poniewaz najpierw zmniejszam polozenie
000E22 2BE5           03298       incf        polozenie_gwiazdki,f
000E24 51E5           03299       movf       polozenie_gwiazdki,w
                      03300       
000E26 26F6           03301       addwf       TBLPTRL,f
                      03302       
                      03303        ;a nastepnie czytam z adresu tablica_gwiazdki + polozenie_gwiazdki to uzywam polecenia
000E28 0008           03304       TBLRD *
                      03305       
000E2A 0E01           03306       movlw       1
000E2C 62F5           03307       cpfseq      TABLAT
                      03308 ;jezeli odczytano 1 tzn ze gwiazdka jest polozona na 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 83


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03309 ; dole ekranu
                      03310 ; i nalezy zmienic pozycje_menu oraz wyswietlic opcje menu z kolejnego ekranu
                      03311 
000E2E EF66 F007      03312       goto         wykryto_down_zmiana_polozenia_gwiazdki
                      03313       ;polozenie_gwiazdki == 1
                      03314       ;tzn opcje kolejnego ekranu sa wyswietlane
000E32 0E01           03315       movlw       1
000E34 6FE5           03316       movwf       polozenie_gwiazdki;znow na pierwszej linii
                      03317       
                      03318       ;numer opcji ulega zmianie na kolejny
000E36 2BE4           03319       incf        numer_opcji,f
                      03320       ;czyszczenie ekranu
000E38 EC32 F001      03321       call        check_busy
000E3C 0E01           03322       movlw       display_clear
000E3E ECF4 F000      03323       call        send
000E42 EC32 F001      03324       call        check_busy
                      03325       
                      03326       ;zaznaczam ze wyświetlam kolejny ekran opcji
                      03327       
                      03328       
                      03329       ;clrf        numer_opcji
                      03330       
                      03331       
                      03332       ;call        check_busy
000E46 0E80           03333       movlw       linia_gorna
                      03334       
000E48 ECF4 F000      03335       call        send
000E4C EC32 F001      03336       call        check_busy
                      03337       
000E50 0E2A           03338       movlw       _star
000E52 EC05 F001      03339       call        write_lcd
000E56 EC32 F001      03340       call        check_busy      
                      03341       
000E5A 90D8           03342       bcf         STATUS,C
000E5C 37E3           03343       rlcf       pozycja_menu,f
                      03344       
                      03345       ;btfsc       pozycja_menu,menu_opcje1
                      03346       ;goto        wykryto_down_wyswietl_opcje_tablicy_jeden
                      03347       
000E5E B3E3           03348       btfsc       pozycja_menu,menu_opcje2
000E60 EF46 F007      03349       goto        wykryto_down_wyswietl_opcje_tablicy_druga
                      03350       
000E64 B5E3           03351       btfsc       pozycja_menu,menu_opcje3
000E66 EF46 F007      03352       goto        wykryto_down_wyswietl_opcje_tablicy_trzy
                      03353       
000E6A B7E3           03354       btfsc       pozycja_menu,menu_opcje4
000E6C EF46 F007      03355       goto        wykryto_down_wyswietl_opcje_tablicy_cztery
                      03356 
000E70 B9E3           03357       btfsc       pozycja_menu,menu_opcje5
000E72 EF46 F007      03358       goto        wykryto_down_wyswietl_opcje_tablicy_piata
                      03359 
                      03360       
                      03361       ;btfsc       pozycja_menu,menu_opcje_end ;(tj zaznaczono bit ekranu którego nie ma w tym wypadku 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 84


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            są   ekrany bit 0 i 1,  2  a bit 3 oznacza ekran którego nie ma     )
                      03362       ;goto        wykryto_down_wyswietl_opcje_tablicy_end
                      03363       ;pisanie 
                      03364       
                      03365       
                      03366       ;gdy wyświetlam opcje ekranu 1 - tzn gwiazdka byla na koncu opcji linii czwartej ekranu 2
000E76 0E01           03367       movlw       1
000E78 6FE4           03368       movwf       numer_opcji
000E7A 6FE3           03369       movwf       pozycja_menu
                      03370       
000E7C 0E1B           03371       movlw       HIGH tablica_pierwsza
000E7E 6EF7           03372       movwf       TBLPTRH
                      03373       
000E80 0E00           03374       movlw       LOW tablica_pierwsza
000E82 6EF6           03375       movwf       TBLPTRL
                      03376       
000E84 ECD8 F00A      03377       call        wyswietl_opcje_menu
                      03378       
000E88 EFCB F008      03379       goto        wykryto_down_exit
                      03380       
                      03381       
                      03382       
Warning[208]: Label truncated at 32 characters. (wykryto_down_wyswietl_opcje_tablicy_druga)
000E8C                03383 wykryto_down_wyswietl_opcje_tablicy_druga
                      03384       ;gdy wyświetlam opcje ekranu 2
000E8C 0E1B           03385       movlw       HIGH tablica_druga
000E8E 6EF7           03386       movwf       TBLPTRH
                      03387       
000E90 0E22           03388       movlw       LOW tablica_druga
000E92 6EF6           03389       movwf       TBLPTRL
                      03390       
                      03391       
000E94 ECD8 F00A      03392       call        wyswietl_opcje_menu
                      03393       
000E98 EFCB F008      03394       goto        wykryto_down_exit
                      03395       
                      03396 
                      03397 
Warning[208]: Label truncated at 32 characters. (wykryto_down_wyswietl_opcje_tablicy_trzy)
Error[116]  : Address label duplicated or different in second pass (wykryto_down_wyswietl_opcje_tabl)
000E9C                03398 wykryto_down_wyswietl_opcje_tablicy_trzy
                      03399       ;gdy wyświetlam opcje ekranu 3
000E9C 0E1B           03400       movlw       HIGH tablica_trzecia
000E9E 6EF7           03401       movwf       TBLPTRH
                      03402       
000EA0 0E42           03403       movlw       LOW tablica_trzecia
000EA2 6EF6           03404       movwf       TBLPTRL
                      03405       
                      03406       
000EA4 ECD8 F00A      03407       call        wyswietl_opcje_menu
                      03408       
000EA8 EFCB F008      03409       goto        wykryto_down_exit
                      03410       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 85


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03411       
                      03412 ;wykryto_down_wyswietl_opcje_tablicy_end 
                      03413      
Warning[208]: Label truncated at 32 characters. (wykryto_down_wyswietl_opcje_tablicy_cztery)
Error[116]  : Address label duplicated or different in second pass (wykryto_down_wyswietl_opcje_tabl)
000EAC                03414 wykryto_down_wyswietl_opcje_tablicy_cztery      
000EAC 0E1B           03415       movlw       HIGH tablica_czwarta
000EAE 6EF7           03416       movwf       TBLPTRH
                      03417       
000EB0 0E68           03418       movlw       LOW tablica_czwarta
000EB2 6EF6           03419       movwf       TBLPTRL
                      03420       
000EB4 ECD8 F00A      03421       call        wyswietl_opcje_menu
                      03422       
000EB8 EFCB F008      03423       goto        wykryto_down_exit
                      03424       
                      03425       
Warning[208]: Label truncated at 32 characters. (wykryto_down_wyswietl_opcje_tablicy_piata)
Error[116]  : Address label duplicated or different in second pass (wykryto_down_wyswietl_opcje_tabl)
000EBC                03426 wykryto_down_wyswietl_opcje_tablicy_piata
000EBC 0E1B           03427       movlw       HIGH tablica_piata
000EBE 6EF7           03428       movwf       TBLPTRH
                      03429       
000EC0 0E90           03430       movlw       LOW tablica_piata
000EC2 6EF6           03431       movwf       TBLPTRL
                      03432       
000EC4 ECD8 F00A      03433       call        wyswietl_opcje_menu
                      03434       
000EC8 EFCB F008      03435       goto        wykryto_down_exit
                      03436       
Warning[208]: Label truncated at 32 characters. (wykryto_down_zmiana_polozenia_gwiazdki)
000ECC                03437 wykryto_down_zmiana_polozenia_gwiazdki
                      03438       ;opcje zmnieniaja się o tą położoną wyżej
000ECC 2BE4           03439       incf        numer_opcji,f
                      03440       
                      03441       ;nowa gwiazdka jest rysowana w miejscu odczytanym z tablicy
000ECE EC32 F001      03442       call     check_busy
000ED2 50F5           03443       movf        TABLAT,w
000ED4 ECF4 F000      03444       call        send
                      03445       
000ED8 EC32 F001      03446       call     check_busy
                      03447       
000EDC 0E2A           03448       movlw       _star
000EDE EC05 F001      03449       call        write_lcd
000EE2 EC32 F001      03450       call     check_busy
                      03451       ;gwiazdka poprzednia jest kasowana - tzn znow czytam z tablicy ale tym razem polozenie poprzednie
                      03452       
                      03453       
000EE6 06F6           03454       decf        TBLPTRL,f
000EE8 0008           03455       TBLRD *
000EEA 50F5           03456       movf        TABLAT,w
000EEC ECF4 F000      03457       call        send
000EF0 EC32 F001      03458       call     check_busy
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 86


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000EF4 0E20           03459       movlw       _puste
000EF6 EC05 F001      03460       call        write_lcd
                      03461       
000EFA 2AF6           03462       incf        TBLPTRL,f
                      03463       
000EFC EFCB F008      03464       goto        wykryto_down_exit
                      03465 
                      03466       
                      03467       
                      03468       
                      03469       
                      03470       
                      03471       
                      03472       
                      03473       
                      03474       
                      03475 ;;;;
                      03476 
                      03477 
                      03478 ;;;; numer opcji odpowiada polozeniu opcji w MENU      
                      03479       
000F00                03480 wykryto_down_zmiana_opcji
                      03481 
000F00 0E01           03482       movlw       opcja_czujniki
000F02 63E4           03483       cpfseq      numer_opcji
000F04 EF99 F007      03484       goto          wykryto_down_sprawdz_2
                      03485       
                      03486       ;jeżeli zmieniam ilość obsługiwanych czujników temp
                      03487       ;to tu powinno być zmiana o 1 ilości kanałów 
                      03488       ;i sprawdzenie czy nie przekroczyłem dopuszczalnych 8
                      03489       
000F08 07A6           03490       decf        ile_kanalow,f
                      03491       
000F0A 0EFF           03492       movlw      0xff
                      03493       
000F0C 63A6           03494       cpfseq      ile_kanalow
000F0E EF8B F007      03495       goto         wykryto_down_zmiana_opcji_wyswietl_kanaly
                      03496       
000F12 0E08           03497       movlw       8
000F14 6FA6           03498       movwf       ile_kanalow
                      03499       
Warning[208]: Label truncated at 32 characters. (wykryto_down_zmiana_opcji_wyswietl_kanaly)
000F16                03500 wykryto_down_zmiana_opcji_wyswietl_kanaly
000F16 EC32 F001      03501       call     check_busy
000F1A 0E80           03502       movlw    linia_gorna
000F1C 0F0A           03503       addlw       polozenie_liczby_menu
000F1E ECF4 F000      03504       call      send
                      03505       ;
000F22 EC32 F001      03506       call     check_busy
000F26 51A6           03507       movf        ile_kanalow,w
000F28 0F30           03508       addlw       0x30
000F2A EC05 F001      03509       call        write_lcd
                      03510       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 87


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000F2E EFCB F008      03511       goto        wykryto_down_exit
                      03512       
                      03513       
                      03514       
000F32                03515 wykryto_down_sprawdz_2
                      03516 
000F32 0E02           03517       movlw       opcja_odstep
000F34 63E4           03518       cpfseq      numer_opcji
000F36 EFA9 F007      03519       goto        wykryto_down_sprawdz_3
                      03520 
000F3A 07A8           03521       decf        odstep_pomiarowy,f
000F3C 51A8           03522       movf        odstep_pomiarowy,w
000F3E 6F92           03523       movwf       tmp_hex
000F40 6B93           03524       clrf        tmp_hex_H
000F42 6B98           03525       clrf        dec1
000F44 6B97           03526       clrf        dec10
000F46 ECF8 F001      03527       call        hex2dec18
                      03528 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03529       ;wyświetlam obok nazwy opcji czyli 
000F4A ECE1 F00C      03530       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      03531   
000F4E EFCB F008      03532       goto        wykryto_down_exit
                      03533 
                      03534 
                      03535 
                      03536       
000F52                03537 wykryto_down_sprawdz_3  
                      03538 
000F52 0E03           03539       movlw       opcja_srednia
000F54 63E4           03540       cpfseq      numer_opcji
000F56 EFCA F007      03541       goto        wykryto_down_sprawdz_4
                      03542       
                      03543       ;bsf      markers,czy_usrednianie
                      03544       
                      03545       ;sprawdz czy liczba próbek == 1
000F5A 0E01           03546       movlw       0x1
000F5C 63B2           03547       cpfseq      jak_duzo_probek
000F5E EFB5 F007      03548       goto        wykryto_down_sprawdz_3_zmniejsz_probki
                      03549       ;zmieniam liczbe próbek na 0x80
000F62 0E80           03550       movlw       0x80
000F64 6FB2           03551       movwf       jak_duzo_probek
000F66 EFBB F007      03552       goto        wykryto_down_3_wyswietl
                      03553       
Warning[208]: Label truncated at 32 characters. (wykryto_down_sprawdz_3_zmniejsz_probki)
000F6A                03554 wykryto_down_sprawdz_3_zmniejsz_probki
                      03555 ;dziele przez 2
000F6A 0E80           03556       movlw       0x80 
000F6C 03B2           03557       mulwf       jak_duzo_probek
000F6E 50F4           03558       movf        PRODH,w
000F70 6FB2           03559       movwf       jak_duzo_probek
                      03560       
000F72 EC70 F003      03561       call     ustaw_wartosc_dzielenia_usredniania
                      03562       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 88


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000F76                03563 wykryto_down_3_wyswietl
                      03564 ;sprawdz czy liczba próbek ==1
000F76 919F           03565       bcf      markers,czy_usrednianie
                      03566       
000F78 0E01           03567       movlw       1
000F7A 63B2           03568       cpfseq      jak_duzo_probek
000F7C 819F           03569       bsf      markers,czy_usrednianie      
                      03570       
000F7E 51B2           03571       movf        jak_duzo_probek,w
000F80 6F92           03572       movwf       tmp_hex
000F82 6B93           03573       clrf        tmp_hex_H
000F84 6B98           03574       clrf        dec1
000F86 6B97           03575       clrf        dec10
000F88 ECF8 F001      03576       call        hex2dec18
                      03577 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03578       ;wyświetlam obok nazwy opcji czyli 
000F8C ECE1 F00C      03579       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      03580 
000F90 EFCB F008      03581       goto        wykryto_down_exit
                      03582 
                      03583 
                      03584       
                      03585       
                      03586       
                      03587       
000F94                03588 wykryto_down_sprawdz_4
                      03589       
                      03590       
000F94                03591 wykryto_down_sprawdz_5
000F94 0E05           03592       movlw       opcja_ustaw_temp_R1
000F96 63E4           03593       cpfseq      numer_opcji
000F98 EFDE F007      03594       goto        wykryto_down_sprawdz_6
                      03595       
                      03596       ;wlacz pomiar pradu
                      03597       ;jako test wlacz podswietlenie lub je wylacz
                      03598       
                      03599       ;btg   portlampka2,lampka2
                      03600       
000F9C 07AF           03601       decf        jaka_wartosc_regulujeL1,f
                      03602       
000F9E B0D8           03603       btfsc       STATUS,C
000FA0 EFDA F007      03604       goto        wykryto_down_sprawdz_5_zero
                      03605       ;jeżeli w H jest 0 to  umieść tam 1
000FA4 51AE           03606       movf       jaka_wartosc_regulujeH1,w
000FA6 E004           03607       bz          wykryto_down_sprawdz_5_zawracanie
                      03608       
000FA8 07AE           03609       decf        jaka_wartosc_regulujeH1,f
                      03610       
000FAA A4D8           03611       btfss       STATUS,Z
000FAC EFDA F007      03612       goto        wykryto_down_sprawdz_5_zero
Warning[208]: Label truncated at 32 characters. (wykryto_down_sprawdz_5_zawracanie)
000FB0                03613 wykryto_down_sprawdz_5_zawracanie
000FB0 0E01           03614       movlw       1
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 89


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000FB2 6FAE           03615       movwf       jaka_wartosc_regulujeH1
                      03616       
000FB4                03617 wykryto_down_sprawdz_5_zero      
                      03618                                                 ; movf        jaka_wartosc_regulujeL,w
                      03619                                                 ; movwf       tmp_hex
                      03620                                                 ; movf        jaka_wartosc_regulujeH,w
                      03621                                                 ; movwf        tmp_hex_H
                      03622                                                 ; clrf        dec1
                      03623                                                 ; clrf        dec10
                      03624                                                 ; call        hex2dec18
                      03625 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03626       ;wyświetlam obok nazwy opcji czyli 
                      03627                                                 ;call        wykryto_enter_gdzie_wyswietlam_liczbe_bajto
                            wa
                      03628       
                      03629       
000FB4 EC83 F00B      03630       call  wyswietl_temp_w_opcjach
                      03631       
000FB8 EFCB F008      03632       goto        wykryto_down_exit
                      03633       
                      03634       
                      03635       
                      03636       
                      03637       
                      03638       
                      03639       
                      03640       
000FBC                03641 wykryto_down_sprawdz_6
                      03642       
000FBC 0E06           03643       movlw       opcja_ustaw_temp_R2
000FBE 63E4           03644       cpfseq      numer_opcji
000FC0 EFF2 F007      03645       goto        wykryto_down_sprawdz_7
                      03646       
                      03647       ;wlacz pomiar pradu
                      03648       ;jako test wlacz podswietlenie lub je wylacz
                      03649       
                      03650       ;btg   portlampka2,lampka2
                      03651       
000FC4 07B1           03652       decf        jaka_wartosc_regulujeL2,f
                      03653       
000FC6 B0D8           03654       btfsc       STATUS,C
000FC8 EFEE F007      03655       goto        wykryto_down_sprawdz_6_zero
                      03656       ;jeżeli w H jest 0 to  umieść tam 1
000FCC 51B0           03657       movf       jaka_wartosc_regulujeH2,w
000FCE E004           03658       bz          wykryto_down_sprawdz_6_zawracanie
                      03659       
000FD0 07B0           03660       decf        jaka_wartosc_regulujeH2,f
                      03661       
000FD2 A4D8           03662       btfss       STATUS,Z
000FD4 EFEE F007      03663       goto        wykryto_down_sprawdz_6_zero
Warning[208]: Label truncated at 32 characters. (wykryto_down_sprawdz_6_zawracanie)
000FD8                03664 wykryto_down_sprawdz_6_zawracanie
000FD8 0E01           03665       movlw       1
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 90


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000FDA 6FB0           03666       movwf       jaka_wartosc_regulujeH2
                      03667       
000FDC                03668 wykryto_down_sprawdz_6_zero      
                      03669                       
000FDC ECA6 F00B      03670       call  wyswietl_temp_w_opcjach2
                      03671       
000FE0 EFCB F008      03672       goto        wykryto_down_exit
                      03673       
                      03674       
000FE4                03675 wykryto_down_sprawdz_7      
                      03676       
                      03677       
000FE4                03678 wykryto_down_sprawdz_9
                      03679 ;histereza górna
                      03680 
000FE4 0E09           03681       movlw       opcja_histereza_R1_1
000FE6 63E4           03682       cpfseq      numer_opcji
000FE8 EF02 F008      03683       goto        wykryto_down_sprawdz_10
                      03684       
                      03685       ;wlacz pomiar pradu
                      03686       ;jako test wlacz podswietlenie lub je wylacz
                      03687       
                      03688       ;btg   portlampka2,lampka2
000FEC 07E9           03689       decf        histereza_R1_1,f
                      03690       
000FEE 51E9           03691       movf        histereza_R1_1,w
000FF0 6F92           03692       movwf       tmp_hex
                      03693       
000FF2 6B93           03694       clrf        tmp_hex_H
000FF4 6B98           03695       clrf        dec1
000FF6 6B97           03696       clrf        dec10
000FF8 ECF8 F001      03697       call        hex2dec18
                      03698 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03699       ;wyświetlam obok nazwy opcji czyli 
000FFC ECE1 F00C      03700       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      03701       
001000 EFCB F008      03702       goto        wykryto_down_exit     
                      03703 
001004                03704 wykryto_down_sprawdz_10
                      03705 ;histereza dolna
001004 0E0A           03706       movlw       opcja_histereza_R1_2
001006 63E4           03707       cpfseq      numer_opcji
001008 EF12 F008      03708       goto        wykryto_down_sprawdz_11
                      03709       
                      03710       
00100C 07EA           03711       decf        histereza_R1_2,f
                      03712       
00100E 51EA           03713       movf        histereza_R1_2,w
001010 6F92           03714       movwf       tmp_hex
                      03715       
001012 6B93           03716       clrf        tmp_hex_H
001014 6B98           03717       clrf        dec1
001016 6B97           03718       clrf        dec10
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 91


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001018 ECF8 F001      03719       call        hex2dec18
                      03720 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03721       ;wyświetlam obok nazwy opcji czyli 
00101C ECE1 F00C      03722       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      03723       
001020 EFCB F008      03724       goto        wykryto_down_exit     
                      03725 
                      03726 
                      03727 
                      03728       
                      03729       
                      03730       
001024                03731 wykryto_down_sprawdz_11
                      03732 ;histereza dolna
001024 0E0B           03733       movlw       opcja_histereza_R2_1
001026 63E4           03734       cpfseq      numer_opcji
001028 EF22 F008      03735       goto        wykryto_down_sprawdz_12
                      03736       
00102C 07EB           03737       decf        histereza_R2_1,f
                      03738       
00102E 51EB           03739       movf        histereza_R2_1,w
001030 6F92           03740       movwf       tmp_hex
                      03741       
001032 6B93           03742       clrf        tmp_hex_H
001034 6B98           03743       clrf        dec1
001036 6B97           03744       clrf        dec10
001038 ECF8 F001      03745       call        hex2dec18
                      03746 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03747       ;wyświetlam obok nazwy opcji czyli 
00103C ECE1 F00C      03748       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      03749       
001040 EFCB F008      03750       goto        wykryto_down_exit     
                      03751 
                      03752       
                      03753       
001044                03754 wykryto_down_sprawdz_12
                      03755 ;histereza dolna
001044 0E0C           03756       movlw       opcja_histereza_R2_2
001046 63E4           03757       cpfseq      numer_opcji
001048 EF32 F008      03758       goto        wykryto_down_sprawdz_13
                      03759       
00104C 07EC           03760       decf        histereza_R2_2,f
                      03761       
00104E 51EC           03762       movf        histereza_R2_2,w
001050 6F92           03763       movwf       tmp_hex
                      03764       
001052 6B93           03765       clrf        tmp_hex_H
001054 6B98           03766       clrf        dec1
001056 6B97           03767       clrf        dec10
001058 ECF8 F001      03768       call        hex2dec18
                      03769 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03770       ;wyświetlam obok nazwy opcji czyli 
00105C ECE1 F00C      03771       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 92


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03772       
001060 EFCB F008      03773       goto        wykryto_down_exit     
                      03774 
                      03775 
                      03776 
                      03777 
001064                03778 wykryto_down_sprawdz_13
                      03779 
                      03780 
                      03781 
001064                03782 wykryto_down_sprawdz_15
                      03783 ;czujnik regulatora
                      03784 
001064 0E0F           03785       movlw       opcja_czujnik_regulacji1
001066 63E4           03786       cpfseq      numer_opcji
001068 EF4A F008      03787       goto        wykryto_down_sprawdz_16
                      03788       
                      03789       ;wlacz pomiar pradu
                      03790       ;jako test wlacz podswietlenie lub je wylacz
                      03791       
                      03792       ;btg   portlampka2,lampka2
                      03793       
00106C 51EE           03794       movf        ktory_czujnik_reguluje1,w
00106E A4D8           03795       btfss       STATUS,Z
001070 EF3E F008      03796       goto        wykryto_down_sprawdz15_nie_ma_zero
                      03797       
001074 0E07           03798       movlw       ilosc_czujnikow
                      03799       
001076 6FEE           03800       movwf       ktory_czujnik_reguluje1
                      03801       
001078 EF3F F008      03802       goto        wykryto_down_sprawdz15_show
Warning[208]: Label truncated at 32 characters. (wykryto_down_sprawdz15_nie_ma_zero)
00107C                03803 wykryto_down_sprawdz15_nie_ma_zero      
00107C 07EE           03804       decf        ktory_czujnik_reguluje1,f
                      03805       
                      03806 
00107E                03807 wykryto_down_sprawdz15_show
00107E 51EE           03808       movf        ktory_czujnik_reguluje1,w
001080 6F92           03809       movwf       tmp_hex
                      03810       
001082 6B93           03811       clrf        tmp_hex_H
001084 6B98           03812       clrf        dec1
001086 6B97           03813       clrf        dec10
001088 ECF8 F001      03814       call        hex2dec18
                      03815 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03816       ;wyświetlam obok nazwy opcji czyli 
00108C ECE1 F00C      03817       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      03818       
001090 EFCB F008      03819       goto        wykryto_down_exit
                      03820 
                      03821 
                      03822 
                      03823 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 93


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001094                03824 wykryto_down_sprawdz_16
                      03825 ;czujnik regulatora
                      03826 
001094 0E10           03827       movlw       opcja_czujnik_regulacji2
001096 63E4           03828       cpfseq      numer_opcji
001098 EF62 F008      03829       goto        wykryto_down_sprawdz_17
                      03830       
                      03831       ;wlacz pomiar pradu
                      03832       ;jako test wlacz podswietlenie lub je wylacz
                      03833       
                      03834       ;btg   portlampka2,lampka2
                      03835       
00109C 51EF           03836       movf        ktory_czujnik_reguluje2,w
00109E A4D8           03837       btfss       STATUS,Z
0010A0 EF56 F008      03838       goto        wykryto_down_sprawdz16_nie_ma_zero
                      03839       
0010A4 0E07           03840       movlw       ilosc_czujnikow
                      03841       
0010A6 6FEF           03842       movwf       ktory_czujnik_reguluje2
                      03843       
0010A8 EF57 F008      03844       goto        wykryto_down_sprawdz16_show
Warning[208]: Label truncated at 32 characters. (wykryto_down_sprawdz16_nie_ma_zero)
0010AC                03845 wykryto_down_sprawdz16_nie_ma_zero      
0010AC 07EF           03846       decf        ktory_czujnik_reguluje2,f
                      03847       
                      03848 
0010AE                03849 wykryto_down_sprawdz16_show
0010AE 51EF           03850       movf        ktory_czujnik_reguluje2,w
0010B0 6F92           03851       movwf       tmp_hex
                      03852       
0010B2 6B93           03853       clrf        tmp_hex_H
0010B4 6B98           03854       clrf        dec1
0010B6 6B97           03855       clrf        dec10
0010B8 ECF8 F001      03856       call        hex2dec18
                      03857 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      03858       ;wyświetlam obok nazwy opcji czyli 
0010BC ECE1 F00C      03859       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      03860       
0010C0 EFCB F008      03861       goto        wykryto_down_exit
                      03862 
                      03863 
                      03864       
                      03865       
                      03866       
                      03867       
0010C4                03868 wykryto_down_sprawdz_17
                      03869 
                      03870 
                      03871 
                      03872 
                      03873 
                      03874       
0010C4                03875 wykryto_down_sprawdz_20
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 94


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0010C4 0E14           03876       movlw       opcja_ustaw_zegar
0010C6 63E4           03877       cpfseq      numer_opcji
0010C8 EFCB F008      03878       goto        wykryto_down_sprawdz21
                      03879       
                      03880 ;sprawdzenie która wielkość zegara podlega zmianie
                      03881 ;jeżeli dzien_10 to zmniejszam o jeden dzien_1
                      03882 ;problem polega na tym, że nie mogę skorzystać z FSR2 bo  każda z wielkości
                      03883 ;czasu musi być indywidualnie rozpatrywana
0010CC 0EDA           03884       movlw       dzien_10
0010CE 63ED           03885       cpfseq      ustawianie_czasu_co_wyswietlam
0010D0 EF7F F008      03886       goto        wykryto_down_sprawdz_11_1
                      03887 
                      03888 ;jeżeli dzień_1 jest 0 (0x30) to jeżeli dzien_10 <> 0x30 zmniejsz dzien_10
                      03889 
0010D4 0E30           03890       movlw       0x30
0010D6 63DB           03891       cpfseq      dzien_1
0010D8 EF7C F008      03892       goto        zmniejsz_dzien_1
                      03893       
                      03894       ;sprawdz czy dzien_10 == 0x30
0010DC 0E30           03895       movlw       0x30
0010DE 63DA           03896       cpfseq      dzien_10
0010E0 EF77 F008      03897       goto        zapisz_do_dzien_1_99
                      03898       
0010E4 0E39           03899       movlw       0x39
0010E6 6FDA           03900       movwf       dzien_10
0010E8 6FDB           03901       movwf       dzien_1
                      03902       
0010EA EFC7 F008      03903       goto        wykryto_down_sprawdz_11_4
                      03904       
0010EE                03905 zapisz_do_dzien_1_99
0010EE 0E39           03906       movlw       0x39
0010F0 6FDB           03907       movwf       dzien_1
0010F2 07DA           03908       decf        dzien_10,f
0010F4 EFC7 F008      03909       goto        wykryto_down_sprawdz_11_4
                      03910       
                      03911       
0010F8                03912 zmniejsz_dzien_1      
0010F8 07DB           03913       decf        dzien_1,f
                      03914       
                      03915       
0010FA EFC7 F008      03916       goto        wykryto_down_sprawdz_11_4
                      03917       
0010FE                03918 wykryto_down_sprawdz_11_1
0010FE 0EDC           03919       movlw       godziny_10
001100 63ED           03920       cpfseq      ustawianie_czasu_co_wyswietlam
001102 EF99 F008      03921       goto        wykryto_down_sprawdz_11_2
                      03922       
001106 0E30           03923       movlw       0x30
001108 63DD           03924       cpfseq      godziny_1
00110A EF96 F008      03925       goto        zmniejsz_godziny_1
                      03926       
                      03927       ;sprawdz czy dzien_10 == 0x30
00110E 0E30           03928       movlw       0x30
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 95


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001110 63DC           03929       cpfseq      godziny_10
001112 EF91 F008      03930       goto        zapisz_do_godziny_1_9
                      03931       
001116 0E32           03932       movlw       0x32
001118 6FDC           03933       movwf       godziny_10
00111A 0E33           03934       movlw       0x33
00111C 6FDD           03935       movwf       godziny_1
                      03936       
00111E EFC7 F008      03937       goto        wykryto_down_sprawdz_11_4
                      03938       
001122                03939 zapisz_do_godziny_1_9
001122 0E39           03940       movlw       0x39
001124 6FDD           03941       movwf       godziny_1
001126 07DC           03942       decf        godziny_10,f
001128 EFC7 F008      03943       goto        wykryto_down_sprawdz_11_4
                      03944       
                      03945       
00112C                03946 zmniejsz_godziny_1      
00112C 07DD           03947       decf        godziny_1,f
                      03948       
                      03949       
00112E EFC7 F008      03950       goto        wykryto_down_sprawdz_11_4
                      03951       
                      03952       
001132                03953 wykryto_down_sprawdz_11_2
001132 0EDE           03954       movlw       minuty_10
001134 63ED           03955       cpfseq      ustawianie_czasu_co_wyswietlam
001136 EFB3 F008      03956       goto        wykryto_down_sprawdz_11_3
                      03957       
00113A 0E30           03958       movlw       0x30
00113C 63DF           03959       cpfseq      minuty_1
00113E EFB0 F008      03960       goto        zmniejsz_minuty_1
                      03961       
                      03962       ;sprawdz czy dzien_10 == 0x30
001142 0E30           03963       movlw       0x30
001144 63DE           03964       cpfseq      minuty_10
001146 EFAB F008      03965       goto        zapisz_do_minuty_1_9
                      03966       
00114A 0E35           03967       movlw       0x35
00114C 6FDE           03968       movwf       minuty_10
00114E 0E39           03969       movlw       0x39
001150 6FDF           03970       movwf       minuty_1
                      03971       
001152 EFC7 F008      03972       goto        wykryto_down_sprawdz_11_4
                      03973       
001156                03974 zapisz_do_minuty_1_9
001156 0E39           03975       movlw       0x39
001158 6FDF           03976       movwf       minuty_1
00115A 07DE           03977       decf        minuty_10,f
00115C EFC7 F008      03978       goto        wykryto_down_sprawdz_11_4
                      03979       
                      03980       
001160                03981 zmniejsz_minuty_1      
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 96


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001160 07DF           03982       decf        minuty_1,f
                      03983       
001162 EFC7 F008      03984       goto        wykryto_down_sprawdz_11_4
                      03985       
001166                03986 wykryto_down_sprawdz_11_3     
001166 0E30           03987       movlw       0x30
001168 63E1           03988       cpfseq      sekundy_1
00116A EFC6 F008      03989       goto        zmniejsz_sekundy_1
                      03990       
                      03991       ;sprawdz czy dzien_10 == 0x30
00116E 0E30           03992       movlw       0x30
001170 63E0           03993       cpfseq      sekundy_10
001172 EFC1 F008      03994       goto        zapisz_do_sekundy_1_9
                      03995       
001176 0E35           03996       movlw       0x35
001178 6FE0           03997       movwf       sekundy_10
00117A 0E39           03998       movlw       0x39
00117C 6FE1           03999       movwf       sekundy_1
                      04000       
00117E EFC7 F008      04001       goto        wykryto_down_sprawdz_11_4
                      04002       
001182                04003 zapisz_do_sekundy_1_9
001182 0E39           04004       movlw       0x39
001184 6FE1           04005       movwf       sekundy_1
001186 07E0           04006       decf        sekundy_10,f
001188 EFC7 F008      04007       goto        wykryto_down_sprawdz_11_4
                      04008       
                      04009       
00118C                04010 zmniejsz_sekundy_1      
00118C 07E1           04011       decf        sekundy_1,f
                      04012       
00118E                04013 wykryto_down_sprawdz_11_4            
                      04014 
00118E EC0E F00D      04015       call        procedura_wyswietlania_kolejnych_liczb_zegara
                      04016       
001192 EFCB F008      04017       goto        wykryto_down_exit           
                      04018 ;       call     check_busy
                      04019 ;       movlw    linia_czwarta
                      04020 ;       call      send
                      04021 ;         
                      04022 ;       call     check_busy
                      04023 ; ;czy gasze czy wyswietlam      
                      04024 ;       btfsc       markers,test
                      04025 ;       goto        zamaz_D
                      04026 ; napisz_D
                      04027 ;       bsf   markers,test
                      04028 ;       movlw       _d
                      04029 ;       goto  wykryto_down_pisz
                      04030 ; zamaz_D      
                      04031 ;       bcf   markers,test
                      04032 ;       movlw       _puste
                      04033 ;       
                      04034 ; wykryto_down_pisz
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 97


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04035 ;       call     write_lcd
                      04036 
                      04037       
                      04038       
                      04039       
                      04040       
                      04041       
                      04042       
                      04043       
                      04044       
                      04045       
                      04046       
                      04047       
                      04048       
                      04049       
001196                04050 wykryto_down_sprawdz21
                      04051 
                      04052 
                      04053 
                      04054 
                      04055 
                      04056 
                      04057 
                      04058 
                      04059 
001196                04060 wykryto_down_exit
                      04061 ;jeżeli jest opuszczenie procedury w trakcie przyciskania kończ w inny sposób
                      04062 
001196 B59E           04063       btfsc   znaczniki,czy_moge_juz_zmieniac
001198 EFD2 F008      04064       goto    wykryto_down_exit_trzymanie
                      04065       
00119C 9BA1           04066       bcf   markers3,dzialanie_po_klawiszu
00119E 6B99           04067       clrf  stan_key
0011A0 EF00 F00E      04068       goto  LOOP11
                      04069  
0011A4                04070 wykryto_down_exit_trzymanie
0011A4 959E           04071       bcf     znaczniki,czy_moge_juz_zmieniac
0011A6 0012           04072       return
                      04073  
                      04074  
                      04075  
                      04076  
                      04077  
                      04078  
                      04079  
                      04080  
                      04081  
                      04082  
                      04083  
                      04084  
                      04085  
                      04086  
                      04087  
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 98


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04088  
                      04089  
                      04090  
                      04091  
                      04092  
                      04093  
                      04094  
                      04095  
                      04096  
                      04097  
                      04098  
                      04099  
                      04100  
                      04101  
                      04102  
                      04103  
                      04104  
                      04105  
                      04106  
                      04107  
                      04108                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;                       ;;;;;;;;;;;;;;
                            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                                UP
0011A8                04109 wykryto_up
                      04110       ;co sie dzieje jezeli wykryje ze wcisnieto i puszczono klawisz up
                      04111       
0011A8 BFE3           04112       btfsc       pozycja_menu,zmiana_opcji
0011AA EF8F F009      04113       goto        wykryto_up_zmiana_opcji
                      04114       
0011AE 51E3           04115       movf        pozycja_menu,w
0011B0 E10A           04116       bnz         wykryto_up_sprawdz_czy_wyswietlam_kolejne_opcje
                      04117 ;jezeli pozycja menu ==0 to po nacisnieciu klawisza zmien wskazania temperatury
                      04118 
0011B2 EC32 F001      04119       call        check_busy
0011B6 0E01           04120       movlw       display_clear
0011B8 ECF4 F000      04121       call        send
0011BC EC32 F001      04122       call        check_busy
0011C0 7FA1           04123       btg         markers3,pokazuje_temperatury_47
                      04124       ;tzn pozwala obejrzec temperatury 0-3 lub 4-7 (zawsze 4)
0011C2 EFCF F00A      04125       goto        wykryto_up_exit
                      04126 
                      04127 
                      04128 
                      04129 
                      04130 
                      04131 
                      04132 
                      04133       
                      04134 
                      04135       
                      04136       
                      04137       
                      04138       
Warning[208]: Label truncated at 32 characters. (wykryto_up_sprawdz_czy_wyswietlam_kolejne_opcje)
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 99


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0011C6                04139 wykryto_up_sprawdz_czy_wyswietlam_kolejne_opcje
                      04140       ;movlw       1
                      04141       ;cpfseq      pozycja_menu
                      04142       ;goto        sprawdz_czy_wyswietlam_zmiane_opcji
                      04143       
                      04144       ; polozenie gwiazdki przechowuje liczbe wskazującą aktualny adres polozenia
                      04145       ;gwiazdki w 
                      04146       ;tablicy_gwiazdki
                      04147       ;
                      04148       
0011C6 0E1B           04149       movlw       HIGH tablica_gwiazdki
0011C8 6EF7           04150       movwf       TBLPTRH
                      04151       
0011CA 0EC4           04152       movlw       LOW tablica_gwiazdki
0011CC 6EF6           04153       movwf       TBLPTRL
                      04154       
                      04155       ;poniewaz najpierw zmniejszam polozenie
0011CE 07E5           04156       decf        polozenie_gwiazdki,f
0011D0 51E5           04157       movf       polozenie_gwiazdki,w
                      04158       
0011D2 26F6           04159       addwf       TBLPTRL,f
                      04160       
                      04161        ;a nastepnie czytam to uzywam polecenia
0011D4 0008           04162       TBLRD       *
0011D6 50F5           04163       movf        TABLAT,w
                      04164       
                      04165       
                      04166       
                      04167 ;jezeli odczytano 0 tzn ze bylem na gorze ekranu (pierwsze polecenie)
                      04168 ; i następuje przeskok do ekranu menu 0 lub 1 
                      04169 
                      04170 
0011D8 A4D8           04171       btfss       STATUS,Z
0011DA EF75 F009      04172       goto         wykryto_up_zmiana_polozenia_gwiazdki
                      04173       
                      04174       ;polozenie_gwiazdki == 4 bo gwiazdka jest na dole opcji ekranu poprzedniego
                      04175       
0011DE 0E04           04176       movlw       4
0011E0 6FE5           04177       movwf       polozenie_gwiazdki
                      04178       
                      04179       
0011E2 07E4           04180       decf        numer_opcji,f
                      04181       
                      04182       ;czyszczenie ekranu
0011E4 EC32 F001      04183       call        check_busy
0011E8 0E01           04184       movlw       display_clear
0011EA ECF4 F000      04185       call        send
0011EE EC32 F001      04186       call        check_busy
                      04187       
                      04188            
                      04189       
                      04190       ;zaznaczam ze wyświetlam kolejny ekran opcji
                      04191       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 100


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04192       
0011F2 B1E3           04193       btfsc       pozycja_menu,menu_opcje1 ;(tj zaznaczony jet bit wskazujący na pokazywanie opcji ekra
                            nu 1, czyli przeskok do ekranu koncowego)
0011F4 EF0D F009      04194       goto        wykryto_up_wyswietl_opcje_tablicy_end
                      04195       
                      04196       
                      04197       
                      04198       
                      04199       
0011F8 90D8           04200       bcf         STATUS,C
0011FA 33E3           04201       rrcf       pozycja_menu,f
                      04202       
                      04203 ;########################################## WAZNE
                      04204 ;jeżeli będzie więcej ekrnów opcji menu, to tu należy dodać procedurę wykrywania adres której ta
                            blicy jest używany do wyświetlania opcji
                      04205        
                      04206       ;gdy wyświetlam opcje ekranu 2 - tzn gwiazdka byla na górze opcji linii pierwszej ekranu 2
                      04207       
                      04208       ;jeżeli po przesunięciu zaznaczony jest bit menu_opcje1 to wyswietl menu_opcje1
0011FC B1E3           04209       btfsc       pozycja_menu,menu_opcje1 ;(tj zaznaczony jet bit wskazujący na pokazywanie opcji ekra
                            nu 1, czyli przeskok do ekranu 0)
0011FE EF0D F009      04210       goto        wykryto_up_wyswietl_opcje_tablicy_pierwsza
                      04211       
                      04212       
001202 B3E3           04213       btfsc       pozycja_menu,menu_opcje2 ;(tj zaznaczony jet bit wskazujący na pokazywanie opcji ekra
                            nu 1, czyli przeskok do ekranu 0)
001204 EF0D F009      04214       goto        wykryto_up_wyswietl_opcje_tablicy_dwa
                      04215 
001208 B5E3           04216       btfsc       pozycja_menu,menu_opcje3 ;(tj zaznaczony jet bit wskazujący na pokazywanie opcji ekra
                            nu 1, czyli przeskok do ekranu 0)
00120A EF0D F009      04217       goto        wykryto_up_wyswietl_opcje_tablicy_trzy
                      04218       
00120E B7E3           04219       btfsc       pozycja_menu,menu_opcje4 ;(tj zaznaczony jet bit wskazujący na pokazywanie opcji ekra
                            nu 1, czyli przeskok do ekranu 0)
001210 EF0D F009      04220       goto        wykryto_up_wyswietl_opcje_tablicy_cztery
                      04221       
                      04222 
001214 B9E3           04223       btfsc       pozycja_menu,menu_opcje5 
                      04224       ;(tj zaznaczony jet bit wskazujący na pokazywanie opcji ekranu 1, czyli przeskok do ekranu 0)
001216 EF0D F009      04225       goto        wykryto_up_wyswietl_opcje_tablicy_piata
                      04226       
                      04227       
                      04228       
                      04229       
Warning[208]: Label truncated at 32 characters. (wykryto_up_wyswietl_opcje_tablicy_pierwsza)
00121A                04230 wykryto_up_wyswietl_opcje_tablicy_pierwsza
00121A 0E1B           04231       movlw       HIGH tablica_pierwsza
00121C 6EF7           04232       movwf       TBLPTRH
                      04233       
00121E 0E00           04234       movlw       LOW tablica_pierwsza
001220 6EF6           04235       movwf       TBLPTRL
                      04236       
001222 ECD8 F00A      04237       call        wyswietl_opcje_menu
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 101


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04238       
                      04239       ;wyswietlam gwiazdke na linii ostatniej poprzedniego ekranu
001226 EC32 F001      04240       call        check_busy
00122A 0ED0           04241       movlw       linia_czwarta
                      04242       
00122C ECF4 F000      04243       call        send
001230 EC32 F001      04244       call        check_busy
001234 0E2A           04245       movlw       _star
001236 EC05 F001      04246       call        write_lcd
00123A EC32 F001      04247       call        check_busy
                      04248       
00123E EFCF F00A      04249       goto        wykryto_up_exit
                      04250       
                      04251            
Warning[208]: Label truncated at 32 characters. (wykryto_up_wyswietl_opcje_tablicy_dwa)
Error[116]  : Address label duplicated or different in second pass (wykryto_up_wyswietl_opcje_tablic)
001242                04252 wykryto_up_wyswietl_opcje_tablicy_dwa
                      04253       ;tu jest przeskok z numeru opcji 1 do ostatniej możliwej czyli 8
                      04254       
                      04255       ;wyświetlam opcje ekranu 2
                      04256       
                      04257       
001242 0E1B           04258       movlw       HIGH tablica_druga
001244 6EF7           04259       movwf       TBLPTRH
                      04260       
001246 0E22           04261       movlw       LOW tablica_druga
001248 6EF6           04262       movwf       TBLPTRL
                      04263       
00124A ECD8 F00A      04264       call        wyswietl_opcje_menu
                      04265       
                      04266       ;wyswietlam gwiazdke na linii ostatniej poprzedniego ekranu
00124E EC32 F001      04267       call        check_busy
001252 0ED0           04268       movlw       linia_czwarta
001254 ECF4 F000      04269       call        send
                      04270       
001258 EC32 F001      04271       call        check_busy
00125C 0E2A           04272       movlw       _star
00125E EC05 F001      04273       call        write_lcd
001262 EC32 F001      04274       call        check_busy
                      04275       
001266 EFCF F00A      04276       goto        wykryto_up_exit
                      04277 
                      04278 
Warning[208]: Label truncated at 32 characters. (wykryto_up_wyswietl_opcje_tablicy_trzy)
Error[116]  : Address label duplicated or different in second pass (wykryto_up_wyswietl_opcje_tablic)
00126A                04279 wykryto_up_wyswietl_opcje_tablicy_trzy
                      04280       
00126A 0E1B           04281       movlw       HIGH tablica_trzecia
00126C 6EF7           04282       movwf       TBLPTRH
                      04283       
00126E 0E42           04284       movlw       LOW tablica_trzecia
001270 6EF6           04285       movwf       TBLPTRL
                      04286             
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 102


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001272 ECD8 F00A      04287       call        wyswietl_opcje_menu
                      04288       
001276 EC32 F001      04289       call        check_busy
00127A 0ED0           04290       movlw       linia_czwarta      
00127C ECF4 F000      04291       call        send
                      04292       
001280 EC32 F001      04293       call        check_busy
001284 0E2A           04294       movlw       _star
001286 EC05 F001      04295       call        write_lcd
00128A EC32 F001      04296       call        check_busy
                      04297       
00128E EFCB F008      04298       goto        wykryto_down_exit
                      04299 
                      04300 
Warning[208]: Label truncated at 32 characters. (wykryto_up_wyswietl_opcje_tablicy_cztery)
Error[116]  : Address label duplicated or different in second pass (wykryto_up_wyswietl_opcje_tablic)
001292                04301 wykryto_up_wyswietl_opcje_tablicy_cztery
                      04302       
001292 0E1B           04303       movlw       HIGH tablica_czwarta
001294 6EF7           04304       movwf       TBLPTRH
                      04305       
001296 0E68           04306       movlw       LOW tablica_czwarta
001298 6EF6           04307       movwf       TBLPTRL
                      04308             
00129A ECD8 F00A      04309       call        wyswietl_opcje_menu
                      04310       
00129E EC32 F001      04311       call        check_busy
0012A2 0ED0           04312       movlw       linia_czwarta      
0012A4 ECF4 F000      04313       call        send
                      04314       
0012A8 EC32 F001      04315       call        check_busy
0012AC 0E2A           04316       movlw       _star
0012AE EC05 F001      04317       call        write_lcd
0012B2 EC32 F001      04318       call        check_busy
                      04319       
0012B6 EFCB F008      04320       goto        wykryto_down_exit
                      04321 
                      04322 
                      04323 
Warning[208]: Label truncated at 32 characters. (wykryto_up_wyswietl_opcje_tablicy_end)
Error[116]  : Address label duplicated or different in second pass (wykryto_up_wyswietl_opcje_tablic)
0012BA                04324 wykryto_up_wyswietl_opcje_tablicy_end      
Warning[208]: Label truncated at 32 characters. (wykryto_up_wyswietl_opcje_tablicy_piata)
Error[116]  : Address label duplicated or different in second pass (wykryto_up_wyswietl_opcje_tablic)
0012BA                04325 wykryto_up_wyswietl_opcje_tablicy_piata
                      04326 
0012BA 0E14           04327       movlw       numer_opcji_koncowej    
0012BC 6FE4           04328       movwf       numer_opcji
0012BE 6BE3           04329       clrf        pozycja_menu
0012C0 89E3           04330       bsf         pozycja_menu,(menu_opcje_end-1)
                      04331 
0012C2 0E1B           04332       movlw       HIGH tablica_piata
0012C4 6EF7           04333       movwf       TBLPTRH
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 103


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04334       
0012C6 0E90           04335       movlw       LOW tablica_piata
0012C8 6EF6           04336       movwf       TBLPTRL
                      04337       
                      04338       
0012CA ECD8 F00A      04339       call        wyswietl_opcje_menu
                      04340       
0012CE EC32 F001      04341       call        check_busy
0012D2 0ED0           04342       movlw       linia_czwarta      
0012D4 ECF4 F000      04343       call        send
                      04344       
0012D8 EC32 F001      04345       call        check_busy
0012DC 0E2A           04346       movlw       _star
0012DE EC05 F001      04347       call        write_lcd
0012E2 EC32 F001      04348       call        check_busy
                      04349       
0012E6 EFCB F008      04350       goto        wykryto_down_exit
                      04351       
                      04352       
                      04353       
Warning[208]: Label truncated at 32 characters. (wykryto_up_zmiana_polozenia_gwiazdki)
0012EA                04354 wykryto_up_zmiana_polozenia_gwiazdki
                      04355 
                      04356       ;opcje zmnieniaja się o tą położoną wyżej
0012EA 07E4           04357       decf        numer_opcji,f
                      04358       
                      04359       ;nowa gwiazdka jest rysowana w miejscu odczytanym z tablicy
                      04360       
0012EC EC32 F001      04361       call     check_busy
0012F0 50F5           04362       movf        TABLAT,w
0012F2 ECF4 F000      04363       call        send
                      04364       
0012F6 EC32 F001      04365       call     check_busy
0012FA 0E2A           04366       movlw       _star
0012FC EC05 F001      04367       call        write_lcd
001300 EC32 F001      04368       call     check_busy
                      04369       ;gwiazdka poprzednia jest kasowana - tzn znow czytam z tablicy ale tym razem polozenie poprzednie
                      04370       
                      04371       
001304 2AF6           04372       incf        TBLPTRL,f
001306 0008           04373       TBLRD *
001308 50F5           04374       movf        TABLAT,w
00130A ECF4 F000      04375       call        send
00130E EC32 F001      04376       call     check_busy
001312 0E20           04377       movlw       _puste
001314 EC05 F001      04378       call        write_lcd
                      04379       
001318 06F6           04380       decf        TBLPTRL,f
                      04381       
00131A EFCF F00A      04382       goto        wykryto_up_exit
                      04383 
                      04384 
                      04385       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 104


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04386       
                      04387       
                      04388       
                      04389       
                      04390       
                      04391       
                      04392       
                      04393       
                      04394       
                      04395       
                      04396       
                      04397       
                      04398       
                      04399       
                      04400       
                      04401       
                      04402       
                      04403       
                      04404       
                      04405       
                      04406       
                      04407       
                      04408 ;#########################################KLAWISZ UP
                      04409 ;ZMIANA Opcji
                      04410 
                      04411 
                      04412 ;opcja 1      
                      04413 
00131E                04414 wykryto_up_zmiana_opcji
                      04415 
                      04416 ;sprawdz którą opcję zmieniam
00131E 0E01           04417       movlw       opcja_czujniki
001320 63E4           04418       cpfseq      numer_opcji
001322 EFA7 F009      04419       goto          wykryto_up_sprawdz_2
                      04420       
                      04421       ;jeżeli zmieniam ilość obsługiwanych czujników temp
                      04422       ;to tu powinno być zmiana o 1 ilości kanałów 
                      04423       ;i sprawdzenie czy nie przekroczyłem dopuszczalnych 8
001326 2BA6           04424       incf        ile_kanalow,f
001328 0E09           04425       movlw      9
                      04426       
00132A 63A6           04427       cpfseq      ile_kanalow
00132C EF99 F009      04428       goto         wykryto_up_zmiana_opcji_wyswietl_kanaly
                      04429       
001330 6BA6           04430       clrf              ile_kanalow
                      04431 
Warning[208]: Label truncated at 32 characters. (wykryto_up_zmiana_opcji_wyswietl_kanaly)
001332                04432 wykryto_up_zmiana_opcji_wyswietl_kanaly
                      04433 
001332 EC32 F001      04434       call     check_busy
001336 0E80           04435       movlw    linia_gorna
001338 0F0A           04436       addlw     polozenie_liczby_menu 
00133A ECF4 F000      04437       call      send
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 105


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04438       ;
00133E EC32 F001      04439       call     check_busy
001342 51A6           04440       movf        ile_kanalow,w
001344 0F30           04441       addlw       0x30
001346 EC05 F001      04442       call        write_lcd
                      04443       
00134A EFCF F00A      04444       goto        wykryto_up_exit
                      04445       
                      04446 
                      04447 
                      04448 
                      04449 
                      04450 
                      04451 
                      04452 ;numery opcji odpowiadają położeniu opcji w menu
                      04453 
                      04454 
                      04455       
00134E                04456 wykryto_up_sprawdz_2
00134E 0E02           04457       movlw       opcja_odstep
001350 63E4           04458       cpfseq      numer_opcji
001352 EFB7 F009      04459       goto        wykryto_up_sprawdz_3
                      04460 
001356 2BA8           04461       incf        odstep_pomiarowy,f
001358 51A8           04462       movf        odstep_pomiarowy,w
                      04463       
00135A 6F92           04464       movwf       tmp_hex
00135C 6B93           04465       clrf        tmp_hex_H
00135E 6B98           04466       clrf        dec1
001360 6B97           04467       clrf        dec10
001362 ECF8 F001      04468       call        hex2dec18
                      04469 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04470       ;wyświetlam obok nazwy opcji czyli 
001366 ECE1 F00C      04471       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04472       
                      04473       
00136A EFCF F00A      04474       goto        wykryto_up_exit
                      04475       
                      04476       
                      04477 
                      04478 
                      04479 
                      04480       
                      04481       
00136E                04482 wykryto_up_sprawdz_3
00136E 0E03           04483       movlw       opcja_srednia
001370 63E4           04484       cpfseq      numer_opcji
001372 EFD6 F009      04485       goto        wykryto_up_sprawdz_4
                      04486       
                      04487       ;sprawdz czy liczba próbek == 128 (0x80)
001376 0E80           04488       movlw       0x80
001378 63B2           04489       cpfseq      jak_duzo_probek
00137A EFC4 F009      04490       goto        wykryto_up_sprawdz_3_zwieksz_probki
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 106


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04491       ;zmieniam liczbe próbek na 1
00137E 0E01           04492       movlw       1
001380 6FB2           04493       movwf       jak_duzo_probek
001382 919F           04494       bcf      markers,czy_usrednianie
                      04495       
001384 EFCB F009      04496       goto        wykryto_up_3_wyswietl
                      04497       
Warning[208]: Label truncated at 32 characters. (wykryto_up_sprawdz_3_zwieksz_probki)
001388                04498 wykryto_up_sprawdz_3_zwieksz_probki
001388 819F           04499       bsf      markers,czy_usrednianie
00138A 0E02           04500       movlw       0x02
00138C 03B2           04501       mulwf       jak_duzo_probek
00138E 50F3           04502       movf        PRODL,w
001390 6FB2           04503       movwf       jak_duzo_probek
                      04504       
001392 EC70 F003      04505       call     ustaw_wartosc_dzielenia_usredniania      
                      04506       
001396                04507 wykryto_up_3_wyswietl
001396 51B2           04508       movf        jak_duzo_probek,w
001398 6F92           04509       movwf       tmp_hex
00139A 6B93           04510       clrf        tmp_hex_H
00139C 6B98           04511       clrf        dec1
00139E 6B97           04512       clrf        dec10
0013A0 ECF8 F001      04513       call        hex2dec18
                      04514 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04515       ;wyświetlam obok nazwy opcji czyli 
0013A4 ECE1 F00C      04516       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04517       
0013A8 EFCF F00A      04518       goto        wykryto_up_exit
                      04519             
                      04520 
0013AC                04521 wykryto_up_sprawdz_4
                      04522 
                      04523 
                      04524 
0013AC                04525 wykryto_up_sprawdz_5
0013AC 0E05           04526       movlw       opcja_ustaw_temp_R1
0013AE 63E4           04527       cpfseq      numer_opcji
0013B0 EFE6 F009      04528       goto        wykryto_up_sprawdz_6
                      04529       
                      04530             
0013B4 2BAF           04531       incf        jaka_wartosc_regulujeL1,f
                      04532       
0013B6 E306           04533       bnc         wykryto_up_sprawdz_5_dalej
                      04534       ;czy  przekroczono 0x200
                      04535             
0013B8 2BAE           04536       incf        jaka_wartosc_regulujeH1,f
                      04537       
0013BA 0E02           04538       movlw       0x02
0013BC 63AE           04539       cpfseq      jaka_wartosc_regulujeH1
0013BE EFE2 F009      04540       goto        wykryto_up_sprawdz_5_dalej
                      04541       
                      04542       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 107


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04543       ;jeżeli w H jest 3 to wyzeruj 
0013C2 6BAE           04544       clrf       jaka_wartosc_regulujeH1
                      04545       
                      04546       
0013C4                04547 wykryto_up_sprawdz_5_dalej
                      04548                                                 ; movf        jaka_wartosc_regulujeL,w
                      04549                                                 ; movwf       tmp_hex
                      04550                                                 ; movf        jaka_wartosc_regulujeH,w
                      04551                                                 ; movwf        tmp_hex_H
                      04552                                                 ; clrf        dec1
                      04553                                                 ; clrf        dec10
                      04554                                                 ; call        hex2dec18
                      04555                                           ;czyli zawartość rejestru jest zamieniana na postać dziesi
                            tną i przenoszonona do dec100 dec10 dec1
                      04556                                            ;     wyświetlam obok nazwy opcji czyli 
                      04557                                                 ; call        wykryto_enter_gdzie_wyswietlam_liczbe_bajt
                            owa
                      04558       
0013C4 EC83 F00B      04559       call  wyswietl_temp_w_opcjach
                      04560       
                      04561       
0013C8 EFCB F008      04562       goto        wykryto_down_exit
                      04563       
                      04564       
                      04565       
                      04566       
                      04567       
0013CC                04568 wykryto_up_sprawdz_6
                      04569 
0013CC 0E06           04570          movlw       opcja_ustaw_temp_R2
0013CE 63E4           04571       cpfseq      numer_opcji
0013D0 EFF6 F009      04572       goto        wykryto_up_sprawdz_7
                      04573       
                      04574             
0013D4 2BB1           04575       incf        jaka_wartosc_regulujeL2,f
                      04576       
0013D6 E306           04577       bnc         wykryto_up_sprawdz_6_dalej
                      04578       ;czy  przekroczono 0x200
                      04579             
0013D8 2BB0           04580       incf        jaka_wartosc_regulujeH2,f
                      04581       
0013DA 0E02           04582       movlw       0x02
0013DC 63B0           04583       cpfseq      jaka_wartosc_regulujeH2
0013DE EFF2 F009      04584       goto        wykryto_up_sprawdz_6_dalej
                      04585       
                      04586       
                      04587       ;jeżeli w H jest 3 to wyzeruj 
0013E2 6BB0           04588       clrf       jaka_wartosc_regulujeH2
                      04589       
                      04590       
0013E4                04591 wykryto_up_sprawdz_6_dalej
                      04592                                                 ; movf        jaka_wartosc_regulujeL,w
                      04593                                                 ; movwf       tmp_hex
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 108


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04594                                                 ; movf        jaka_wartosc_regulujeH,w
                      04595                                                 ; movwf        tmp_hex_H
                      04596                                                 ; clrf        dec1
                      04597                                                 ; clrf        dec10
                      04598                                                 ; call        hex2dec18
                      04599                                           ;czyli zawartość rejestru jest zamieniana na postać dziesi
                            tną i przenoszonona do dec100 dec10 dec1
                      04600                                            ;     wyświetlam obok nazwy opcji czyli 
                      04601                                                 ; call        wykryto_enter_gdzie_wyswietlam_liczbe_bajt
                            owa
                      04602       
0013E4 ECA6 F00B      04603       call  wyswietl_temp_w_opcjach2
                      04604       
                      04605       
0013E8 EFCB F008      04606       goto        wykryto_down_exit
                      04607 
                      04608 
                      04609 
0013EC                04610 wykryto_up_sprawdz_7
                      04611 
                      04612 
0013EC                04613 wykryto_up_sprawdz_9
                      04614 ;górna histereza 
0013EC 0E09           04615       movlw       opcja_histereza_R1_1
0013EE 63E4           04616       cpfseq      numer_opcji
0013F0 EF06 F00A      04617       goto        wykryto_up_sprawdz_10
                      04618       
                      04619       ;wlacz pomiar pradu
                      04620       ;jako test wlacz podswietlenie lub je wylacz
                      04621       
                      04622       ;btg   portlampka2,lampka2
0013F4 2BE9           04623       incf        histereza_R1_1,f
                      04624       
0013F6 51E9           04625       movf        histereza_R1_1,w
0013F8 6F92           04626       movwf       tmp_hex
                      04627       
0013FA 6B93           04628       clrf        tmp_hex_H
0013FC 6B98           04629       clrf        dec1
0013FE 6B97           04630       clrf        dec10
001400 ECF8 F001      04631       call        hex2dec18
                      04632 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04633       ;wyświetlam obok nazwy opcji czyli 
001404 ECE1 F00C      04634       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04635       
001408 EFCF F00A      04636       goto        wykryto_up_exit     
                      04637       
00140C                04638 wykryto_up_sprawdz_10
                      04639 ;dolna histereza 
00140C 0E0A           04640       movlw       opcja_histereza_R1_2
00140E 63E4           04641       cpfseq      numer_opcji
001410 EF16 F00A      04642       goto        wykryto_up_sprawdz_11
                      04643       
                      04644       ;wlacz pomiar pradu
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 109


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      04645       ;jako test wlacz podswietlenie lub je wylacz
                      04646       
                      04647       ;btg   portlampka2,lampka2
001414 2BEA           04648       incf        histereza_R1_2,f
                      04649       
001416 51EA           04650       movf        histereza_R1_2,w
001418 6F92           04651       movwf       tmp_hex
                      04652       
00141A 6B93           04653       clrf        tmp_hex_H
00141C 6B98           04654       clrf        dec1
00141E 6B97           04655       clrf        dec10
001420 ECF8 F001      04656       call        hex2dec18
                      04657 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04658       ;wyświetlam obok nazwy opcji czyli 
001424 ECE1 F00C      04659       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04660       
001428 EFCF F00A      04661       goto        wykryto_up_exit     
                      04662 
                      04663       
                      04664       
                      04665 
                      04666 
00142C                04667 wykryto_up_sprawdz_11
                      04668 ;dolna histereza 
00142C 0E0B           04669       movlw       opcja_histereza_R2_1
00142E 63E4           04670       cpfseq      numer_opcji
001430 EF26 F00A      04671       goto        wykryto_up_sprawdz_12
                      04672       
                      04673       ;wlacz pomiar pradu
                      04674       ;jako test wlacz podswietlenie lub je wylacz
                      04675       
                      04676       ;btg   portlampka2,lampka2
001434 2BEB           04677       incf        histereza_R2_1,f
                      04678       
001436 51EB           04679       movf        histereza_R2_1,w
001438 6F92           04680       movwf       tmp_hex
                      04681       
00143A 6B93           04682       clrf        tmp_hex_H
00143C 6B98           04683       clrf        dec1
00143E 6B97           04684       clrf        dec10
001440 ECF8 F001      04685       call        hex2dec18
                      04686 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04687       ;wyświetlam obok nazwy opcji czyli 
001444 ECE1 F00C      04688       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04689       
001448 EFCF F00A      04690       goto        wykryto_up_exit     
                      04691 
                      04692 
                      04693 
                      04694 
                      04695 
00144C                04696 wykryto_up_sprawdz_12
                      04697 ;dolna histereza 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 110


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00144C 0E0C           04698       movlw       opcja_histereza_R2_2
00144E 63E4           04699       cpfseq      numer_opcji
001450 EF36 F00A      04700       goto        wykryto_up_sprawdz_13
                      04701       
                      04702       ;wlacz pomiar pradu
                      04703       ;jako test wlacz podswietlenie lub je wylacz
                      04704       
                      04705       ;btg   portlampka2,lampka2
001454 2BEC           04706       incf        histereza_R2_2,f
                      04707       
001456 51EC           04708       movf        histereza_R2_2,w
001458 6F92           04709       movwf       tmp_hex
                      04710       
00145A 6B93           04711       clrf        tmp_hex_H
00145C 6B98           04712       clrf        dec1
00145E 6B97           04713       clrf        dec10
001460 ECF8 F001      04714       call        hex2dec18
                      04715 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04716       ;wyświetlam obok nazwy opcji czyli 
001464 ECE1 F00C      04717       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04718       
001468 EFCF F00A      04719       goto        wykryto_up_exit     
                      04720 
                      04721 
                      04722       
                      04723       
                      04724       
                      04725       
                      04726       
00146C                04727 wykryto_up_sprawdz_13
                      04728 
                      04729 
                      04730 
                      04731 
00146C                04732 wykryto_up_sprawdz_14
                      04733 
                      04734 
                      04735 
00146C                04736 wykryto_up_sprawdz_15 
00146C 0E0F           04737       movlw      opcja_czujnik_regulacji1 
00146E 63E4           04738       cpfseq      numer_opcji
001470 EF4D F00A      04739       goto        wykryto_up_sprawdz_16
                      04740       
                      04741       ;jezeli juz jest ustawiona ilosc czujnikow to zeruj
                      04742       
001474 0E07           04743       movlw       ilosc_czujnikow
001476 63EE           04744       cpfseq      ktory_czujnik_reguluje1
001478 EF41 F00A      04745       goto        wykryto_up_sprawdz15_increase
                      04746       
00147C 6BEE           04747       clrf        ktory_czujnik_reguluje1
00147E EF42 F00A      04748       goto        wykryto_up_sprawdz15_show
                      04749       
001482                04750 wykryto_up_sprawdz15_increase      
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 111


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001482 2BEE           04751       incf        ktory_czujnik_reguluje1,f
                      04752       
                      04753             
                      04754       
001484                04755 wykryto_up_sprawdz15_show      
001484 51EE           04756       movf        ktory_czujnik_reguluje1,w
001486 6F92           04757       movwf       tmp_hex
                      04758       
001488 6B93           04759       clrf        tmp_hex_H
00148A 6B98           04760       clrf        dec1
00148C 6B97           04761       clrf        dec10
00148E ECF8 F001      04762       call        hex2dec18
                      04763 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04764       ;wyświetlam obok nazwy opcji czyli 
001492 ECE1 F00C      04765       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04766       
001496 EFCF F00A      04767       goto        wykryto_up_exit       
                      04768       
                      04769       
                      04770       
                      04771       
                      04772       
                      04773       
                      04774       
                      04775       
                      04776       
                      04777       
                      04778       
                      04779       
                      04780       
                      04781 
                      04782       
00149A                04783 wykryto_up_sprawdz_16
                      04784      
00149A 0E10           04785          movlw      opcja_czujnik_regulacji2
00149C 63E4           04786       cpfseq      numer_opcji
00149E EF64 F00A      04787       goto        wykryto_up_sprawdz_17
                      04788       
                      04789       ;jezeli juz jest ustawiona ilosc czujnikow to zeruj
                      04790       
0014A2 0E07           04791       movlw       ilosc_czujnikow
0014A4 63EF           04792       cpfseq      ktory_czujnik_reguluje2
0014A6 EF58 F00A      04793       goto        wykryto_up_sprawdz16_increase
                      04794       
0014AA 6BEF           04795       clrf        ktory_czujnik_reguluje2
0014AC EF59 F00A      04796       goto        wykryto_up_sprawdz16_show
                      04797       
0014B0                04798 wykryto_up_sprawdz16_increase      
0014B0 2BEF           04799       incf        ktory_czujnik_reguluje2,f
                      04800       
                      04801       
0014B2                04802 wykryto_up_sprawdz16_show      
0014B2 51EF           04803       movf        ktory_czujnik_reguluje2,w
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 112


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0014B4 6F92           04804       movwf       tmp_hex
                      04805       
0014B6 6B93           04806       clrf        tmp_hex_H
0014B8 6B98           04807       clrf        dec1
0014BA 6B97           04808       clrf        dec10
0014BC ECF8 F001      04809       call        hex2dec18
                      04810 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      04811       ;wyświetlam obok nazwy opcji czyli 
0014C0 ECE1 F00C      04812       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      04813       
0014C4 EFCF F00A      04814       goto        wykryto_up_exit       
                      04815       
                      04816      
                      04817      
                      04818      
0014C8                04819 wykryto_up_sprawdz_17
                      04820      
                      04821 
                      04822 
0014C8                04823 wykryto_up_sprawdz_20
                      04824 ;ustawienia zegara
0014C8 0E14           04825       movlw       opcja_ustaw_zegar
0014CA 63E4           04826       cpfseq      numer_opcji
0014CC EFCF F00A      04827       goto        wykryto_up_sprawdz_21
                      04828       
                      04829 ;sprawdzenie która wielkość zegara podlega zmianie
                      04830 ;jeżeli dzien_10 to zmniejszam o jeden dzien_1
                      04831 ;problem polega na tym, że nie mogę skorzystać z FSR2 bo  każda z wielkości
                      04832 ;czasu musi być indywidualnie rozpatrywana
0014D0 0EDA           04833       movlw       dzien_10
0014D2 63ED           04834       cpfseq      ustawianie_czasu_co_wyswietlam
0014D4 EF81 F00A      04835       goto        wykryto_up_sprawdz_20_1
                      04836 
                      04837 ;jeżeli dzień_1 jest 9 (0x39) to jeżeli dzien_10 <> 0x39 zwieksz dzien_10
                      04838 
0014D8 0E39           04839       movlw       0x39
0014DA 63DB           04840       cpfseq      dzien_1
0014DC EF7E F00A      04841       goto        zwieksz_dzien_1
                      04842       
                      04843       ;sprawdz czy dzien_10 == 0x39
0014E0 0E39           04844       movlw       0x39
0014E2 63DA           04845       cpfseq      dzien_10
0014E4 EF79 F00A      04846       goto        zapisz_do_dzien_1_0
                      04847       
0014E8 0E30           04848       movlw       0x30 
0014EA 6FDB           04849       movwf       dzien_1            
0014EC 6FDA           04850       movwf       dzien_10
                      04851       
0014EE EFCB F00A      04852       goto        wykryto_up_sprawdz_20_4
                      04853       
0014F2                04854 zapisz_do_dzien_1_0
0014F2 0E30           04855       movlw       0x30
0014F4 6FDB           04856       movwf       dzien_1
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 113


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0014F6 2BDA           04857       incf        dzien_10,f
0014F8 EFCB F00A      04858       goto        wykryto_up_sprawdz_20_4
                      04859       
                      04860       
0014FC                04861 zwieksz_dzien_1      
0014FC 2BDB           04862       incf        dzien_1,f
                      04863       
                      04864       
0014FE EFCB F00A      04865       goto        wykryto_up_sprawdz_20_4
                      04866       
001502                04867 wykryto_up_sprawdz_20_1
001502 0EDC           04868       movlw       godziny_10
001504 63ED           04869       cpfseq      ustawianie_czasu_co_wyswietlam
001506 EF9E F00A      04870       goto        wykryto_up_sprawdz_20_2
                      04871       
                      04872       ;najpierw sprawdze czy godziny_1 i godziny_10 == 23 godzina bo wtedy wpisuje 00
00150A 0E33           04873       movlw       0x33
00150C 63DD           04874       cpfseq      godziny_1
00150E EF92 F00A      04875       goto        sprawdz_zwiekszanie_godzin_normalnie
001512 0E32           04876       movlw       0x32
001514 63DC           04877       cpfseq      godziny_10
001516 EF92 F00A      04878       goto        sprawdz_zwiekszanie_godzin_normalnie
                      04879       
                      04880 ;jest godzina 23 => zapisz do godzin 00      
00151A 0E30           04881       movlw       0x30
00151C 6FDC           04882       movwf       godziny_10      
00151E 6FDD           04883       movwf       godziny_1
001520 EFCB F00A      04884       goto        wykryto_up_sprawdz_20_4
                      04885       
Warning[208]: Label truncated at 32 characters. (sprawdz_zwiekszanie_godzin_normalnie)
001524                04886 sprawdz_zwiekszanie_godzin_normalnie      
001524 0E39           04887       movlw       0x39
001526 63DD           04888       cpfseq      godziny_1
001528 EF9B F00A      04889       goto        zwieksz_godziny_1      
                      04890 
00152C 0E30           04891       movlw       0x30
00152E 6FDD           04892       movwf       godziny_1
001530 2BDC           04893       incf        godziny_10,f
001532 EFCB F00A      04894       goto        wykryto_up_sprawdz_20_4
                      04895             
001536                04896 zwieksz_godziny_1      
001536 2BDD           04897       incf        godziny_1,f
                      04898       
                      04899       
001538 EFCB F00A      04900       goto        wykryto_up_sprawdz_20_4
                      04901       
                      04902       
00153C                04903 wykryto_up_sprawdz_20_2
00153C 0EDE           04904       movlw       minuty_10
00153E 63ED           04905       cpfseq      ustawianie_czasu_co_wyswietlam
001540 EFB7 F00A      04906       goto        wykryto_up_sprawdz_20_3
                      04907       
                      04908       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 114


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001544 0E39           04909       movlw       0x39
001546 63DF           04910       cpfseq      minuty_1
001548 EFB4 F00A      04911       goto        zwieksz_minuty_1
                      04912      
00154C 0E35           04913       movlw       0x35
00154E 63DE           04914       cpfseq      minuty_10
001550 EFAF F00A      04915       goto        zapisz_do_minuty_1_0
                      04916       
001554 0E30           04917       movlw       0x30
001556 6FDE           04918       movwf       minuty_10
001558 6FDF           04919       movwf       minuty_1
                      04920       
00155A EFCB F00A      04921       goto        wykryto_up_sprawdz_20_4
                      04922       
00155E                04923 zapisz_do_minuty_1_0
00155E 0E30           04924       movlw       0x30
001560 6FDF           04925       movwf       minuty_1
001562 2BDE           04926       incf        minuty_10,f
001564 EFCB F00A      04927       goto        wykryto_up_sprawdz_20_4
                      04928       
                      04929       
001568                04930 zwieksz_minuty_1      
001568 2BDF           04931       incf        minuty_1,f
                      04932       
00156A EFCB F00A      04933       goto        wykryto_up_sprawdz_20_4
                      04934       
00156E                04935 wykryto_up_sprawdz_20_3
00156E 0E30           04936       movlw       0x30
001570 63E1           04937       cpfseq      sekundy_1
001572 EFCA F00A      04938       goto        zwieksz_sekundy_1
                      04939       
                      04940       ;sprawdz czy dzien_10 == 0x30
001576 0E30           04941       movlw       0x30
001578 63E0           04942       cpfseq      sekundy_10
00157A EFC5 F00A      04943       goto        zapisz_do_sekundy_1_0
                      04944       
00157E 0E35           04945       movlw       0x35
001580 6FE0           04946       movwf       sekundy_10
001582 0E39           04947       movlw       0x39
001584 6FE1           04948       movwf       sekundy_1
                      04949       
001586 EFCB F00A      04950       goto        wykryto_up_sprawdz_20_4
                      04951       
00158A                04952 zapisz_do_sekundy_1_0
00158A 0E30           04953       movlw       0x30
00158C 6FE1           04954       movwf       sekundy_1
00158E 2BE0           04955       incf        sekundy_10,f
001590 EFCB F00A      04956       goto        wykryto_up_sprawdz_20_4
                      04957       
                      04958       
001594                04959 zwieksz_sekundy_1      
001594 2BE1           04960       incf        sekundy_1,f
                      04961       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 115


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001596                04962 wykryto_up_sprawdz_20_4            
                      04963 
001596 EC0E F00D      04964       call        procedura_wyswietlania_kolejnych_liczb_zegara
00159A EFCF F00A      04965       goto        wykryto_up_exit
                      04966 
                      04967      
                      04968 
                      04969      
                      04970      
00159E                04971 wykryto_up_sprawdz_21
                      04972      
                      04973 
                      04974      
00159E                04975 wykryto_up_exit
00159E B59E           04976       btfsc   znaczniki,czy_moge_juz_zmieniac
0015A0 EFD6 F00A      04977       goto    wykryto_up_exit_trzymanie
0015A4 9BA1           04978       bcf   markers3,dzialanie_po_klawiszu
0015A6 6B99           04979       clrf  stan_key
0015A8 EF00 F00E      04980       goto  LOOP11
                      04981  
0015AC                04982 wykryto_up_exit_trzymanie
0015AC 959E           04983       bcf     znaczniki,czy_moge_juz_zmieniac
0015AE 0012           04984       return      
                      04985  
                      04986 
                      04987 
                      04988 
                      04989 
                      04990 ;############################################
                      04991 ;#####
                      04992 ;######PISZ na ekranie słowa z tablicy opcji menu
                      04993 
                      04994 
0015B0                04995 wyswietl_opcje_menu
0015B0 EC32 F001      04996       call        check_busy
0015B4 0E80           04997       movlw       linia_gorna
0015B6 0F01           04998       addlw       1        
0015B8 ECF4 F000      04999       call        send
0015BC EC32 F001      05000       call        check_busy
0015C0                05001 czytam_pierwsza_linie
                      05002       
                      05003       ;czytam aktualny adres i zwiekszam
0015C0 0009           05004       TBLRD       *+
                      05005       
0015C2 50F5           05006       movf        TABLAT,w
                      05007       ;jezeli 0 to skocz do wyswietlania slowa z linii 2
0015C4 E006           05008       bz          czytam_druga_linie
0015C6 EC05 F001      05009       call        write_lcd
0015CA EC32 F001      05010       call        check_busy
0015CE EFE0 F00A      05011       goto        czytam_pierwsza_linie
                      05012       
0015D2                05013 czytam_druga_linie
                      05014       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 116


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0015D2 0EC0           05015       movlw       linia_dolna
0015D4 0F01           05016       addlw       1        
0015D6 ECF4 F000      05017       call        send
0015DA EC32 F001      05018       call        check_busy
                      05019       
0015DE                05020 czytam_druga_linie2
                      05021       ;czytam aktualny adres i zwiekszam
0015DE 0009           05022       TBLRD       *+
                      05023       
0015E0 50F5           05024       movf        TABLAT,w
                      05025       ;jezeli 0 to skocz do wyswietlania slowa z linii 2
0015E2 E006           05026       bz          czytam_trzecia_linie
0015E4 EC05 F001      05027       call        write_lcd
0015E8 EC32 F001      05028       call        check_busy
                      05029       
0015EC EFEF F00A      05030       goto        czytam_druga_linie2
                      05031       
0015F0                05032 czytam_trzecia_linie
0015F0 0E90           05033       movlw       linia_trzecia
0015F2 0F01           05034       addlw       1        
0015F4 ECF4 F000      05035       call        send
0015F8 EC32 F001      05036       call        check_busy
0015FC                05037 czytam_trzecia_linie2      
0015FC 0009           05038       TBLRD       *+
                      05039       
0015FE 50F5           05040       movf        TABLAT,w
                      05041       ;jezeli 0 to skocz do wyswietlania slowa z linii 2
001600 E006           05042       bz          czytam_4_linie
001602 EC05 F001      05043       call        write_lcd
001606 EC32 F001      05044       call        check_busy
                      05045       
00160A EFFE F00A      05046       goto        czytam_trzecia_linie2
                      05047       
00160E                05048 czytam_4_linie
00160E 0ED0           05049       movlw       linia_czwarta
001610 0F01           05050       addlw       1        
001612 ECF4 F000      05051       call        send
001616 EC32 F001      05052       call        check_busy
                      05053       
00161A                05054 czytam_4_linie2
00161A 0009           05055       TBLRD       *+
                      05056       
00161C 50F5           05057       movf        TABLAT,w
                      05058       ;jezeli 0 to skocz do wyswietlania slowa z linii 2
00161E E006           05059       bz          czytam_4_linie3
001620 EC05 F001      05060       call        write_lcd
001624 EC32 F001      05061       call        check_busy
                      05062       
001628 EF0D F00B      05063       goto        czytam_4_linie2
                      05064       
00162C                05065 czytam_4_linie3
00162C 0012           05066       return 
                      05067  
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 117


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05068  
                      05069  
                      05070  
                      05071  
                      05072  
                      05073  
                      05074  
                      05075  
                      05076  
                      05077  
                      05078  
                      05079  
                      05080  
                      05081  
                      05082  
                      05083  
                      05084  
                      05085  
                      05086  
                      05087  
                      05088  
                      05089  
                      05090 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;   
                      05091 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                                ENTER
                      05092 
00162E                05093 wykryto_enter
                      05094       ;co sie dzieje jezeli wykryje ze wcisnieto i puszczono klawisz enter
                      05095       
00162E BFE3           05096       btfsc       pozycja_menu,zmiana_opcji
001630 EF5E F00C      05097       goto        wykryto_enter_zmiana_opcji
                      05098       
001634 51E3           05099       movf        pozycja_menu,w
001636 E121           05100       bnz         sprawdz_czy_wchodze_do_zmiany_opcji
                      05101 ;jezeli pozycja menu ==0 to po nacisnieciu klawisza enter wyswietlane sa napisy ekranu menu 0 i gwiazdka
                             w linii pierwszej przy pierwszej opcji
                      05102       
                      05103       ;wylaczam wskazywanie temperatur i czasu
001638 9B9F           05104       bcf         markers,czy_wyswietlam_temp
00163A 95A1           05105       bcf         markers3,czy_zegar_wyswietlac
                      05106       
                      05107       
                      05108       
00163C EC32 F001      05109       call        check_busy
001640 0E01           05110       movlw       display_clear
001642 ECF4 F000      05111       call        send
001646 EC32 F001      05112       call        check_busy
                      05113       
00164A 0E01           05114       movlw       1
00164C 6FE3           05115       movwf       pozycja_menu
00164E 6FE5           05116       movwf       polozenie_gwiazdki
                      05117       
001650 6FE4           05118       movwf        numer_opcji
                      05119             
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 118


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001652 EC32 F001      05120       call        check_busy
001656 0E80           05121       movlw       linia_gorna
                      05122       
001658 ECF4 F000      05123       call        send
00165C EC32 F001      05124       call        check_busy
001660 0E2A           05125       movlw       _star
001662 EC05 F001      05126       call        write_lcd
001666 EC32 F001      05127       call        check_busy
                      05128       
                      05129       
00166A 0E1B           05130       movlw       HIGH tablica_pierwsza
00166C 6EF7           05131       movwf       TBLPTRH
                      05132       
00166E 0E00           05133       movlw       LOW tablica_pierwsza
001670 6EF6           05134       movwf       TBLPTRL
                      05135       
001672 ECD8 F00A      05136       call  wyswietl_opcje_menu
                      05137       
001676 EFD2 F00C      05138       goto        wykryto_enter_exit     
                      05139       
                      05140       
                      05141       
                      05142       
                      05143       
                      05144       
                      05145       
                      05146 ;;;; numery opcji odpowiadają 
                      05147 
                      05148 ;położeniu w menu      
                      05149       
Warning[208]: Label truncated at 32 characters. (sprawdz_czy_wchodze_do_zmiany_opcji)
00167A                05150 sprawdz_czy_wchodze_do_zmiany_opcji
00167A 0E01           05151       movlw       opcja_czujniki
00167C 63E4           05152       cpfseq      numer_opcji
00167E EF50 F00B      05153       goto        wykryto_enter_sprawdz_opcje2
                      05154       ;obok nazwy opcji wypisuje aktualna ilosc mierzonych temperatur
                      05155       ;naciskanie klawiszy gora/ dół to zmiana ilości kanałów mierzonych
                      05156       ;klawisz enter lub back powoduje zatwierdzenie pomiarów 
                      05157       
                      05158       ;opcja wyboru jest umieszczona na pierwszej linii ekranu
                      05159       ;
                      05160       ;*pomiar t   2
                      05161       ;na 12 znaku linii pierwszej piszemy aktualną cyfrę kanałów
001682 EC32 F001      05162       call     check_busy
001686 0E80           05163       movlw    linia_gorna
001688 0F0A           05164       addlw       polozenie_liczby_menu
00168A ECF4 F000      05165       call      send
                      05166       ;
00168E EC32 F001      05167       call     check_busy
001692 51A6           05168       movf        ile_kanalow,w
001694 0F30           05169       addlw       0x30
001696 EC05 F001      05170       call        write_lcd
                      05171             
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 119


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05172       ;zaznaczam ze jest zmiana opcji
00169A 8FE3           05173       bsf         pozycja_menu,zmiana_opcji
                      05174       
00169C EFD2 F00C      05175       goto        wykryto_enter_exit
                      05176       
                      05177       
                      05178       
                      05179       
                      05180       
                      05181       
                      05182       
                      05183       
                      05184       
                      05185       
                      05186       
                      05187       
                      05188       
                      05189       
                      05190       
                      05191       
                      05192       
                      05193       
0016A0                05194 wykryto_enter_sprawdz_opcje2
                      05195 
0016A0 0E02           05196       movlw       opcja_odstep
0016A2 63E4           05197       cpfseq      numer_opcji
0016A4 EF60 F00B      05198       goto        wykryto_enter_sprawdz_opcje3
                      05199 
                      05200       ;pokaz na ekranie ustawienie aktualne odstępu w s.
0016A8 51A8           05201       movf        odstep_pomiarowy,w
0016AA 6F92           05202       movwf       tmp_hex
0016AC 6B93           05203       clrf        tmp_hex_H
0016AE 6B98           05204       clrf        dec1
0016B0 6B97           05205       clrf        dec10
0016B2 ECF8 F001      05206       call        hex2dec18
                      05207 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05208       ;wyświetlam obok nazwy opcji czyli 
0016B6 ECE1 F00C      05209       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05210       
                      05211       ;zaznaczam ze jest zmiana opcji
0016BA 8FE3           05212       bsf         pozycja_menu,zmiana_opcji
                      05213       
0016BC EFD2 F00C      05214       goto        wykryto_enter_exit
                      05215       
                      05216       
                      05217       
                      05218       
                      05219       
                      05220       
                      05221       
                      05222       
                      05223       
                      05224       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 120


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05225       
                      05226       
                      05227       
                      05228       
                      05229       
                      05230       
                      05231       
0016C0                05232 wykryto_enter_sprawdz_opcje3
                      05233 ;ustaw srednia
0016C0 0E03           05234       movlw       opcja_srednia
0016C2 63E4           05235       cpfseq      numer_opcji
0016C4 EF70 F00B      05236       goto        wykryto_enter_sprawdz_opcje4
                      05237 
                      05238       ;pokaz na ekranie ustawienie aktualne odstępu w s.
0016C8 51B2           05239       movf        jak_duzo_probek,w
0016CA 6F92           05240       movwf       tmp_hex
0016CC 6B93           05241       clrf        tmp_hex_H
0016CE 6B98           05242       clrf        dec1
0016D0 6B97           05243       clrf        dec10
0016D2 ECF8 F001      05244       call        hex2dec18
                      05245 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05246       ;wyświetlam obok nazwy opcji czyli 
0016D6 ECE1 F00C      05247       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05248       
0016DA 8FE3           05249       bsf         pozycja_menu,zmiana_opcji
                      05250       
0016DC EFD2 F00C      05251       goto        wykryto_enter_exit
                      05252       
                      05253       
                      05254       
                      05255       
0016E0                05256 wykryto_enter_sprawdz_opcje4
0016E0 0E04           05257       movlw       opcja_pomiar_i
0016E2 63E4           05258       cpfseq      numer_opcji
0016E4 EF7A F00B      05259       goto        wykryto_enter_sprawdz_opcje5
                      05260       
0016E8 0E02           05261       movlw       2
0016EA 6FD8           05262       movwf       jak_duzo_kanalow_pradu
0016EC 6BD9           05263       clrf        ktory_aktualnie_kanal_pradu
                      05264       
0016EE 71A1           05265       btg   markers3,pomiary_pradu
                      05266       
                      05267       
0016F0 EFD2 F00C      05268       goto        wykryto_enter_exit
                      05269      
                      05270 
                      05271 
                      05272       
                      05273       
                      05274       
                      05275       
0016F4                05276 wykryto_enter_sprawdz_opcje5
0016F4 0E05           05277       movlw       opcja_ustaw_temp_R1
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 121


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0016F6 63E4           05278       cpfseq      numer_opcji
0016F8 EF9D F00B      05279       goto        wykryto_enter_sprawdz_opcje6
                      05280       
                      05281       
                      05282       
                      05283                                           ;movf        jaka_wartosc_regulujeL,w      
                      05284                                           ;movwf       tmp_hex
                      05285                                           ;movf        jaka_wartosc_regulujeH,w
                      05286                                           ;movwf        tmp_hex_H
                      05287                                           ;clrf        dec1
                      05288                                           ;clrf        dec10
                      05289                                           ;call        hex2dec18
                      05290                                           ;call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05291                                           
0016FC EC83 F00B      05292       call  wyswietl_temp_w_opcjach
                      05293       
001700 8FE3           05294       bsf         pozycja_menu,zmiana_opcji
                      05295       
001702 EFD2 F00C      05296       goto        wykryto_enter_exit
                      05297       
001706                05298 wyswietl_temp_w_opcjach      
001706 51AF           05299       movf        jaka_wartosc_regulujeL1,w
                      05300            ;dziele przez 4
001708 0D40           05301       mullw       0x40
                      05302       
00170A 50F3           05303       movf        PRODL,w
00170C 6F9D           05304       movwf       wynik01
                      05305       
                      05306       ;temperatura jest w bajcie starszym
00170E 50F4           05307       movf        PRODH,w
001710 6F92           05308       movwf       tmp_hex
                      05309       
001712 51AE           05310       movf        jaka_wartosc_regulujeH1,w
001714 6F93           05311       movwf        tmp_hex_H
                      05312       
001716 ECF8 F001      05313          call     hex2dec18
                      05314          
00171A 0E1B           05315          movlw       HIGH tablica_gwiazdki
00171C 6EF7           05316       movwf       TBLPTRH
                      05317       
00171E 0EC4           05318       movlw       LOW tablica_gwiazdki
001720 6EF6           05319       movwf       TBLPTRL
                      05320       
                      05321       ;poniewaz najpierw zmniejszam polozenie
                      05322       
001722 51E5           05323       movf       polozenie_gwiazdki,w
                      05324       
001724 26F6           05325       addwf       TBLPTRL,f
                      05326       
                      05327       
                      05328       
001726 EC32 F001      05329       call        check_busy
                      05330        ;a nastepnie czytam to uzywam polecenia
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 122


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00172A 0008           05331       TBLRD *
00172C 50F5           05332       movf        TABLAT,w
                      05333   ;teraz należy do adresu lini dodać miejsce położenia cyfry 100
                      05334   
                      05335 
00172E 0F0A           05336       addlw       polozenie_liczby_menu
001730 ECF4 F000      05337       call        send
                      05338          
001734 EC40 F004      05339        call     wyswietl_cyfry_temperatury_opcje
                      05340       
001738 0012           05341       return
                      05342 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05343       ;wyświetlam obok nazwy opcji czyli 
                      05344       
                      05345       
                      05346       
                      05347       
                      05348       
                      05349       
                      05350       
                      05351       
                      05352       
00173A                05353 wykryto_enter_sprawdz_opcje6
00173A 0E06           05354       movlw       opcja_ustaw_temp_R2
00173C 63E4           05355       cpfseq      numer_opcji
00173E EFC0 F00B      05356       goto        wykryto_enter_sprawdz_opcje7
                      05357       
                      05358       
                      05359       
                      05360                                           ;movf        jaka_wartosc_regulujeL,w      
                      05361                                           ;movwf       tmp_hex
                      05362                                           ;movf        jaka_wartosc_regulujeH,w
                      05363                                           ;movwf        tmp_hex_H
                      05364                                           ;clrf        dec1
                      05365                                           ;clrf        dec10
                      05366                                           ;call        hex2dec18
                      05367                                           ;call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05368                                           
001742 ECA6 F00B      05369       call  wyswietl_temp_w_opcjach2
                      05370       
001746 8FE3           05371       bsf         pozycja_menu,zmiana_opcji
                      05372       
001748 EFD2 F00C      05373       goto        wykryto_enter_exit
                      05374       
00174C                05375 wyswietl_temp_w_opcjach2      
00174C 51B1           05376       movf        jaka_wartosc_regulujeL2,w
                      05377           
00174E 0D40           05378       mullw       0x40
                      05379       
001750 50F3           05380       movf        PRODL,w
001752 6F9D           05381       movwf       wynik01
                      05382       
                      05383       ;temperatura jest w bajcie starszym
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 123


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001754 50F4           05384       movf        PRODH,w
001756 6F92           05385       movwf       tmp_hex
                      05386       
001758 51B0           05387       movf        jaka_wartosc_regulujeH2,w
00175A 6F93           05388       movwf        tmp_hex_H
                      05389       
00175C ECF8 F001      05390          call     hex2dec18
                      05391          
001760 0E1B           05392          movlw       HIGH tablica_gwiazdki
001762 6EF7           05393       movwf       TBLPTRH
                      05394       
001764 0EC4           05395       movlw       LOW tablica_gwiazdki
001766 6EF6           05396       movwf       TBLPTRL
                      05397       
                      05398       ;poniewaz najpierw zmniejszam polozenie
                      05399       
001768 51E5           05400       movf       polozenie_gwiazdki,w
                      05401       
00176A 26F6           05402       addwf       TBLPTRL,f
                      05403       
                      05404       
                      05405       
00176C EC32 F001      05406       call        check_busy
                      05407        ;a nastepnie czytam to uzywam polecenia
001770 0008           05408       TBLRD *
001772 50F5           05409       movf        TABLAT,w
                      05410   ;teraz należy do adresu lini dodać miejsce położenia cyfry 100
                      05411   
                      05412 
001774 0F0A           05413       addlw       polozenie_liczby_menu
001776 ECF4 F000      05414       call        send
                      05415          
00177A EC40 F004      05416        call     wyswietl_cyfry_temperatury_opcje
                      05417       
00177E 0012           05418       return
                      05419 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05420       ;wyświetlam obok nazwy opcji czyli 
                      05421       
                      05422       
                      05423       
                      05424       
                      05425       
                      05426       
                      05427       
                      05428       
                      05429       
                      05430       
                      05431       
                      05432       
                      05433      
                      05434      
                      05435      
                      05436      
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 124


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05437      
                      05438      
                      05439      
                      05440      
                      05441      
                      05442      
                      05443      
                      05444      
                      05445      
                      05446      
                      05447      
                      05448      
                      05449      
                      05450      
                      05451      
                      05452      
                      05453      
                      05454      
                      05455      
001780                05456 wykryto_enter_sprawdz_opcje7
                      05457 
001780 0E07           05458       movlw       opcja_wlacz_1
001782 63E4           05459       cpfseq      numer_opcji
001784 EFC7 F00B      05460       goto        wykryto_enter_sprawdz_opcje8
                      05461       
001788 7081           05462       btg   port_triak,triak1
                      05463       
                      05464       
                      05465       
00178A EFD2 F00C      05466       goto        wykryto_enter_exit
                      05467       
                      05468       
                      05469       
                      05470       
                      05471       
                      05472       
                      05473       
                      05474       
                      05475       
                      05476       
                      05477       
                      05478       
                      05479       
                      05480       
                      05481       
                      05482       
                      05483       
00178E                05484 wykryto_enter_sprawdz_opcje8
00178E 0E08           05485       movlw       opcja_wlacz_2
001790 63E4           05486       cpfseq      numer_opcji
001792 EFCE F00B      05487       goto        wykryto_enter_sprawdz_opcje9
                      05488       
001796 7281           05489       btg   port_triak,triak2
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 125


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05490       
                      05491       
                      05492       
001798 EFD2 F00C      05493       goto        wykryto_enter_exit
                      05494       
                      05495       
                      05496       
                      05497       
                      05498       
                      05499       
                      05500       
                      05501       
                      05502       
                      05503       
                      05504       
                      05505       
                      05506       
                      05507       
                      05508       
00179C                05509 wykryto_enter_sprawdz_opcje9
00179C 0E09           05510       movlw       opcja_histereza_R1_1
00179E 63E4           05511       cpfseq      numer_opcji
0017A0 EFDE F00B      05512       goto        wykryto_enter_sprawdz_opcje10
                      05513       
                      05514       ;wlacz pomiar pradu
                      05515       ;jako test wlacz podswietlenie lub je wylacz
                      05516       
                      05517       ;btg   portlampka2,lampka2
0017A4 51E9           05518       movf        histereza_R1_1,w
0017A6 6F92           05519       movwf       tmp_hex
                      05520       
0017A8 6B93           05521       clrf        tmp_hex_H
0017AA 6B98           05522       clrf        dec1
0017AC 6B97           05523       clrf        dec10
0017AE ECF8 F001      05524       call        hex2dec18
                      05525 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05526       ;wyświetlam obok nazwy opcji czyli 
0017B2 ECE1 F00C      05527       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05528       
0017B6 8FE3           05529       bsf         pozycja_menu,zmiana_opcji
                      05530       
0017B8 EFD2 F00C      05531       goto        wykryto_enter_exit
                      05532 
                      05533       
                      05534       
                      05535       
                      05536       
                      05537       
                      05538       
0017BC                05539 wykryto_enter_sprawdz_opcje10
0017BC 0E0A           05540          movlw       opcja_histereza_R1_2
0017BE 63E4           05541       cpfseq      numer_opcji
0017C0 EFEE F00B      05542       goto        wykryto_enter_sprawdz_opcje11
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 126


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05543       
                      05544       ;wlacz pomiar pradu
                      05545       ;jako test wlacz podswietlenie lub je wylacz
                      05546       
                      05547       ;btg   portlampka2,lampka2
0017C4 51EA           05548       movf        histereza_R1_2,w
0017C6 6F92           05549       movwf       tmp_hex
                      05550       
0017C8 6B93           05551       clrf        tmp_hex_H
0017CA 6B98           05552       clrf        dec1
0017CC 6B97           05553       clrf        dec10
0017CE ECF8 F001      05554       call        hex2dec18
                      05555 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05556       ;wyświetlam obok nazwy opcji czyli 
0017D2 ECE1 F00C      05557       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05558       
0017D6 8FE3           05559       bsf         pozycja_menu,zmiana_opcji
                      05560       
0017D8 EFD2 F00C      05561       goto        wykryto_enter_exit
                      05562       
                      05563       
                      05564     
                      05565     
0017DC                05566 wykryto_enter_sprawdz_opcje11
0017DC 0E0B           05567       movlw       opcja_histereza_R2_1
0017DE 63E4           05568       cpfseq      numer_opcji
0017E0 EFFE F00B      05569       goto        wykryto_enter_sprawdz_opcje12
                      05570       
                      05571       ;wlacz pomiar pradu
                      05572       ;jako test wlacz podswietlenie lub je wylacz
                      05573       
                      05574       ;btg   portlampka2,lampka2
0017E4 51EB           05575       movf        histereza_R2_1,w
0017E6 6F92           05576       movwf       tmp_hex
                      05577       
0017E8 6B93           05578       clrf        tmp_hex_H
0017EA 6B98           05579       clrf        dec1
0017EC 6B97           05580       clrf        dec10
0017EE ECF8 F001      05581       call        hex2dec18
                      05582 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05583       ;wyświetlam obok nazwy opcji czyli 
0017F2 ECE1 F00C      05584       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05585       
0017F6 8FE3           05586       bsf         pozycja_menu,zmiana_opcji
                      05587       
0017F8 EFD2 F00C      05588       goto        wykryto_enter_exit
                      05589 
                      05590       
                      05591       
                      05592       
                      05593       
                      05594       
                      05595       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 127


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0017FC                05596 wykryto_enter_sprawdz_opcje12
0017FC 0E0C           05597          movlw       opcja_histereza_R2_2
0017FE 63E4           05598       cpfseq      numer_opcji
001800 EF0E F00C      05599       goto        wykryto_enter_sprawdz_opcje13
                      05600       
                      05601       ;wlacz pomiar pradu
                      05602       ;jako test wlacz podswietlenie lub je wylacz
                      05603       
                      05604       ;btg   portlampka2,lampka2
001804 51EC           05605       movf        histereza_R2_2,w
001806 6F92           05606       movwf       tmp_hex
                      05607       
001808 6B93           05608       clrf        tmp_hex_H
00180A 6B98           05609       clrf        dec1
00180C 6B97           05610       clrf        dec10
00180E ECF8 F001      05611       call        hex2dec18
                      05612 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05613       ;wyświetlam obok nazwy opcji czyli 
001812 ECE1 F00C      05614       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05615       
001816 8FE3           05616       bsf         pozycja_menu,zmiana_opcji
                      05617       
001818 EFD2 F00C      05618       goto        wykryto_enter_exit
                      05619       
                      05620     
                      05621     
                      05622     
                      05623     
                      05624     
                      05625 
                      05626       
                      05627        
                      05628 
                      05629        
00181C                05630 wykryto_enter_sprawdz_opcje13
00181C 0E0D           05631       movlw       opcja_regulacja1
00181E 63E4           05632       cpfseq      numer_opcji
001820 EF15 F00C      05633       goto        wykryto_enter_sprawdz_opcje14
                      05634       
001824 73A2           05635       btg         markers_regulacja,reguluj1
                      05636       
001826 EFD2 F00C      05637       goto        wykryto_enter_exit
                      05638        
                      05639        
                      05640        
                      05641        
00182A                05642 wykryto_enter_sprawdz_opcje14
00182A 0E0E           05643       movlw       opcja_regulacja2
00182C 63E4           05644       cpfseq      numer_opcji
00182E EF1C F00C      05645       goto        wykryto_enter_sprawdz_opcje15
                      05646       
001832 77A2           05647       btg         markers_regulacja,reguluj2
                      05648       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 128


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001834 EFD2 F00C      05649       goto        wykryto_enter_exit
                      05650 
                      05651 
                      05652       
                      05653       
001838                05654 wykryto_enter_sprawdz_opcje15
001838 0E0F           05655       movlw       opcja_czujnik_regulacji1
00183A 63E4           05656       cpfseq      numer_opcji
00183C EF2C F00C      05657       goto        wykryto_enter_sprawdz_opcje16
                      05658       
                      05659       ;wlacz pomiar pradu
                      05660       ;jako test wlacz podswietlenie lub je wylacz
                      05661       
                      05662       ;btg   portlampka2,lampka2
001840 51EE           05663       movf        ktory_czujnik_reguluje1,w
001842 6F92           05664       movwf       tmp_hex
                      05665       
001844 6B93           05666       clrf        tmp_hex_H
001846 6B98           05667       clrf        dec1
001848 6B97           05668       clrf        dec10
00184A ECF8 F001      05669       call        hex2dec18
                      05670 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05671       ;wyświetlam obok nazwy opcji czyli 
00184E ECE1 F00C      05672       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05673       
001852 8FE3           05674       bsf         pozycja_menu,zmiana_opcji
                      05675       
001854 EFD2 F00C      05676       goto        wykryto_enter_exit
                      05677 
                      05678 
                      05679       
                      05680       
001858                05681 wykryto_enter_sprawdz_opcje16
001858 0E10           05682           movlw       opcja_czujnik_regulacji2
00185A 63E4           05683       cpfseq      numer_opcji
00185C EF2C F00C      05684       goto        wykryto_enter_sprawdz_opcje16
                      05685       
                      05686       ;wlacz pomiar pradu
                      05687       ;jako test wlacz podswietlenie lub je wylacz
                      05688       
                      05689       ;btg   portlampka2,lampka2
001860 51EF           05690       movf        ktory_czujnik_reguluje2 ,w
001862 6F92           05691       movwf       tmp_hex
                      05692       
001864 6B93           05693       clrf        tmp_hex_H
001866 6B98           05694       clrf        dec1
001868 6B97           05695       clrf        dec10
00186A ECF8 F001      05696       call        hex2dec18
                      05697 ;czyli zawartość rejestru jest zamieniana na postać dziesiętną i przenoszonona do dec100 dec10 dec1
                      05698       ;wyświetlam obok nazwy opcji czyli 
00186E ECE1 F00C      05699       call        wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      05700       
001872 8FE3           05701       bsf         pozycja_menu,zmiana_opcji
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 129


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05702       
001874 EFD2 F00C      05703       goto        wykryto_enter_exit
                      05704 
                      05705       
                      05706 ; wykryto_enter_sprawdz_opcje12
                      05707       ; movlw       opcja_ustaw_serial
                      05708       ; cpfseq      numer_opcji
                      05709       ; goto        wykryto_enter_sprawdz_opcje13
                      05710       ; btg         markers,czy_wysylac_pomiary_serial      
                      05711       ; goto        wykryto_enter_exit
                      05712       
                      05713       
                      05714       
                      05715       
                      05716       
                      05717       
001878                05718 wykryto_enter_sprawdz_opcje17      
                      05719 
001878 0E11           05720       movlw       opcja_wyswietl_zegar
00187A 63E4           05721       cpfseq      numer_opcji
00187C EF43 F00C      05722       goto        wykryto_enter_sprawdz_opcje18
                      05723       
001880 739E           05724       btg   znaczniki,czy_ponownie_wlaczyc_zegar
                      05725       
001882 EFD2 F00C      05726       goto        wykryto_enter_exit
                      05727       
                      05728 
                      05729       
001886                05730 wykryto_enter_sprawdz_opcje18
                      05731 
001886 0E12           05732       movlw       opcja_wyswietl_temp
001888 63E4           05733       cpfseq      numer_opcji
00188A EF4A F00C      05734       goto        wykryto_enter_sprawdz_opcje19
                      05735       
00188E 719E           05736       btg   znaczniki,czy_ponownie_wlaczyc_temp
                      05737       
001890 EFD2 F00C      05738       goto        wykryto_enter_exit
                      05739 
                      05740       
                      05741 
                      05742       
001894                05743 wykryto_enter_sprawdz_opcje19
                      05744 
001894 0E13           05745       movlw       opcja_podswietlenie
001896 63E4           05746       cpfseq      numer_opcji
001898 EF4A F00C      05747       goto        wykryto_enter_sprawdz_opcje19
                      05748       
00189C 7881           05749       btg   portlampka2,lampka2
                      05750       
00189E EFD2 F00C      05751       goto        wykryto_enter_exit
                      05752 
                      05753 
                      05754 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 130


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05755       
                      05756      
0018A2                05757 wykryto_enter_sprawdz_opcje20
0018A2 0E14           05758       movlw       opcja_ustaw_zegar
0018A4 63E4           05759       cpfseq      numer_opcji
0018A6 EF5C F00C      05760       goto        wykryto_enter_sprawdz_opcje21
                      05761       ;czyszcze rejestr przechowujący wyświetlaną liczbę
0018AA 0EDA           05762       movlw       dzien_10
0018AC 6FED           05763       movwf        ustawianie_czasu_co_wyswietlam
0018AE 8FE3           05764       bsf         pozycja_menu,zmiana_opcji
                      05765       
0018B0 EC0E F00D      05766       call        procedura_wyswietlania_kolejnych_liczb_zegara
                      05767       
                      05768       
0018B4 EFD2 F00C      05769       goto        wykryto_enter_exit
                      05770             
                      05771       
                      05772       
                      05773       
0018B8                05774 wykryto_enter_sprawdz_opcje21
0018B8 EFD2 F00C      05775       goto        wykryto_enter_exit
                      05776       
                      05777       
                      05778       
                      05779       
                      05780       
                      05781       
                      05782 ;;;;;;;;;;
                      05783 
                      05784 ;;;;;;       kolejne opcje numery przy wyjsciu z nich
                      05785 ;;;;      
                      05786       
0018BC                05787 wykryto_enter_zmiana_opcji
0018BC 0E01           05788       movlw       opcja_czujniki
0018BE 63E4           05789       cpfseq      numer_opcji
0018C0 EF70 F00C      05790       goto          wykryto_enter_wyjscie_opcje2
                      05791       
                      05792       
0018C4 EC01 F00D      05793       call     enter_back_wyjsc_z_opcji_czujniki
                      05794       
                      05795       ;jeżeli zmieniam ilość obsługiwanych czujników temp
                      05796       ;to tu powinno być wyjście z opcji włączania czujników
                      05797       ;czyli jeżeli ile_kanalow > 0 to włącz pomiary
                      05798       
0018C8 51A6           05799       movf         ile_kanalow,w
0018CA E06C           05800       bz          wykryto_enter_exit
                      05801       
                      05802       
0018CC 6FA7           05803       movwf    ktory_kanal_mierze
                      05804       
                      05805       
0018CE 51A8           05806       movf    odstep_pomiarowy,w
                      05807       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 131


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0018D0 6FA9           05808       movwf    aktualny_odstep
                      05809       
                      05810       
0018D2 85A0           05811       bsf      markers2,pomiary
0018D4 859F           05812       bsf      markers,pomiary_zrobione
0018D6 819F           05813       bsf       markers,czy_usrednianie
                      05814       ;włączyć trzeba moduł A/D
0018D8 0E01           05815       movlw    b'00000001'
0018DA 6EC2           05816       movwf    ADCON0
                      05817       ;bsf      markers,czy_wyswietlam_temp
0018DC EFD2 F00C      05818       goto        wykryto_enter_exit
                      05819             
                      05820       
                      05821       
                      05822       
                      05823       
0018E0                05824 wykryto_enter_wyjscie_opcje2
                      05825 ;opcja z liczbą      
0018E0 0E02           05826       movlw       opcja_odstep
0018E2 63E4           05827       cpfseq      numer_opcji
0018E4 EF78 F00C      05828       goto          wykryto_enter_wyjscie_opcje3
0018E8 EC3F F00D      05829       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05830       
                      05831       ;call  wykryto_enter_back_wyjsc_z_opcji_skasuj_liczbe
                      05832       
                      05833       
                      05834       
0018EC EFD2 F00C      05835       goto        wykryto_enter_exit
                      05836       
                      05837       
                      05838       
                      05839       
                      05840       
0018F0                05841 wykryto_enter_wyjscie_opcje3
                      05842       
0018F0 0E03           05843       movlw       opcja_srednia
0018F2 63E4           05844       cpfseq      numer_opcji
0018F4 EF80 F00C      05845       goto          wykryto_enter_wyjscie_opcje4
0018F8 EC3F F00D      05846       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05847       
                      05848      ; bcf        pozycja_menu,zmiana_opcji
                      05849       
0018FC EFD2 F00C      05850       goto        wykryto_enter_exit
                      05851       
                      05852 
001900                05853 wykryto_enter_wyjscie_opcje4
                      05854 
                      05855 
                      05856 
                      05857 
                      05858 
001900                05859 wykryto_enter_wyjscie_opcje5
                      05860 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 132


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001900 0E05           05861       movlw       opcja_ustaw_temp_R1
001902 63E4           05862       cpfseq      numer_opcji
001904 EF88 F00C      05863       goto          wykryto_enter_wyjscie_opcje6
001908 EC3F F00D      05864       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05865       
                      05866       ;bcf        pozycja_menu,zmiana_opcji
                      05867       
00190C EFD2 F00C      05868       goto        wykryto_enter_exit
                      05869       
                      05870       
                      05871       
                      05872       
001910                05873 wykryto_enter_wyjscie_opcje6
                      05874 
                      05875 
001910 0E06           05876       movlw       opcja_ustaw_temp_R2
001912 63E4           05877       cpfseq      numer_opcji
001914 EF90 F00C      05878       goto          wykryto_enter_wyjscie_opcje7
001918 EC3F F00D      05879       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05880       
                      05881       ;bcf        pozycja_menu,zmiana_opcji
                      05882       
00191C EFD2 F00C      05883       goto        wykryto_enter_exit
                      05884       
001920                05885 wykryto_enter_wyjscie_opcje7
                      05886 
001920                05887 wykryto_enter_wyjscie_opcje9
                      05888 
001920 0E09           05889       movlw       opcja_histereza_R1_1
001922 63E4           05890       cpfseq      numer_opcji
001924 EF98 F00C      05891       goto          wykryto_enter_wyjscie_opcje10
001928 EC3F F00D      05892       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05893       
                      05894       ;bcf        pozycja_menu,zmiana_opcji
                      05895       
00192C EFD2 F00C      05896       goto        wykryto_enter_exit
                      05897 
                      05898 
001930                05899 wykryto_enter_wyjscie_opcje10
001930 0E0A           05900          movlw       opcja_histereza_R1_2
001932 63E4           05901       cpfseq      numer_opcji
001934 EFA0 F00C      05902       goto          wykryto_enter_wyjscie_opcje11
001938 EC3F F00D      05903       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05904       
                      05905       ;bcf        pozycja_menu,zmiana_opcji
                      05906       
00193C EFD2 F00C      05907       goto        wykryto_enter_exit
                      05908       
                      05909       
                      05910       
001940                05911 wykryto_enter_wyjscie_opcje11
001940 0E0B           05912          movlw       opcja_histereza_R2_1
001942 63E4           05913       cpfseq      numer_opcji
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 133


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001944 EFA8 F00C      05914       goto          wykryto_enter_wyjscie_opcje12
001948 EC3F F00D      05915       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05916       
                      05917       ;bcf        pozycja_menu,zmiana_opcji
                      05918       
00194C EFD2 F00C      05919       goto        wykryto_enter_exit
                      05920 
                      05921 
001950                05922 wykryto_enter_wyjscie_opcje12
001950 0E0C           05923          movlw       opcja_histereza_R2_2
001952 63E4           05924       cpfseq      numer_opcji
001954 EFB0 F00C      05925       goto          wykryto_enter_wyjscie_opcje13
001958 EC3F F00D      05926       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05927       
                      05928       ;bcf        pozycja_menu,zmiana_opcji
                      05929       
00195C EFD2 F00C      05930       goto        wykryto_enter_exit
                      05931 
                      05932 
                      05933 
                      05934 
001960                05935 wykryto_enter_wyjscie_opcje13
                      05936 
                      05937 
001960                05938 wykryto_enter_wyjscie_opcje14
                      05939 
                      05940 
                      05941 
001960                05942 wykryto_enter_wyjscie_opcje15
001960 0E0F           05943       movlw       opcja_czujnik_regulacji1
001962 63E4           05944       cpfseq      numer_opcji
001964 EFB8 F00C      05945       goto          wykryto_enter_wyjscie_opcje16
001968 EC3F F00D      05946       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05947       
                      05948       ;bcf        pozycja_menu,zmiana_opcji
                      05949       
00196C EFD2 F00C      05950       goto        wykryto_enter_exit      
                      05951       
                      05952       
                      05953       
                      05954 
001970                05955 wykryto_enter_wyjscie_opcje16
001970 0E10           05956       movlw       opcja_czujnik_regulacji2
001972 63E4           05957       cpfseq      numer_opcji
001974 EFC0 F00C      05958       goto          wykryto_enter_wyjscie_opcje17
001978 EC3F F00D      05959       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05960       
                      05961       ;bcf        pozycja_menu,zmiana_opcji
                      05962       
00197C EFD2 F00C      05963       goto        wykryto_enter_exit      
                      05964       
                      05965       
                      05966 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 134


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      05967 
001980                05968 wykryto_enter_wyjscie_opcje17
                      05969 
                      05970 
                      05971 
001980                05972 wykryto_enter_wyjscie_opcje20
001980 0E14           05973       movlw       opcja_ustaw_zegar
001982 63E4           05974       cpfseq      numer_opcji
001984 EFD2 F00C      05975       goto        wykryto_enter_wyjscie_opcje21
                      05976 
                      05977       
                      05978       
                      05979       ; movlw       dzien_10
                      05980       ; cpfseq      ustawianie_czasu_co_wyswietlam
                      05981       ; goto        wykryto_enter_wyjscie_opcje11_D
                      05982       
                      05983       ; movlw       godziny_10
                      05984       ; cpfseq      ustawianie_czasu_co_wyswietlam
                      05985       ; goto        wykryto_enter_wyjscie_opcje11_H
                      05986       
                      05987       
001988 0EE0           05988       movlw      sekundy_10
00198A 63ED           05989       cpfseq      ustawianie_czasu_co_wyswietlam
00198C EFCC F00C      05990       goto        wykryto_enter_wyjscie_opcje11_1
                      05991       
                      05992       ;jezeli jest w tej chwili sekundy_10 tzn ze wychodze z wyswietlania ustawien zegara
                      05993             
001990 EC3F F00D      05994       call  enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      05995       
                      05996             
001994 EFD2 F00C      05997       goto        wykryto_enter_exit
                      05998       
                      05999 
                      06000 ; wykryto_enter_wyjscie_opcje11_D
                      06001 
                      06002       ; movlw       godziny_10
                      06003       ; movwf       ustawianie_czasu_co_wyswietlam
                      06004       
                      06005       ; call        procedura_wyswietlania_kolejnych_liczb_zegara
                      06006       ; goto        wykryto_enter_exit
                      06007       
                      06008 
                      06009 ; wykryto_enter_wyjscie_opcje11_H
                      06010       ; movlw       minuty_10
                      06011       ; movwf       ustawianie_czasu_co_wyswietlam
                      06012       ; call        procedura_wyswietlania_kolejnych_liczb_zegara
                      06013       ; goto        wykryto_enter_exit
                      06014       
                      06015 
                      06016       
001998                06017 wykryto_enter_wyjscie_opcje11_1
001998 0E02           06018       movlw       2
00199A 27ED           06019       addwf       ustawianie_czasu_co_wyswietlam,f
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 135


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00199C EC0E F00D      06020       call        procedura_wyswietlania_kolejnych_liczb_zegara
0019A0 EFD2 F00C      06021       goto        wykryto_enter_exit
                      06022 
                      06023 
                      06024 
                      06025 
                      06026 
                      06027 
                      06028 
0019A4                06029 wykryto_enter_wyjscie_opcje21
                      06030 
                      06031 ;             
                      06032 ;       call     check_busy
                      06033 ;       movlw    linia_czwarta
                      06034 ;       call      send
                      06035 ;         
                      06036 ;       call     check_busy
                      06037 ; ;czy gasze czy wyswietlam      
                      06038 ;       btfsc       markers,test
                      06039 ;       goto        zamaz_E
                      06040 ; napisz_E
                      06041 ;       bsf   markers,test
                      06042 ;       movlw       _E
                      06043 ;       goto  wykryto_back_pisz
                      06044 ; zamaz_E
                      06045 ;       bcf   markers,test
                      06046 ;       movlw       _puste
                      06047 ;       
                      06048 ; wykryto_enter_pisz
                      06049 ;       call     write_lcd
                      06050       
                      06051       
                      06052       
0019A4                06053 wykryto_enter_exit 
0019A4 9BA1           06054       bcf   markers3,dzialanie_po_klawiszu
0019A6 6B99           06055       clrf  stan_key
0019A8 EF00 F00E      06056       goto  LOOP11
                      06057  
                      06058  
                      06059  
                      06060  
                      06061  
                      06062  
                      06063  
                      06064 ;wykryto_enter_back_wyjsc_z_opcji_skasuj_liczbe
                      06065 ;odczytaj_polozenie_gwiazdki_wybierz_linie
                      06066  
Warning[208]: Label truncated at 32 characters. (odczytaj_adres_polozenia_gwiazdki)
0019AC                06067 odczytaj_adres_polozenia_gwiazdki
0019AC 0E1B           06068       movlw       HIGH tablica_gwiazdki
0019AE 6EF7           06069       movwf       TBLPTRH
                      06070       
0019B0 0EC4           06071       movlw       LOW tablica_gwiazdki
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 136


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0019B2 6EF6           06072       movwf       TBLPTRL
                      06073       
                      06074       ;poniewaz najpierw zmniejszam polozenie
                      06075       
0019B4 51E5           06076       movf       polozenie_gwiazdki,w
                      06077       
0019B6 26F6           06078       addwf       TBLPTRL,f
                      06079       
                      06080       
                      06081       
0019B8 EC32 F001      06082       call        check_busy
                      06083        ;a nastepnie czytam to uzywam polecenia
0019BC 0008           06084       TBLRD *
0019BE 50F5           06085       movf        TABLAT,w
                      06086 ;na zakończenie procedury adres linii z gwiazdką jest umieszczany w rejestrze W
0019C0 0012           06087       return
                      06088       
                      06089       
Warning[208]: Label truncated at 32 characters. (wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa)
0019C2                06090 wykryto_enter_gdzie_wyswietlam_liczbe_bajtowa
                      06091 ;aby liczba wyświetlana znalazła się obok swojej opcji w menu, należy wcześniej odczytać aktualne 
                            położenie gwiazdki
                      06092 ;z tablicy
                      06093 ;dzięki temu uniknięte zostanie wielokrotne powtarzanie procedur wyświetlania liczb w zależności od
                             opcji przy której umieszczona ma być wartośc liczby
                      06094 ;poza tym w wypadku zmiany położenia opcji w tablicy opcji menu ( z linii 2 na 3) to zmiana nastąpi a
                            utomatycznie
                      06095 ;gdyż to położenie gwiazdki decyduje o położeniu cyfr
0019C2 0E1B           06096       movlw       HIGH tablica_gwiazdki
0019C4 6EF7           06097       movwf       TBLPTRH
                      06098       
0019C6 0EC4           06099       movlw       LOW tablica_gwiazdki
0019C8 6EF6           06100       movwf       TBLPTRL
                      06101       
                      06102       ;poniewaz najpierw zmniejszam polozenie
                      06103       
0019CA 51E5           06104       movf       polozenie_gwiazdki,w
                      06105       
0019CC 26F6           06106       addwf       TBLPTRL,f
                      06107       
                      06108       
                      06109       
0019CE EC32 F001      06110       call        check_busy
                      06111        ;a nastepnie czytam to uzywam polecenia
0019D2 0008           06112       TBLRD *
0019D4 50F5           06113       movf        TABLAT,w
                      06114   ;teraz należy do adresu lini dodać miejsce położenia cyfry 100
                      06115   
                      06116 
0019D6 0F0A           06117       addlw       polozenie_liczby_menu
0019D8 ECF4 F000      06118       call        send
0019DC EC32 F001      06119       call        check_busy
                      06120  
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 137


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06121  ;i wyswietlic wszystkie cyfry
0019E0 5196           06122       movf        dec100,w
0019E2 0F30           06123       addlw       0x30
0019E4 EC05 F001      06124       call        write_lcd      
0019E8 EC32 F001      06125       call        check_busy
                      06126       
0019EC 5197           06127       movf        dec10,w      
0019EE 0F30           06128       addlw       0x30
0019F0 EC05 F001      06129       call        write_lcd      
                      06130       
0019F4 EC32 F001      06131       call        check_busy
0019F8 5198           06132       movf        dec1,w
0019FA 0F30           06133       addlw       0x30
0019FC EC05 F001      06134       call        write_lcd      
                      06135       
001A00 0012           06136       return
                      06137       
                      06138 
                      06139 
                      06140 
                      06141 
                      06142       
Warning[208]: Label truncated at 32 characters. (enter_back_wyjsc_z_opcji_czujniki)
001A02                06143 enter_back_wyjsc_z_opcji_czujniki
                      06144 
                      06145       ;czysc ustawienia opcji i zgas bit zmiana_opcji
                      06146        
001A02 9FE3           06147        bcf        pozycja_menu,zmiana_opcji
001A04 EC32 F001      06148        call     check_busy
001A08 0E80           06149       movlw    linia_gorna
001A0A 0F0A           06150       addlw       polozenie_liczby_menu
001A0C ECF4 F000      06151       call      send
                      06152       ;
                      06153       
001A10 EC32 F001      06154       call     check_busy
001A14 0E20           06155       movlw       _puste
001A16 EC05 F001      06156       call        write_lcd
                      06157       
001A1A 0012           06158       return
                      06159        
                      06160        
                      06161        
                      06162        
                      06163        
                      06164        
                      06165        
                      06166        
                      06167        
                      06168        
                      06169        
                      06170        
                      06171        
                      06172        
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 138


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06173        
                      06174        
                      06175        
                      06176        
                      06177        
                      06178        
                      06179        
Warning[208]: Label truncated at 32 characters. (procedura_wyswietlania_kolejnych_liczb_zegara)
001A1C                06180 procedura_wyswietlania_kolejnych_liczb_zegara
                      06181 
001A1C ECD6 F00C      06182       call  odczytaj_adres_polozenia_gwiazdki
001A20 0F0C           06183       addlw       0x0c
001A22 ECF4 F000      06184       call        send
                      06185       
001A26 EC32 F001      06186       call        check_busy
                      06187       
                      06188 ;która litera jest wyświetlana obok cyfr = D - day, H - hours, M - minute, S- seconds      
001A2A 0EDA           06189       movlw       dzien_10
001A2C 63ED           06190       cpfseq      ustawianie_czasu_co_wyswietlam
001A2E EF0E F00D      06191       goto        procedura_wyswietlania_kolejnych_liczb_zegara_1
001A32 0E44           06192       movlw       _D
001A34 EF0E F00D      06193       goto        procedura_wyswietlania_kolejnych_liczb_zegara_4
                      06194 
                      06195 
                      06196 
                      06197 
                      06198       
Warning[208]: Label truncated at 32 characters. (procedura_wyswietlania_kolejnych_liczb_zegara_1)
Error[116]  : Address label duplicated or different in second pass (procedura_wyswietlania_kolejnych)
001A38                06199 procedura_wyswietlania_kolejnych_liczb_zegara_1
                      06200 
001A38 0EDC           06201       movlw       godziny_10
001A3A 63ED           06202       cpfseq      ustawianie_czasu_co_wyswietlam
001A3C EF0E F00D      06203       goto        procedura_wyswietlania_kolejnych_liczb_zegara_2
001A40 0E48           06204       movlw       _H
001A42 EF0E F00D      06205       goto        procedura_wyswietlania_kolejnych_liczb_zegara_4
                      06206       
                      06207 
                      06208 
                      06209 
                      06210       
Warning[208]: Label truncated at 32 characters. (procedura_wyswietlania_kolejnych_liczb_zegara_2)
Error[116]  : Address label duplicated or different in second pass (procedura_wyswietlania_kolejnych)
001A46                06211 procedura_wyswietlania_kolejnych_liczb_zegara_2
                      06212 
001A46 0EDE           06213       movlw       minuty_10
001A48 63ED           06214       cpfseq      ustawianie_czasu_co_wyswietlam
001A4A EF0E F00D      06215       goto        procedura_wyswietlania_kolejnych_liczb_zegara_3
001A4E 0E4D           06216       movlw       _M
001A50 EF0E F00D      06217       goto        procedura_wyswietlania_kolejnych_liczb_zegara_4
                      06218 
                      06219 
                      06220 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 139


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06221 
                      06222       
Warning[208]: Label truncated at 32 characters. (procedura_wyswietlania_kolejnych_liczb_zegara_3)
Error[116]  : Address label duplicated or different in second pass (procedura_wyswietlania_kolejnych)
001A54                06223 procedura_wyswietlania_kolejnych_liczb_zegara_3     
                      06224 
                      06225       ; movlw       sekundy_10
                      06226       ; cpfseq      ustawianie_czasu_co_wyswietlam
                      06227       ; goto        procedura_wyswietlania_kolejnych_liczb_zegara_1
001A54 0E53           06228       movlw       _S
                      06229 
                      06230 
                      06231 
                      06232 
                      06233       
Warning[208]: Label truncated at 32 characters. (procedura_wyswietlania_kolejnych_liczb_zegara_4)
Error[116]  : Address label duplicated or different in second pass (procedura_wyswietlania_kolejnych)
001A56                06234 procedura_wyswietlania_kolejnych_liczb_zegara_4            
                      06235       
001A56 EC05 F001      06236       call        write_lcd
                      06237       
001A5A 6ADA           06238       clrf        FSR2H
001A5C 51ED           06239       movf        ustawianie_czasu_co_wyswietlam,w
001A5E 6ED9           06240       movwf      FSR2L      
                      06241       
001A60 EC32 F001      06242       call        check_busy
001A64 50DF           06243       movf        INDF2,w      
001A66 EC05 F001      06244       call        write_lcd
                      06245       
001A6A EC32 F001      06246       call        check_busy
                      06247       
001A6E 2AD9           06248       incf        FSR2L,f
001A70 50DF           06249       movf        INDF2,w      
001A72 EC05 F001      06250       call        write_lcd
                      06251       
001A76 EC32 F001      06252       call        check_busy
                      06253       
001A7A 2AD9           06254       incf        FSR2L,f       
                      06255        
001A7C 0012           06256       return
                      06257 
                      06258 
                      06259 
                      06260 
                      06261 
                      06262 
                      06263 
                      06264 
                      06265 
                      06266 
                      06267 
                      06268 
                      06269 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 140


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06270 
                      06271 
                      06272 
                      06273 
                      06274       
                      06275 
Warning[208]: Label truncated at 32 characters. (enter_back_wyjsc_z_opcji_wyswietlanie_liczby)
001A7E                06276 enter_back_wyjsc_z_opcji_wyswietlanie_liczby
                      06277 
                      06278 ;procedrura analogiczna to tej związanej z obsługą wyświetlania rejestru
001A7E 0E1B           06279       movlw       HIGH tablica_gwiazdki
001A80 6EF7           06280       movwf       TBLPTRH
                      06281       
001A82 0EC4           06282       movlw       LOW tablica_gwiazdki
001A84 6EF6           06283       movwf       TBLPTRL
                      06284       
                      06285       ;poniewaz najpierw zmniejszam polozenie
                      06286       
001A86 51E5           06287       movf       polozenie_gwiazdki,w
                      06288       
001A88 26F6           06289       addwf       TBLPTRL,f
                      06290       
                      06291        ;a nastepnie czytam to uzywam polecenia
001A8A 0008           06292       TBLRD *
                      06293       
001A8C EC32 F001      06294       call        check_busy
                      06295       
001A90 50F5           06296       movf        TABLAT,w
                      06297 ;teraz należy do adresu lini dodać miejsce położenia cyfry 100
001A92 0F0A           06298       addlw       polozenie_liczby_menu
001A94 ECF4 F000      06299       call        send
                      06300       
001A98 EC32 F001      06301       call        check_busy       
001A9C 0E20           06302       movlw       _puste
001A9E EC05 F001      06303       call        write_lcd      
                      06304       
001AA2 EC32 F001      06305       call        check_busy
001AA6 0E20           06306       movlw       _puste
001AA8 EC05 F001      06307       call        write_lcd      
                      06308       
001AAC EC32 F001      06309       call        check_busy
001AB0 0E20           06310       movlw       _puste
001AB2 EC05 F001      06311       call        write_lcd      
                      06312       
001AB6 EC32 F001      06313       call        check_busy       
001ABA 0E20           06314       movlw       _puste
001ABC EC05 F001      06315       call        write_lcd      
                      06316       
                      06317       
001AC0 EC32 F001      06318       call        check_busy
001AC4 0E20           06319       movlw       _puste
001AC6 EC05 F001      06320       call        write_lcd 
                      06321       
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 141


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001ACA EC32 F001      06322       call        check_busy
001ACE 0E20           06323       movlw       _puste
001AD0 EC05 F001      06324       call        write_lcd 
                      06325       
001AD4 EC32 F001      06326       call        check_busy
001AD8 0E20           06327       movlw       _puste
001ADA EC05 F001      06328       call        write_lcd 
                      06329       
001ADE 9FE3           06330       bcf        pozycja_menu,zmiana_opcji
                      06331       
001AE0 0012           06332       return
                      06333 
                      06334       
                      06335       
                      06336       
                      06337       
                      06338       
                      06339       
                      06340       
                      06341       
                      06342       
                      06343       
                      06344       
                      06345       
                      06346       
                      06347 ;menu wyswietlane w ten sposob, ze na jednym ekranie umieszczone sa cztery opcje
                      06348 ;a do kazdej linii odnosi sie zwiazana z nia tablica nazw opcji
                      06349 ;przy przejsciu do kolejnego ekranu opcji nastepuje zmiana tych opcji na kolejne
                      06350 
001B00                06351          org         1b00h
001B00                06352 tablica_pierwsza
001B00 6F70 696D 7261 06353       db   "pomiar t",0,"odstep",0,"srednia",0, "pomiar i" ,0
       7420 6F00 7364 
       6574 0070 7273 
       6465 696E 0061 
       6F70 696D 7261 
       6920 0000 
                      06354       
001B22                06355 tablica_druga
001B22 7375 6174 2077 06356       db    "ustaw t1",0,"ustaw t2",0,"wlacz1" ,0, "wlacz2" ,0
       3174 7500 7473 
       7761 7420 0032 
       6C77 6361 317A 
       7700 616C 7A63 
       0032 
                      06357       
001B42                06358 tablica_trzecia
001B42 6968 2073 3172 06359       db     "his r1 1",0,"his r1 2",0x19,0,"his r2 1" ,0,"his r2 2" ,0
       3120 6800 7369 
       7220 2031 1932 
       6800 7369 7220 
       2032 0031 6968 
       2073 3272 3220 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 142


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       0000 
                      06360 ;,0x5e  - ^
001B68                06361 tablica_czwarta
001B68 6572 7567 616C 06362       db     "regulacja1",0,"regulacja2",0,"czuj r 1",0,"czuj r 2",0
       6A63 3161 7200 
       6765 6C75 6361 
       616A 0032 7A63 
       6A75 7220 3120 
       6300 757A 206A 
       2072 0032 
                      06363       ;"przesyl serial",0
                      06364       
001B90                06365 tablica_piata
001B90 7977 7773 6569 06366       db     "wyswietl. zegar",0,"wyswietl. temp",0,"podswietlenie",0,"zegar",0      
       6C74 202E 657A 
       6167 0072 7977 
       7773 6569 6C74 
       202E 6574 706D 
       7000 646F 7773 
       6569 6C74 6E65 
       6569 7A00 6765 
       7261 0000 
                      06367 ;####################  TABLICA POLOZEN gwiazdki
                      06368 
001BC4                06369 tablica_gwiazdki        
001BC4 8000 90C0 01D0 06370       db    0,linia_gorna,linia_dolna,linia_trzecia,linia_czwarta,1
                      06371       
                      06372       
                      06373 
                      06374 
                      06375 
                      06376 
                      06377 
                      06378 
                      06379 
                      06380 
                      06381 
                      06382 
                      06383 
                      06384 
                      06385 
                      06386 
                      06387 
                      06388 
                      06389 
                      06390 ;;;; tu jest procedura PETLI
                      06391 
                      06392 
                      06393 
                      06394 
                      06395 
                      06396 
                      06397 
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 143


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06398 
                      06399 
                      06400       
                      06401     
001BCA                06402 LOOP
                      06403 
001BCA ABA1           06404       btfss       markers3,dzialanie_po_klawiszu
001BCC EFF4 F00D      06405       goto        LOOP_sprawdz_keys        
                      06406 
                      06407 
                      06408       
001BD0 B199           06409       btfsc   stan_key,latch_back
001BD2 EFEB F006      06410       goto    wykryto_back
                      06411                   
001BD6 B399           06412       btfsc    stan_key,latch_down
001BD8 EFFE F006      06413       goto     wykryto_down
                      06414                            
001BDC B599           06415       btfsc    stan_key,latch_up
001BDE EFD4 F008      06416       goto     wykryto_up
                      06417          
001BE2 B799           06418       btfsc    stan_key,latch_enter
001BE4 EF17 F00B      06419       goto     wykryto_enter 
                      06420       
                      06421 ;jeżeli zaznaczono że należy zmieniać już wartości to sprawdź które klawisze i które procedury 
                            wywołuję      
                      06422 ;      btfss       znaczniki,czy_moge_juz_zmieniac
                      06423  ;     goto        
                      06424       
                      06425       
                      06426       
001BE8                06427 LOOP_sprawdz_keys
001BE8 A083           06428       btfss   latch_keys,latch_back
001BEA ECAC F006      06429       call    wcisnieto_back
                      06430                   
001BEE A283           06431       btfss    latch_keys,latch_down
001BF0 ECB3 F006      06432       call     wcisnieto_down
                      06433                            
001BF4 A483           06434       btfss    latch_keys,latch_up
001BF6 ECBF F006      06435       call     wcisnieto_up
                      06436          
001BFA A683           06437       btfss    latch_keys,latch_enter
001BFC ECE4 F006      06438       call     wcisnieto_enter
                      06439 
001C00                06440 LOOP11      
001C00 B7A1           06441       btfsc markers3,odswiezanie_zegara
001C02 EF2B F002      06442       goto  napisz_czas
                      06443       
001C06                06444 LOOP_temperatury      
                      06445 ;jezeli jest ustawiony bit pomiary to sprawdz 
001C06 A5A0           06446          btfss    markers2,pomiary
001C08 EF12 F00E      06447          goto     LOOP1
                      06448 
                      06449          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 144


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06450 ;jezeli ustawiony jest bit czy_wlaczyc_ponownie_temp to nawet nie sprawdzaj
001C0C B7A1           06451             btfsc      markers3,odswiezanie_zegara
001C0E EF12 F00E      06452             goto        LOOP1   
                      06453          
001C12 B59F           06454          btfsc    markers,pomiary_zrobione
001C14 EF12 F00E      06455          goto     LOOP1
                      06456          
001C18 B79F           06457          btfsc    markers,inicjuj_pomiary
001C1A EC71 F002      06458          call     rozpocznij_pomiary
                      06459                   
001C1E B9A0           06460          btfsc    markers2,wyslij_pomiar
001C20 ECD7 F004      06461          call     wysylanie_pomiaru
001C24                06462 LOOP1         
001C24 B3A0           06463          btfsc    markers2,przerwanie_t1
001C26 EC85 F002      06464          call     procedura_obslugi_zegara
                      06465          
001C2A B7A0           06466          btfsc    markers2,sprawdz_odebrane
001C2C ECCA F003      06467          call     sprawdz_czy_polecenie
                      06468 
                      06469 
                      06470 ;          btfsc    markers2,wyswietl
                      06471 ;          call     wyswietl_litere
                      06472                   
                      06473 ;        btfsc    markers2,blad_transmisji
                      06474 ;        call     wyswietl_error
                      06475          
                      06476          
                      06477          
                      06478 ;        btfsc    markers2,poczatkowy_bit
                      06479 ;        call     poczatek_odbioru
                      06480          
001C30                06481 LOOP2    
                      06482          
                      06483 
001C30 EFE5 F00D      06484          goto     LOOP
                      06485          
                      06486 
                      06487 
                      06488          
                      06489          
                      06490          
                      06491          
                      06492          
                      06493          
                      06494          
                      06495          
                      06496          
                      06497          
                      06498          
                      06499          
                      06500          
                      06501          
                      06502          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 145


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06503          
                      06504          
                      06505          
                      06506          
                      06507          
                      06508          
                      06509          
                      06510          
                      06511          
                      06512          
                      06513          
                      06514          
                      06515          
                      06516          
                      06517          
                      06518          
                      06519          
                      06520          
                      06521          
                      06522          
                      06523 ;tu sa procedury inicjacyjne!
                      06524 
                      06525 
                      06526 
                      06527 
                      06528 
                      06529 
                      06530 
                      06531          
                      06532 ; org    800h
                      06533 ;ta funkcja zlicza nacisniecia klawisza rb0ółńżą
                      06534 ;funkcja odczekuj?ca
                      06535 
                      06536 
                      06537 
                      06538          
                      06539 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      06540 
                      06541 ;POCZATEK
                      06542 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;       
                      06543          ;org      0800h    
                      06544 
                      06545 
                      06546                 
001C34                06547 inicjacja
                      06548          ;ulamek 0,25 - tzn 1 
                      06549           ;movlw    0x0
                      06550           ;movlw   numer_opcji_koncowej
                      06551           ;movwf   
                      06552           ;movwf    tmp
                      06553           ;decf    tmp,f
                      06554           ;bsf   tmp,(menu_opcje_end)
                      06555           ;btfss   STATUS,C
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 146


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06556           ;incf    tmp,f
                      06557 ;          
                      06558 ;          addlw    0xc3
                      06559          ;movwf    tmp7
                      06560          ;mnoze 2,5 * 0x30 tzn 
                      06561          ;movlw    0x30
                      06562          ;ulamek
                      06563          ;mulwf    tmp
                      06564          ;movf     PRODH,w
                      06565          ;movwf    dec10
                      06566          ;movf    PRODL,w
                      06567          ;movwf    dec1
                      06568          
                      06569          ;movlw    0x30
                      06570          
                      06571          
                      06572          ;mulwf    tmp7
                      06573          
                      06574          
001C34 6AD8           06575          clrf    STATUS ;czyszcze status
                      06576          ;movlw    
                      06577          ;clrf    czas;
001C36 6A80           06578          clrf     PORTA
001C38 6A81           06579          clrf     PORTB
001C3A 6A82           06580          clrf     PORTC
001C3C 6A83           06581           clrf     PORTD
001C3E 6A84           06582          clrf     PORTE
001C40 6A89           06583          clrf     LATA
001C42 6A8A           06584          clrf     LATB
001C44 6A8B           06585          clrf     LATC
001C46 6A8C           06586          clrf     LATD
001C48 6A8D           06587          clrf     LATE
                      06588 ;przerwania kompatybilne z 16fxx
001C4A 8ED0           06589          bsf      RCON,IPEN         
                      06590          
                      06591 ;ustawiam TMR1
                      06592                                     ;Timer 1 ustawiony jako 1/16 sekundy
001C4C 0E01           06593          movlw    b'00000001'
001C4E 6ECD           06594          movwf    T1CON
                      06595 ;pzrerwania
001C50 6AF2           06596          clrf     INTCON
001C52 8EF2           06597          bsf      INTCON,GIE
001C54 8CF2           06598          bsf      INTCON,PEIE
                      06599          
                      06600          
001C56 6AF0           06601          clrf     INTCON3
001C58 0E80           06602          movlw    b'10000000'
001C5A 6EF1           06603          movwf    INTCON2
001C5C 9AF2           06604          bcf     INTCON,TMR0IE
001C5E 9896           06605          bcf      TRISE,PSPMODE
001C60 9AC6           06606          bcf      SSPCON1,SSPEN
001C62 9EAB           06607          BCF      RCSTA,SPEN
                      06608          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 147


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06609          ;ustawienia comparatora
001C64 0E00           06610          movlw    b'00000000'
001C66 6EB5           06611          movwf    CVRCON
                      06612          ;komparator wylaczony
001C68 0E07           06613          movlw    b'00000111'
001C6A 6EB4           06614          movwf    CMCON
                      06615          ;movlw   b'00000000'       ;wszystkie linie na wysoko
                      06616          ;ovwf    PORTB
                      06617          
001C6C                06618 CCP_init         
001C6C 0E00           06619          movlw    0
001C6E 6EBD           06620          movwf    CCP1CON
001C70 6EBA           06621          movwf    CCP2CON
                      06622          ;BCF     
001C72 6ACC           06623          clrf     TMR2
                      06624          
001C74                06625 Timer3_init                      
                      06626                            ;ustawienie zegara tmr3
                      06627                            
                      06628                            
                      06629                            ;zegar odpowiada za przyciski
001C74 0E51           06630             movlw       b'01010001'
001C76 6EB1           06631             movwf       T3CON
                      06632          
                      06633          
001C78                06634 BEGIN2lcd_init
                      06635          ;bsf      STATUS,RP0        ;bank 1
001C78 6A9D           06636          clrf     PIE1
001C7A 6AA0           06637          clrf     PIE2
001C7C 809D           06638          bsf      PIE1,TMR1IE
                      06639          
                      06640      ;ustawiam na wyjscia 1 -wejscie
                      06641         ;movlw   b'11111111'
                      06642          
001C7E 0E3F           06643          movlw    b'00111111'
001C80 6E92           06644          movwf    TRISA
                      06645          
Warning[205]: Found directive in column 1. (IF)
                      06646 IF (czy_ekran==1)
001C82 0EE0           06647          movlw   b'11100000'
001C84 6E93           06648          movwf    TRISB
Warning[205]: Found directive in column 1. (ENDIF)
                      06649 ENDIF
                      06650 
Warning[205]: Found directive in column 1. (IF)
                      06651 IF (czy_ekran==0)
                      06652          movlw   b'11111111'
                      06653          movwf    TRISB
                      06654 ENDIF
                      06655 
001C86 0EA0           06656         movlw   b'10100000'
001C88 6E94           06657          movwf    TRISC
                      06658          
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 148


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06659 ;tu sie zminienia dla kabli
                      06660         ;movlw   b'11111111'
Warning[205]: Found directive in column 1. (IF)
                      06661 IF (czy_ekran==1)        
001C8A 0E0F           06662          movlw    normalne_ustawienie_tris_lcd
001C8C 6E95           06663          movwf    TRISD
Warning[205]: Found directive in column 1. (ENDIF)
                      06664 ENDIF
                      06665          
Warning[205]: Found directive in column 1. (IF)
                      06666 IF (czy_ekran==0)
                      06667          movlw    0x0F
                      06668          movwf    TRISD
                      06669 ENDIF
                      06670          
001C8E 0E07           06671          movlw   b'00000111'
001C90 6E96           06672          movwf    TRISE
                      06673          
                      06674          
                      06675 ;ustawienia timera 0
001C92 0EC7           06676          movlw    b'11000111'
001C94 6ED5           06677          movwf    T0CON
                      06678  ;dopiero teraz w??cz zegar
                      06679          
                      06680 
                      06681 
                      06682 ;90  czyli 5a
                      06683 ;50      32
                      06684 ;210(200us) d2
                      06685 ;196(190us) c4    
                      06686 ;        movlw    b'11010010'
001C96 0E80           06687          movlw    0x80
001C98 6ECB           06688          movwf    PR2
                      06689          
                      06690 ;bank 0
                      06691          ;bcf      STATUS,RP0
                      06692 ;        movlw    b'01000000'
                      06693 ;        movwf    ADCON0
                      06694          
                      06695 ;ustawiam TMR2 z licznikiem 1:1
                      06696          
                      06697 ;wyczyscic trzeba pamiec na zmienne
                      06698 ;jezeli tego nie zrobie to
                      06699 ;po wlaczeniu zasilani moga pojawic
                      06700 ; sie problemy bo moga tam byc losowe dane
                      06701 ;od 000 do f7f
001C9A 0E80           06702          movlw    0x80
001C9C 6EE9           06703          movwf    FSR0L
001C9E 6AEA           06704          clrf     FSR0H
001CA0                06705 next
                      06706          ;movlw   0
001CA0 6AEF           06707          clrf     INDF0
001CA2 2AE9           06708          INCF     FSR0L,f
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 149


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      06709          ;movlw    0ffh
                      06710          
001CA4 A0D8           06711          btfss    STATUS,C
001CA6 EF50 F00E      06712          goto     next
                      06713          
001CAA 2AEA           06714          incf     FSR0H,f
001CAC 0E02           06715          movlw    b'00000010' ;02 banki
001CAE 18EA           06716          xorwf    FSR0H,w
001CB0 A4D8           06717          BTFSS    STATUS,Z
                      06718          ;btfss    FSR0H,4
001CB2 EF50 F00E      06719          goto     next
                      06720          
                      06721          
                      06722          
                      06723          
001CB6                06724 test_koniec
                      06725          
                      06726          ;bcf      PCLATH,3
                      06727          ;bcf      PCLATH,4
001CB6 6AFA           06728          clrf     PCLATH
001CB8 EF9C F001      06729          goto    Start
                      06730                   
                      06731 ;test ustawiania probkowania
                      06732 ;0x2a 0x93 probka         
                      06733 
                      06734 
                      06735          end
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 150


SYMBOL TABLE
  LABEL                             VALUE 

A                                 00000000
ACCESS                            00000000
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACQT0                             00000003
ACQT1                             00000004
ACQT2                             00000005
ADCON0                            00000FC2
ADCON1                            00000FC1
ADCON2                            00000FC0
ADCS0                             00000000
ADCS1                             00000001
ADCS2                             00000002
ADDEN                             00000003
ADEN                              00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADIP                              00000006
ADON                              00000000
ADRES                             00000FC3
ADRESH                            00000FC4
ADRESL                            00000FC3
AN0                               00000000
AN1                               00000001
AN10                              00000001
AN11                              00000004
AN12                              00000000
AN2                               00000002
AN3                               00000003
AN4                               00000005
AN5                               00000000
AN6                               00000001
AN7                               00000002
AN8                               00000002
AN9                               00000003
BANKED                            00000001
BCLIE                             00000003
BCLIF                             00000003
BCLIP                             00000003
BEGIN                             00000000
BEGIN2lcd_init                    00001C78
BF                                00000000
BOR                               00000000
BRGH                              00000002
BSR                               00000FE0
C                                 00000000
C1INV                             00000004
C1OUT_CMCON                       00000006
C1OUT_PORTA                       00000004
C2INV                             00000005
C2OUT_CMCON                       00000007
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 151


SYMBOL TABLE
  LABEL                             VALUE 

C2OUT_PORTA                       00000005
CCP1                              00000002
CCP1CON                           00000FBD
CCP1IE                            00000002
CCP1IF                            00000002
CCP1IP                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2A                             00000003
CCP2CON                           00000FBA
CCP2IE                            00000000
CCP2IF                            00000000
CCP2IP                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCP2_PORTB                        00000003
CCP2_PORTC                        00000001
CCPR1                             00000FBE
CCPR1H                            00000FBF
CCPR1L                            00000FBE
CCPR2                             00000FBB
CCPR2H                            00000FBC
CCPR2L                            00000FBB
CCP_init                          00001C6C
CFGS                              00000006
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CIS                               00000003
CK                                00000006
CKE                               00000006
CKP                               00000004
CLKI                              00000007
CLKO                              00000006
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000FB4
CMIE                              00000006
CMIF                              00000006
CMIP                              00000006
CREN                              00000004
CS                                00000002
CSRC                              00000007
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 152


SYMBOL TABLE
  LABEL                             VALUE 

CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            00000FB5
CVREF                             00000002
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DDRA                              TRISA
DDRB                              TRISB
DDRC                              TRISC
DDRD                              TRISD
DDRE                              TRISE
DONE                              00000001
D_A                               00000005
D_NOT_A                           00000005
ECCPAS                            00000FB6
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             00000FA9
EECON1                            00000FA6
EECON2                            00000FA7
EEDATA                            00000FA8
EEIE                              00000004
EEIF                              00000004
EEIP                              00000004
EEPGD                             00000007
FAST                              00000001
FERR                              00000002
FLTS                              00000002
FREE                              00000004
FSR0                              00000000
FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1                              00000001
FSR1H                             00000FE2
FSR1L                             00000FE1
FSR2                              00000002
FSR2H                             00000FDA
FSR2L                             00000FD9
GCEN                              00000007
GIE                               00000007
GIEH                              00000007
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 153


SYMBOL TABLE
  LABEL                             VALUE 

GIEL                              00000006
GIE_GIEH                          00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
I2C_DAT                           00000005
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
IDLEN                             00000007
INDF0                             00000FEF
INDF1                             00000FE7
INDF2                             00000FDF
INT0                              00000000
INT0E                             00000004
INT0F                             00000001
INT0IE                            00000004
INT0IF                            00000001
INT1                              00000001
INT1E                             00000003
INT1F                             00000000
INT1IE                            00000003
INT1IF                            00000000
INT1IP                            00000006
INT1P                             00000006
INT2                              00000002
INT2E                             00000004
INT2F                             00000001
INT2IE                            00000004
INT2IF                            00000001
INT2IP                            00000007
INT2P                             00000007
INTCON                            00000FF2
INTCON2                           00000FF1
INTCON3                           00000FF0
INTE                              00000004
INTEDG0                           00000006
INTEDG1                           00000005
INTEDG2                           00000004
INTF                              00000001
IOFS                              00000002
IPEN                              00000007
IPR1                              00000F9F
IPR2                              00000FA2
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRVST                             00000005
IVRST                             00000005
KBI0                              00000004
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 154


SYMBOL TABLE
  LABEL                             VALUE 

KBI1                              00000005
KBI2                              00000006
KBI3                              00000007
LATA                              00000F89
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA3                             00000003
LATA4                             00000004
LATA5                             00000005
LATA6                             00000006
LATA7                             00000007
LATB                              00000F8A
LATB0                             00000000
LATB1                             00000001
LATB2                             00000002
LATB3                             00000003
LATB4                             00000004
LATB5                             00000005
LATB6                             00000006
LATB7                             00000007
LATC                              00000F8B
LATC0                             00000000
LATC1                             00000001
LATC2                             00000002
LATC3                             00000003
LATC4                             00000004
LATC5                             00000005
LATC6                             00000006
LATC7                             00000007
LATD                              00000F8C
LATD0                             00000000
LATD1                             00000001
LATD2                             00000002
LATD3                             00000003
LATD4                             00000004
LATD5                             00000005
LATD6                             00000006
LATD7                             00000007
LATE                              00000F8D
LATE0                             00000000
LATE1                             00000001
LATE2                             00000002
LOOP                              00001BCA
LOOP1                             00001C24
LOOP11                            00001C00
LOOP2                             00001C30
LOOP_sprawdz_keys                 00001BE8
LOOP_temperatury                  00001C06
LVDCON                            00000FD2
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 155


SYMBOL TABLE
  LABEL                             VALUE 

LVDIN                             00000005
LVDIP                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
MCLR                              00000003
N                                 00000004
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BOR                           00000000
NOT_CS                            00000002
NOT_DONE                          00000001
NOT_PD                            00000002
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RD                            00000000
NOT_RI                            00000004
NOT_SS                            00000005
NOT_T1SYNC                        00000002
NOT_T3SYNC                        00000002
NOT_TO                            00000003
NOT_W                             00000002
NOT_WR                            00000001
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OSC1                              00000007
OSC2                              00000006
OSCCON                            00000FD3
OSCFIE                            00000007
OSCFIF                            00000007
OSCFIP                            00000007
OSCTUN2                           00000F9A
OSCTUNE                           00000F9B
OSTS                              00000003
OV                                00000003
P                                 00000004
P1A                               00000002
P1B                               00000005
P1C                               00000006
P1D                               00000007
P1M0                              00000006
P1M1                              00000007
PC                                00000FF9
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000FF9
PCLATH                            00000FFA
PCLATU                            00000FFB
PD                                00000002
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 156


SYMBOL TABLE
  LABEL                             VALUE 

PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEIE_GIEL                         00000006
PEN                               00000002
PGC                               00000006
PGD                               00000007
PGM                               00000005
PIE1                              00000F9D
PIE2                              00000FA0
PIR1                              00000F9E
PIR2                              00000FA1
PLUSW0                            00000FEB
PLUSW1                            00000FE3
PLUSW2                            00000FDB
POR                               00000001
PORTA                             00000F80
PORTB                             00000F81
PORTC                             00000F82
PORTD                             00000F83
PORTE                             00000F84
POSTDEC0                          00000FED
POSTDEC1                          00000FE5
POSTDEC2                          00000FDD
POSTINC0                          00000FEE
POSTINC1                          00000FE6
POSTINC2                          00000FDE
PR2                               00000FCB
PREINC0                           00000FEC
PREINC1                           00000FE4
PREINC2                           00000FDC
PROD                              00000FF3
PRODH                             00000FF4
PRODL                             00000FF3
PRSEN                             00000007
PSA                               00000003
PSP0                              00000000
PSP1                              00000001
PSP2                              00000002
PSP3                              00000003
PSP4                              00000004
PSP5                              00000005
PSP6                              00000006
PSP7                              00000007
PSPIE                             00000007
PSPIF                             00000007
PSPIP                             00000007
PSPMODE                           00000004
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 157


SYMBOL TABLE
  LABEL                             VALUE 

PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PWM1CON                           00000FB7
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RBIP                              00000000
RBPU                              00000007
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCIP                              00000005
RCON                              00000FD0
RCREG                             00000FAE
RCSTA                             00000FAB
RD                                00000000
RD0                               00000000
RD1                               00000001
RD16                              00000007
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 158


SYMBOL TABLE
  LABEL                             VALUE 

RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
RI                                00000004
RSEN                              00000001
RX                                00000007
RX9                               00000006
RX9D                              00000000
RXD                               00000007
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SCK                               00000003
SCL                               00000003
SCS                               00000000
SCS0                              00000000
SCS1                              00000001
SDA                               00000004
SDI                               00000004
SDO                               00000005
SEN                               00000000
SMP                               00000007
SP0                               00000000
SP1                               00000001
SP2                               00000002
SP3                               00000003
SP4                               00000004
SPBRG                             00000FAF
SPEN                              00000007
SREN                              00000005
SS                                00000005
SSPADD                            00000FC8
SSPBUF                            00000FC9
SSPCON1                           00000FC6
SSPCON2                           00000FC5
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPIP                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000FC7
STATUS                            00000FD8
STKFUL                            00000007
STKOVF                            00000007
STKPTR                            00000FFC
STKPTR0                           00000000
STKPTR1                           00000001
STKPTR2                           00000002
STKPTR3                           00000003
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 159


SYMBOL TABLE
  LABEL                             VALUE 

STKPTR4                           00000004
STKUNF                            00000006
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
Start                             00000338
T016BIT                           00000006
T08BIT                            00000006
T0CKI                             00000004
T0CON                             00000FD5
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0IP                              00000002
T0PS0                             00000000
T0PS1                             00000001
T0PS2                             00000002
T0PS3                             00000003
T0SE                              00000004
T13CKI                            00000000
T1CKI                             00000000
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000FCD
T1OSCEN                           00000003
T1OSI                             00000001
T1OSO                             00000000
T1RUN                             00000006
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000FCA
T3CCP1                            00000003
T3CCP2                            00000006
T3CKPS0                           00000004
T3CKPS1                           00000005
T3CON                             00000FB1
T3SYNC                            00000002
TABLAT                            00000FF5
TBLPTR                            00000FF6
TBLPTRH                           00000FF7
TBLPTRL                           00000FF6
TBLPTRU                           00000FF8
TMR0H                             00000FD7
TMR0IE                            00000005
TMR0IF                            00000002
TMR0IP                            00000002
TMR0L                             00000FD6
TMR0ON                            00000007
TMR1CS                            00000001
TMR1H                             00000FCF
TMR1IE                            00000000
TMR1IF                            00000000
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 160


SYMBOL TABLE
  LABEL                             VALUE 

TMR1IP                            00000000
TMR1L                             00000FCE
TMR1ON                            00000000
TMR2                              00000FCC
TMR2IE                            00000001
TMR2IF                            00000001
TMR2IP                            00000001
TMR2ON                            00000002
TMR3CS                            00000001
TMR3H                             00000FB3
TMR3IE                            00000001
TMR3IF                            00000001
TMR3IP                            00000001
TMR3L                             00000FB2
TMR3ON                            00000000
TMR_nie_pusty                     00000514
TO                                00000003
TOS                               00000FFD
TOSH                              00000FFE
TOSL                              00000FFD
TOSU                              00000FFF
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000F92
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000F93
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000F94
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000F95
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 161


SYMBOL TABLE
  LABEL                             VALUE 

TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000F96
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TUN5                              00000005
TUNSEL                            00000007
TX                                00000006
TX9                               00000006
TX9D                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXIP                              00000004
TXREG                             00000FAD
TXREG_nie_pusty                   0000051A
TXSTA                             00000FAC
Tab_zle_polecenie                 00000634
Timer3_init                       00001C74
UA                                00000001
VCFG0                             00000004
VCFG1                             00000005
VREFM                             00000002
VREFP                             00000003
W                                 00000000
WCOL                              00000007
WDTCON                            00000FD1
WR                                00000001
WREG                              00000FE8
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_1                                00000031
_16K                              000000FD
_1K                               000000F5
_2                                00000032
_2K                               000000F7
_3                                00000033
_32K                              000000FF
_4                                00000034
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 162


SYMBOL TABLE
  LABEL                             VALUE 

_4K                               000000F9
_5                                00000035
_6                                00000036
_7                                00000037
_8                                00000038
_8K                               000000FB
_9                                00000039
_A                                00000041
_B                                00000042
_BORV_20_2L                       000000FF
_BORV_27_2L                       000000FB
_BORV_42_2L                       000000F7
_BORV_45_2L                       000000F3
_BOR_OFF_2L                       000000FD
_BOR_ON_2L                        000000FF
_C                                00000043
_CCP2MX_B3                        000000FE
_CCP2MX_B3_3H                     000000FE
_CCP2MX_C1                        000000FF
_CCP2MX_C1_3H                     000000FF
_CCP2MX_OFF                       000000FE
_CCP2MX_OFF_3H                    000000FE
_CCP2MX_ON                        000000FF
_CCP2MX_ON_3H                     000000FF
_CONFIG1H                         00300001
_CONFIG2H                         00300003
_CONFIG2L                         00300002
_CONFIG3H                         00300005
_CONFIG4L                         00300006
_CONFIG5H                         00300009
_CONFIG5L                         00300008
_CONFIG6H                         0030000B
_CONFIG6L                         0030000A
_CONFIG7H                         0030000D
_CONFIG7L                         0030000C
_CP0_OFF_5L                       000000FF
_CP0_ON_5L                        000000FE
_CP1_OFF_5L                       000000FF
_CP1_ON_5L                        000000FD
_CP2_OFF_5L                       000000FF
_CP2_ON_5L                        000000FB
_CP3_OFF_5L                       000000FF
_CP3_ON_5L                        000000F7
_CPB_OFF_5H                       000000FF
_CPB_ON_5H                        000000BF
_CPD_OFF_5H                       000000FF
_CPD_ON_5H                        0000007F
_D                                00000044
_DEBUG_OFF_4L                     000000FF
_DEBUG_ON_4L                      0000007F
_DEVID1                           003FFFFE
_DEVID2                           003FFFFF
_E                                00000045
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 163


SYMBOL TABLE
  LABEL                             VALUE 

_EBTR0_OFF_7L                     000000FF
_EBTR0_ON_7L                      000000FE
_EBTR1_OFF_7L                     000000FF
_EBTR1_ON_7L                      000000FD
_EBTR2_OFF_7L                     000000FF
_EBTR2_ON_7L                      000000FB
_EBTR3_OFF_7L                     000000FF
_EBTR3_ON_7L                      000000F7
_EBTRB_OFF_7H                     000000FF
_EBTRB_ON_7H                      000000BF
_ECIOP_OSC                        000000F5
_ECIOP_OSC_1H                     000000F5
_ECIO_OSC_1H                      000000F5
_EC_OSC                           000000F4
_EC_OSC_1H                        000000F4
_F                                00000046
_FSCM_OFF_1H                      000000BF
_FSCM_ON_1H                       000000FF
_G                                00000047
_H                                00000048
_HSPLL_OSC                        000000F6
_HSPLL_OSC_1H                     000000F6
_HS_OSC                           000000F2
_HS_OSC_1H                        000000F2
_I                                00000049
_IDLOC0                           00200000
_IDLOC1                           00200001
_IDLOC2                           00200002
_IDLOC3                           00200003
_IDLOC4                           00200004
_IDLOC5                           00200005
_IDLOC6                           00200006
_IDLOC7                           00200007
_IESO_OFF_1H                      0000007F
_IESO_ON_1H                       000000FF
_INTIO1_OSC                       000000F9
_INTIO1_OSC_1H                    000000F9
_INTIO2_OSC                       000000F8
_INTIO2_OSC_1H                    000000F8
_J                                0000004A
_K                                0000004B
_L                                0000004C
_LP_OSC                           000000F0
_LP_OSC_1H                        000000F0
_LVP_OFF_4L                       000000FB
_LVP_ON_4L                        000000FF
_M                                0000004D
_MCLRE_OFF_3H                     0000007F
_MCLRE_ON_3H                      000000FF
_N                                0000004E
_O                                0000004F
_P                                00000050
_PBAD_ANA_3H                      000000FF
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 164


SYMBOL TABLE
  LABEL                             VALUE 

_PBAD_DIG_3H                      000000FD
_PWRT_OFF_2L                      000000FF
_PWRT_ON_2L                       000000FE
_Q                                00000051
_R                                00000052
_RCIO_OSC                         000000F7
_RCIO_OSC_1H                      000000F7
_RC_OSC                           000000FC
_RC_OSC_1H                        000000FC
_S                                00000053
_STVR_OFF_4L                      000000FE
_STVR_ON_4L                       000000FF
_T                                00000054
_U                                00000055
_V                                00000056
_W                                00000057
_WDTPS_128_2H                     000000EF
_WDTPS_16K_2H                     000000FD
_WDTPS_16_2H                      000000E9
_WDTPS_1K_2H                      000000F5
_WDTPS_1_2H                       000000E1
_WDTPS_256_2H                     000000F1
_WDTPS_2K_2H                      000000F7
_WDTPS_2_2H                       000000E3
_WDTPS_32K_2H                     000000FF
_WDTPS_32_2H                      000000EB
_WDTPS_4K_2H                      000000F9
_WDTPS_4_2H                       000000E5
_WDTPS_512_2H                     000000F3
_WDTPS_64_2H                      000000ED
_WDTPS_8K_2H                      000000FB
_WDTPS_8_2H                       000000E7
_WDT_OFF_2H                       000000FE
_WDT_ON_2H                        000000FF
_WRT0_OFF_6L                      000000FF
_WRT0_ON_6L                       000000FE
_WRT1_OFF_6L                      000000FF
_WRT1_ON_6L                       000000FD
_WRT2_OFF_6L                      000000FF
_WRT2_ON_6L                       000000FB
_WRT3_OFF_6L                      000000FF
_WRT3_ON_6L                       000000F7
_WRTB_OFF_6H                      000000FF
_WRTB_ON_6H                       000000BF
_WRTC_OFF_6H                      000000FF
_WRTC_ON_6H                       000000DF
_WRTD_OFF_6H                      000000FF
_WRTD_ON_6H                       0000007F
_X                                00000058
_XT_OSC                           000000F1
_XT_OSC_1H                        000000F1
_Y                                00000059
_Z                                0000005A
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 165


SYMBOL TABLE
  LABEL                             VALUE 

__18F4320                         00000001
_a                                00000061
_b                                00000062
_c                                00000063
_d                                00000064
_dwukropek                        0000003A
_e                                00000065
_f                                00000066
_g                                00000067
_h                                00000068
_i                                00000069
_j                                0000006A
_k                                0000006B
_kropka                           0000002E
_l                                0000006C
_linia_pionowa                    0000007C
_m                                0000006D
_minus                            0000002D
_mniejszosci                      0000003C
_n                                0000006E
_o                                0000006F
_p                                00000070
_plus                             0000002B
_przecinek                        0000002C
_puste                            00000020
_q                                00000071
_r                                00000072
_s                                00000073
_star                             0000002A
_stopni                           000000DF
_t                                00000074
_u                                00000075
_up                               0000005E
_v                                00000076
_w                                00000077
_wiekszosci                       0000003E
_x                                00000078
_y                                00000079
_z                                0000007A
aktualny_odstep                   000000A9
bajt_ds                           000000CD
bez_wlaczania_pomiarow            0000050A
bez_wyswietlania_pradu            00000AF4
bez_wyswietlania_pradu2           00000B40
bez_wyswietlania_temp1            00000A28
bez_wyswietlania_temp2            00000AB2
bit                               0000008C
bsr_temp                          00000083
check                             00000272
check_busy                        00000264
check_if_write                    00000316
clear_line                        00000246
clear_line_old                    00000218
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 166


SYMBOL TABLE
  LABEL                             VALUE 

clear_line_old2                   0000022C
clear_line_petla                  0000024C
cmd_off                           00000214
cyfry_0_9                         000005C8
czujnik_ds1820                    00000005
czy_ekran                         00000001
czy_moge_juz_zmieniac             00000002
czy_pomiary_na_ekran              00000001
czy_ponownie_wlaczyc_temp         00000000
czy_ponownie_wlaczyc_zegar        00000001
czy_usrednianie                   00000000
czy_wlaczyc_ponownie_temp         00000006
czy_wyswietlam_temp               00000005
czy_wysylac_pomiary_serial        00000004
czy_wysylanie                     00000001
czy_zegar_wyswietlac              00000002
czytaj_eeprom                     0000030C
czytam_4_linie                    0000160E
czytam_4_linie2                   0000161A
czytam_4_linie3                   0000162C
czytam_druga_linie                000015D2
czytam_druga_linie2               000015DE
czytam_pierwsza_linie             000015C0
czytam_trzecia_linie              000015F0
czytam_trzecia_linie2             000015FC
dana                              00000003
dane_lcd                          000000A3
dane_odebraneH                    00000001
dane_odebraneL                    00000000
dd_addres_set                     00000080
dec1                              00000098
dec10                             00000097
dec100                            00000096
disp_home                         00000002
display1_4b                       00000000
display2_4b                       0000000F
display_2                         0000000F
display_clear                     00000001
display_clear1_4b                 00000000
display_clear2_4b                 00000001
display_off                       00000008
display_on                        0000000C
dlugosc_oczekiwania_na_zmiane     00000004
do_sekundy                        000000E2
dzialanie_po_klawiszu             00000005
dzien_1                           000000DB
dzien_10                          000000DA
enable                            00000003
enter_back_wyjsc_z_opcji_czujnik  00001A02
enter_back_wyjsc_z_opcji_wyswiet  00001A7E
entry                             00000006
entry1_4b                         00000000
entry2_4b                         0000000C
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 167


SYMBOL TABLE
  LABEL                             VALUE 

fsrh1_temp                        000000E8
fsrh_temp                         00000085
fsrl1_temp                        000000E7
fsrl_temp                         00000084
function_set1_4b                  00000003
function_set2                     00000008
function_set2_4b                  00000008
godziny_1                         000000DD
godziny_10                        000000DC
hex2_dec_koniec                   00000454
hex2dec18                         000003F0
hex2dec18_brak_setek              00000426
hex2dec18_nie_przekroczono_1      00000414
hex2dec_temperatur_popraw_o_128   00000444
hex2dec_temperatur_popraw_o_64    00000438
histereza_R1_1                    000000E9
histereza_R1_2                    000000EA
histereza_R2_1                    000000EB
histereza_R2_2                    000000EC
ile_kanalow                       000000A6
ile_znakow                        00000010
ilosc_czujnikow                   00000007
inicjacja                         00001C34
inicjuj_pomiar                    00000654
inicjuj_pomiary                   00000003
init_4bit                         0000002A
init_8bit                         00000030
jak_duzo_bajtow_odbieram_z_ds     000000B8
jak_duzo_kanalow_pradu            000000D8
jak_duzo_probek                   000000B2
jak_duzo_zliczen_tmr1_na_sekunde  00000010
jaka_wartosc_regulujeH1           000000AE
jaka_wartosc_regulujeH2           000000B0
jaka_wartosc_regulujeL1           000000AF
jaka_wartosc_regulujeL2           000000B1
juz_wysylac_znak_LF               00000CEC
kalibracja                        00000000
kb_change                         00000004
kb_cofnij                         00000005
kb_enter                          00000006
kb_minus                          00000007
koncz_z_moca                      00000C52
koncz_z_moca2                     00000C72
koniec_mierzenia                  00000C76
koniec_pomiarow                   00000CFC
koniec_wyswietlania               00000860
kopiuj_liczbe_przeslana           000005A0
ktora_probka                      000000B3
ktore_bity_lcd_tris               000000F0
ktore_bity_uzywane_na_lcd         0000000F
ktory_aktualnie_kanal_pradu       000000D9
ktory_czujnik_reguluje1           000000EE
ktory_czujnik_reguluje2           000000EF
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 168


SYMBOL TABLE
  LABEL                             VALUE 

ktory_kanal                       000000B4
ktory_kanal_mierze                000000A7
ktory_rejestr_zapisuje            000000AA
lampka                            00000004
lampka2                           00000004
latch_back                        00000000
latch_down                        00000001
latch_enter                       00000003
latch_keys                        00000F83
latch_lcd                         00000F8C
latch_lcd_e                       00000F8B
latch_lcd_rs                      00000F8A
latch_lcd_rw                      00000F8A
latch_moc                         00000F8A
latch_multiplekser                00000F8B
latch_up                          00000002
lcd_init                          00000298
letter                            0000008A
liczba1                           0000008E
liczba2                           0000008F
liczba3                           00000090
linia1                            00000086
linia2                            00000087
linia3                            00000088
linia4                            00000089
linia_czwarta                     000000D0
linia_dolna                       000000C0
linia_druga                       000000C0
linia_gorna                       00000080
linia_pierwsza                    00000080
linia_trzecia                     00000090
ma                                00000002
mamy_back                         00000000
mamy_down                         00000001
mamy_enter                        00000003
mamy_up                           00000002
markers                           0000009F
markers2                          000000A0
markers3                          000000A1
markers_regulacja                 000000A2
mb                                00000001
mc                                00000000
menu_opcje1                       00000000
menu_opcje2                       00000001
menu_opcje3                       00000002
menu_opcje4                       00000003
menu_opcje5                       00000004
menu_opcje_end                    00000005
minuty_1                          000000DF
minuty_10                         000000DE
n                                 0000008B
napisz_czas                       00000456
napisz_minus                      00000006
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 169


SYMBOL TABLE
  LABEL                             VALUE 

napisz_wartosc_temperatury        00000A86
next                              00001CA0
nie                               00000001
nie_czysc_rejestru_polozenia      00000A3A
nie_przekroczono_bajtu_ulamka     0000099A
normalne_ustawienie_tris_lcd      0000000F
numer_opcji                       000000E4
numer_opcji_koncowej              00000014
odczytaj_adres_polozenia_gwiazdk  000019AC
odebrano_liter                    0000008D
odejmij_512_od_wyniku_sredniej    0000094E
odstep_pomiarowy                  000000A8
odswiezanie_zegara                00000003
odznacz_by_znow_mierzyc           000004D0
opcja_czujnik_regulacji1          0000000F
opcja_czujnik_regulacji2          00000010
opcja_czujniki                    00000001
opcja_histereza_R1_1              00000009
opcja_histereza_R1_2              0000000A
opcja_histereza_R2_1              0000000B
opcja_histereza_R2_2              0000000C
opcja_odstep                      00000002
opcja_podswietlenie               00000013
opcja_pomiar_i                    00000004
opcja_regulacja1                  0000000D
opcja_regulacja2                  0000000E
opcja_srednia                     00000003
opcja_ustaw_temp_R1               00000005
opcja_ustaw_temp_R2               00000006
opcja_ustaw_zegar                 00000014
opcja_wlacz_1                     00000007
opcja_wlacz_2                     00000008
opcja_wyswietl_temp               00000012
opcja_wyswietl_zegar              00000011
pclath_temp                       00000082
petla_dzielenia                   00000968
petla_napisz_czas                 00000496
petla_napisz_czas_dwukropek       0000048C
petla_odczytu_poprawek_z_eeprom   00000344
pin_A                             00000000
pin_B                             00000001
pin_C                             00000002
pin_e_4724                        00000001
pisz_cyfre_1                      000008D0
pisz_cyfre_10                     000008C4
pisz_cyfre_100                    000008B8
pisz_ulamek_00                    000008F6
pisz_ulamek_25                    0000090C
pisz_ulamek_50                    00000922
pisz_ulamek_75                    00000938
pokaz_rejestr                     000005DA
pokazuje_temperatury_47           00000007
polecenie_wysylane                000000B7
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 170


SYMBOL TABLE
  LABEL                             VALUE 

polozenie_danych_lcd              00000001
polozenie_gwiazdki                000000E5
polozenie_liczby_menu             0000000A
pomiar0H                          000000B9
pomiar0L                          000000BA
pomiar1H                          000000BB
pomiar1L                          000000BC
pomiar2H                          000000BD
pomiar2L                          000000BE
pomiar3H                          000000BF
pomiar3L                          000000C0
pomiar4H                          000000C1
pomiar4L                          000000C2
pomiar5H                          000000C3
pomiar5L                          000000C4
pomiar6H                          000000C5
pomiar6L                          000000C6
pomiar7H                          000000C7
pomiar7L                          000000C8
pomiarH                           000000AB
pomiarL                           000000AC
pomiar_prad1                      00000002
pomiar_prad1H                     000000C9
pomiar_prad1L                     000000CA
pomiar_prad2                      00000004
pomiar_prad2H                     000000CB
pomiar_prad2L                     000000CC
pomiar_ulamek                     000000AD
pomiary                           00000002
pomiary_pradu                     00000000
pomiary_zrobione                  00000002
poprawka0                         000000CE
poprawka0_ee                      00000000
poprawka1                         000000CF
poprawka1_ee                      00000001
poprawka2                         000000D0
poprawka2_ee                      00000002
poprawka3                         000000D1
poprawka3_ee                      00000003
poprawka4                         000000D2
poprawka4_ee                      00000004
poprawka5                         000000D3
poprawka5_ee                      00000005
poprawka6                         000000D4
poprawka6_ee                      00000006
poprawka7                         000000D5
poprawka7_ee                      00000007
poprawka_prad1                    000000D6
poprawka_prad1_ee                 00000008
poprawka_prad2                    000000D7
poprawka_prad2_ee                 00000009
port_CTS                          00000F82
port_RTS                          00000F82
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 171


SYMBOL TABLE
  LABEL                             VALUE 

port_ds1820                       00000F82
port_keys                         00000F83
port_lcd                          00000F83
port_lcd_e                        00000F82
port_lcd_rs                       00000F81
port_lcd_rw                       00000F81
port_multiplekser                 00000F82
port_serial                       00000F81
port_triak                        00000F81
portlampka2                       00000F81
powlaczaj_moc_reg2                00000C56
powrot_z_polecen                  00000802
pozycja_menu                      000000E3
procedura_obslugi_zegara          0000050A
procedura_regulacji_dwu_2         00000BAA
procedura_regulacji_dwustawnej    00000B44
procedura_sumowania_wyniku        00000988
procedura_wyswietlania_kolejnych  00001A1C
procek                            018F4320
przerwanie                        00000008
przerwanie_1                      0000002E
przerwanie_2                      0000003A
przerwanie_3                      00000046
przerwanie_4                      00000052
przerwanie_5                      0000005E
przerwanie_6                      00000064
przerwanie_7                      00000070
przerwanie_pomiaru                0000018A
przerwanie_t0                     00000000
przerwanie_t1                     00000001
przerwanie_wysylania              00000176
rcsta_temp                        000000A5
regulacja_dwu_moc_OFF             00000B76
regulacja_dwu_moc_OFF2            00000BDC
regulacja_dwu_moc_ON              00000B8E
regulacja_dwu_moc_ON2             00000BF4
regulacja_dwu_moc_ON_wylacz       00000BA0
regulacja_dwu_moc_ON_wylacz2      00000C06
reguluj1                          00000001
reguluj2                          00000003
rozkaz_rejestracji_poprawki_pomi  00000748
rozpocznij_pomiary                000004E2
rs                                00000003
rw                                00000002
sa_rowne_nic_nie_rob              00000BA6
sa_rowne_nic_nie_rob2             00000C0C
sa_rowne_sprawdz_Lbajt            00000B70
sa_rowne_sprawdz_Lbajt2           00000BD6
sekundy_1                         000000E1
sekundy_10                        000000E0
send                              000001E8
send4bit_petla                    000001EE
set_4bit                          00000028
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 172


SYMBOL TABLE
  LABEL                             VALUE 

set_8bit                          0000003C
sprawdz_10                        0000088A
sprawdz_RTS_prad                  00000C7C
sprawdz_czy_mam_dalej_mierzyc     00000C10
sprawdz_czy_mam_dalej_mierzyc_pr  00000C22
sprawdz_czy_mam_wyswietlac_47     00000A54
sprawdz_czy_mozna_wysylac         00000514
sprawdz_czy_odebrano_litere       00000568
sprawdz_czy_odebrano_mala_litere  00000588
sprawdz_czy_polecenie             00000794
sprawdz_czy_wchodze_do_zmiany_op  0000167A
sprawdz_czy_wlaczyc_szybka_zmian  00000D96
sprawdz_dzien                     000000E2
sprawdz_godziny                   000000FC
sprawdz_ktore_polecenie           000007A6
sprawdz_odebrane                  00000003
sprawdz_zwiekszanie_godzin_norma  00001524
stan2_key                         0000009A
stan_key                          00000099
status_temp                       00000081
szybka_zmiana_wartosci            000000E6
tablica_czwarta                   00001B68
tablica_druga                     00001B22
tablica_gwiazdki                  00001BC4
tablica_piata                     00001B90
tablica_pierwsza                  00001B00
tablica_trzecia                   00001B42
test_koniec                       00001CB6
tmp                               00000091
tmp6                              00000094
tmp7                              00000095
tmp_hex                           00000092
tmp_hex_H                         00000093
tmp_lcd                           000000A4
triak1                            00000000
triak2                            00000001
tris_lcd                          00000F95
trzymanie_klawisza                00000007
usrednianie_przez_co_mnoze        000000B5
usrednianie_wartosci              00000964
ustaw_linie_druga                 00000A76
ustaw_linie_trzecia               00000A66
ustaw_probki                      00000700
ustaw_regulator                   000006C2
ustaw_spbrg                       000005CE
ustaw_sprawdzanie_szybkiej_zmian  00000DBE
ustaw_wartosc_dzielenia_usrednia  000006E0
ustaw_wyswietlanie_czasu_na_lcd   00000108
ustawianie_czasu_co_wyswietlam    000000ED
w_temp                            00000080
wait                              000001DA
wait_petla                        000001DC
wcisnieto_back                    00000D58
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 173


SYMBOL TABLE
  LABEL                             VALUE 

wcisnieto_down                    00000D66
wcisnieto_enter                   00000DC8
wcisnieto_klawisz                 00000004
wcisnieto_up                      00000D7E
wlacz_przerwanie_tmr3             00000D4C
wlaczenie_rejestracji_pradu       00000726
write                             00000040
write_4bit                        00000010
write_lcd                         0000020A
wybor_czujnika_regulatora         00000778
wybrano_czujnik_regulatora_wieks  0000078C
wyjscie_przerwanie                00000070
wykonano_pomiary_wszystkich_kana  00000C36
wykryto_back                      00000DD6
wykryto_back_exit                 00000DF4
wykryto_back_nic_nie_rob          00000DF4
wykryto_blad                      00000184
wykryto_down                      00000DFC
wykryto_down_3_wyswietl           00000F76
wykryto_down_exit                 00001196
wykryto_down_exit_trzymanie       000011A4
wykryto_down_sprawdz15_nie_ma_ze  0000107C
wykryto_down_sprawdz15_show       0000107E
wykryto_down_sprawdz16_nie_ma_ze  000010AC
wykryto_down_sprawdz16_show       000010AE
wykryto_down_sprawdz21            00001196
wykryto_down_sprawdz_10           00001004
wykryto_down_sprawdz_11           00001024
wykryto_down_sprawdz_11_1         000010FE
wykryto_down_sprawdz_11_2         00001132
wykryto_down_sprawdz_11_3         00001166
wykryto_down_sprawdz_11_4         0000118E
wykryto_down_sprawdz_12           00001044
wykryto_down_sprawdz_13           00001064
wykryto_down_sprawdz_15           00001064
wykryto_down_sprawdz_16           00001094
wykryto_down_sprawdz_17           000010C4
wykryto_down_sprawdz_2            00000F32
wykryto_down_sprawdz_20           000010C4
wykryto_down_sprawdz_3            00000F52
wykryto_down_sprawdz_3_zmniejsz_  00000F6A
wykryto_down_sprawdz_4            00000F94
wykryto_down_sprawdz_5            00000F94
wykryto_down_sprawdz_5_zawracani  00000FB0
wykryto_down_sprawdz_5_zero       00000FB4
wykryto_down_sprawdz_6            00000FBC
wykryto_down_sprawdz_6_zawracani  00000FD8
wykryto_down_sprawdz_6_zero       00000FDC
wykryto_down_sprawdz_7            00000FE4
wykryto_down_sprawdz_9            00000FE4
wykryto_down_sprawdz_czy_wyswiet  00000E1A
wykryto_down_wyswietl_opcje_tabl  00000E8C
wykryto_down_zmiana_opcji         00000F00
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 174


SYMBOL TABLE
  LABEL                             VALUE 

wykryto_down_zmiana_opcji_wyswie  00000F16
wykryto_down_zmiana_polozenia_gw  00000ECC
wykryto_enter                     0000162E
wykryto_enter_exit                000019A4
wykryto_enter_gdzie_wyswietlam_l  000019C2
wykryto_enter_sprawdz_opcje10     000017BC
wykryto_enter_sprawdz_opcje11     000017DC
wykryto_enter_sprawdz_opcje12     000017FC
wykryto_enter_sprawdz_opcje13     0000181C
wykryto_enter_sprawdz_opcje14     0000182A
wykryto_enter_sprawdz_opcje15     00001838
wykryto_enter_sprawdz_opcje16     00001858
wykryto_enter_sprawdz_opcje17     00001878
wykryto_enter_sprawdz_opcje18     00001886
wykryto_enter_sprawdz_opcje19     00001894
wykryto_enter_sprawdz_opcje2      000016A0
wykryto_enter_sprawdz_opcje20     000018A2
wykryto_enter_sprawdz_opcje21     000018B8
wykryto_enter_sprawdz_opcje3      000016C0
wykryto_enter_sprawdz_opcje4      000016E0
wykryto_enter_sprawdz_opcje5      000016F4
wykryto_enter_sprawdz_opcje6      0000173A
wykryto_enter_sprawdz_opcje7      00001780
wykryto_enter_sprawdz_opcje8      0000178E
wykryto_enter_sprawdz_opcje9      0000179C
wykryto_enter_wyjscie_opcje10     00001930
wykryto_enter_wyjscie_opcje11     00001940
wykryto_enter_wyjscie_opcje11_1   00001998
wykryto_enter_wyjscie_opcje12     00001950
wykryto_enter_wyjscie_opcje13     00001960
wykryto_enter_wyjscie_opcje14     00001960
wykryto_enter_wyjscie_opcje15     00001960
wykryto_enter_wyjscie_opcje16     00001970
wykryto_enter_wyjscie_opcje17     00001980
wykryto_enter_wyjscie_opcje2      000018E0
wykryto_enter_wyjscie_opcje20     00001980
wykryto_enter_wyjscie_opcje21     000019A4
wykryto_enter_wyjscie_opcje3      000018F0
wykryto_enter_wyjscie_opcje4      00001900
wykryto_enter_wyjscie_opcje5      00001900
wykryto_enter_wyjscie_opcje6      00001910
wykryto_enter_wyjscie_opcje7      00001920
wykryto_enter_wyjscie_opcje9      00001920
wykryto_enter_zmiana_opcji        000018BC
wykryto_odbior                    00000132
wykryto_odbior_CR                 00000162
wykryto_odbior_odczyt             00000132
wykryto_oerr                      0000017A
wykryto_rb                        00000116
wykryto_t0                        00000122
wykryto_t1                        0000008C
wykryto_t1_wyjscie                00000110
wykryto_t2                        0000012C
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 175


SYMBOL TABLE
  LABEL                             VALUE 

wykryto_t3                        000001A6
wykryto_t3_nie_puszczono          000001BE
wykryto_up                        000011A8
wykryto_up_3_wyswietl             00001396
wykryto_up_exit                   0000159E
wykryto_up_exit_trzymanie         000015AC
wykryto_up_sprawdz15_increase     00001482
wykryto_up_sprawdz15_show         00001484
wykryto_up_sprawdz16_increase     000014B0
wykryto_up_sprawdz16_show         000014B2
wykryto_up_sprawdz_10             0000140C
wykryto_up_sprawdz_11             0000142C
wykryto_up_sprawdz_12             0000144C
wykryto_up_sprawdz_13             0000146C
wykryto_up_sprawdz_14             0000146C
wykryto_up_sprawdz_15             0000146C
wykryto_up_sprawdz_16             0000149A
wykryto_up_sprawdz_17             000014C8
wykryto_up_sprawdz_2              0000134E
wykryto_up_sprawdz_20             000014C8
wykryto_up_sprawdz_20_1           00001502
wykryto_up_sprawdz_20_2           0000153C
wykryto_up_sprawdz_20_3           0000156E
wykryto_up_sprawdz_20_4           00001596
wykryto_up_sprawdz_21             0000159E
wykryto_up_sprawdz_3              0000136E
wykryto_up_sprawdz_3_zwieksz_pro  00001388
wykryto_up_sprawdz_4              000013AC
wykryto_up_sprawdz_5              000013AC
wykryto_up_sprawdz_5_dalej        000013C4
wykryto_up_sprawdz_6              000013CC
wykryto_up_sprawdz_6_dalej        000013E4
wykryto_up_sprawdz_7              000013EC
wykryto_up_sprawdz_9              000013EC
wykryto_up_sprawdz_czy_wyswietla  000011C6
wykryto_up_wyswietl_opcje_tablic  0000121A
wykryto_up_zmiana_opcji           0000131E
wykryto_up_zmiana_opcji_wyswietl  00001332
wykryto_up_zmiana_polozenia_gwia  000012EA
wylacz_moc1                       00000002
wylacz_moc2                       00000005
wylacz_pomiary                    000006A4
wylacz_regulator                  000006BA
wylaczam_moc                      00000C50
wylaczam_moc2                     00000C70
wylaczenie_rejestarcji_pradu      00000742
wynik                             0000009C
wynik01                           0000009D
wynik_to_po_prostu_L              00000962
wynikh                            0000009B
wyslij_na_ekran_to_co_odebralem   0000080C
wyslij_pomiar                     00000004
wyslij_znak                       00000522
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 176


SYMBOL TABLE
  LABEL                             VALUE 

wyslij_znak_koniec                00000542
wyslij_znak_petla                 0000052A
wyswietl_1                        000004A8
wyswietl_cyfry_temperatury        00000866
wyswietl_cyfry_temperatury2       00000894
wyswietl_cyfry_temperatury_opcje  00000880
wyswietl_litere_petla             00000822
wyswietl_litere_petla2            0000083C
wyswietl_litere_petla3            0000085A
wyswietl_opcje_menu               000015B0
wyswietl_puste                    000004A6
wyswietl_temp_w_opcjach           00001706
wyswietl_temp_w_opcjach2          0000174C
wysylanie_pomiaru                 000009AE
zalacz_grzanie                    00000B68
zalacz_grzanie2                   00000BCE
zalacz_moc1                       00000000
zalacz_moc2                       00000004
zamien_na_hex                     000005B6
zapis_do_pamieci_prad             00000AB6
zapis_do_pamieci_temperatury      000009C6
zapis_eeprom                      00000316
zapisz_do_dzien_1_0               000014F2
zapisz_do_dzien_1_99              000010EE
zapisz_do_godziny_1_9             00001122
zapisz_do_minuty_1_0              0000155E
zapisz_do_minuty_1_9              00001156
zapisz_do_pamieci                 000009C0
zapisz_do_pamieci_czy_mam_send    000009DE
zapisz_do_pamieci_juz_po_SERIAL   00000A16
zapisz_do_pamieci_nie_sprawdzaj_  000009DE
zapisz_do_sekundy_1_0             0000158A
zapisz_do_sekundy_1_9             00001182
zla_dana_wez_0                    0000059C
zle_polecenie                     00000612
zle_polecenie_petla               00000614
zmiana_opcji                      00000007
zmierz_nastepny_czujnik_temperat  00000D16
zmierz_nastepny_kanal             00000D22
zmierz_nastepny_nie_3             00000D3A
zmierz_prad                       00000D0C
zmniejsz_dzien_1                  000010F8
zmniejsz_godziny_1                0000112C
zmniejsz_minuty_1                 00001160
zmniejsz_sekundy_1                0000118C
znacznik_CTS                      00000004
znacznik_RTS                      00000005
znacznik_pomiaru_pradu            00000001
znaczniki                         0000009E
znaczniki_ds                      000000B6
znak_I                            000000CC
znak_cr                           0000000D
znak_lf                           0000000A
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 177


SYMBOL TABLE
  LABEL                             VALUE 

znow_kaz_mierzyc                  000009A8
zwieksz_dzien_1                   000014FC
zwieksz_godziny_1                 00001536
zwieksz_minuty_1                  00001568
zwieksz_sekundy_1                 00001594
﻿                               00000000


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXXX----XXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
03C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0400 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0440 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0480 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
04C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0500 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0540 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0580 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
05C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0600 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0640 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0680 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
06C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0700 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0740 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0780 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
07C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0800 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0840 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0880 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
08C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 178


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0900 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0940 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0980 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
09C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0A00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0A40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0A80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0AC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0B00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0B40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0B80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0BC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0C00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0C40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0C80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0CC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0D00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0D40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0D80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0DC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0E00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0E40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0E80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0EC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0F00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0F40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0F80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0FC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1000 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
10C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
11C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
12C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
13C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1400 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1440 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
MPASM  5.39         SERIAL_DWA_REGULATORY.ASM   5-4-2014  16:54:45         PAGE 179


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


1480 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
14C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1500 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1540 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1580 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
15C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1600 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1640 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1680 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
16C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1700 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1740 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1780 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
17C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1800 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1840 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1880 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
18C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1900 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1940 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1980 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
19C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1A00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1A40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1A80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1AC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XX-------------- ----------------
1B00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1B40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1B80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1BC0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1C00 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1C40 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
1C80 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXX----
0000 : XXXXXXXX-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Bytes Used:  7330
Program Memory Bytes Free:   862


Errors   :    15
Warnings :   114 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

